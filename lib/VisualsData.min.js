!function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}({0:function(e,t,r){e.exports=r(373)},73:function(e,t){var r,r=(window.jsCommon,window.powerbi),i=(window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft,this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.visitEntity=function(e,t){return this.visitDefault(e,t)},e.prototype.visitColumnRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitMeasureRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitAggr=function(e,t){return this.visitDefault(e,t)},e.prototype.visitPercentile=function(e,t){return this.visitDefault(e,t)},e.prototype.visitHierarchy=function(e,t){return this.visitDefault(e,t)},e.prototype.visitHierarchyLevel=function(e,t){return this.visitDefault(e,t)},e.prototype.visitPropertyVariationSource=function(e,t){return this.visitDefault(e,t)},e.prototype.visitSelectRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitBetween=function(e,t){return this.visitDefault(e,t)},e.prototype.visitIn=function(e,t){return this.visitDefault(e,t)},e.prototype.visitAnd=function(e,t){return this.visitDefault(e,t)},e.prototype.visitOr=function(e,t){return this.visitDefault(e,t)},e.prototype.visitCompare=function(e,t){return this.visitDefault(e,t)},e.prototype.visitContains=function(e,t){return this.visitDefault(e,t)},e.prototype.visitExists=function(e,t){return this.visitDefault(e,t)},e.prototype.visitNot=function(e,t){return this.visitDefault(e,t)},e.prototype.visitStartsWith=function(e,t){return this.visitDefault(e,t)},e.prototype.visitConstant=function(e,t){return this.visitDefault(e,t)},e.prototype.visitDateSpan=function(e,t){return this.visitDefault(e,t)},e.prototype.visitDateAdd=function(e,t){return this.visitDefault(e,t)},e.prototype.visitNow=function(e,t){return this.visitDefault(e,t)},e.prototype.visitDefaultValue=function(e,t){return this.visitDefault(e,t)},e.prototype.visitAnyValue=function(e,t){return this.visitDefault(e,t)},e.prototype.visitArithmetic=function(e,t){return this.visitDefault(e,t)},e.prototype.visitFillRule=function(e,t){return this.visitDefault(e,t)},e.prototype.visitResourcePackageItem=function(e,t){return this.visitDefault(e,t)},e.prototype.visitScopedEval=function(e,t){return this.visitDefault(e,t)},e.prototype.visitWithRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitTransformTableRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitTransformOutputRoleRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitDefault=function(e,t){},e}();e.DefaultSQExprVisitorWithArg=t;var r=function(e){function t(){e.apply(this,arguments)}return i(t,e),t}(t);e.DefaultSQExprVisitor=r;var n=function(){function e(){}return e.prototype.visitEntity=function(e){this.visitDefault(e)},e.prototype.visitColumnRef=function(e){e.source.accept(this)},e.prototype.visitMeasureRef=function(e){e.source.accept(this)},e.prototype.visitAggr=function(e){e.arg.accept(this)},e.prototype.visitPercentile=function(e){e.arg.accept(this)},e.prototype.visitHierarchy=function(e){e.arg.accept(this)},e.prototype.visitHierarchyLevel=function(e){e.arg.accept(this)},e.prototype.visitPropertyVariationSource=function(e){e.arg.accept(this)},e.prototype.visitSelectRef=function(e){this.visitDefault(e)},e.prototype.visitBetween=function(e){e.arg.accept(this),e.lower.accept(this),e.upper.accept(this)},e.prototype.visitIn=function(e){for(var t=e.args,r=0,i=t.length;i>r;r++)t[r].accept(this);for(var n=e.values,r=0,i=n.length;i>r;r++)for(var o=n[r],a=0,u=o.length;u>a;a++)o[a].accept(this)},e.prototype.visitAnd=function(e){e.left.accept(this),e.right.accept(this)},e.prototype.visitOr=function(e){e.left.accept(this),e.right.accept(this)},e.prototype.visitCompare=function(e){e.left.accept(this),e.right.accept(this)},e.prototype.visitContains=function(e){e.left.accept(this),e.right.accept(this)},e.prototype.visitExists=function(e){e.arg.accept(this)},e.prototype.visitNot=function(e){e.arg.accept(this)},e.prototype.visitStartsWith=function(e){e.left.accept(this),e.right.accept(this)},e.prototype.visitConstant=function(e){this.visitDefault(e)},e.prototype.visitDateSpan=function(e){e.arg.accept(this)},e.prototype.visitDateAdd=function(e){e.arg.accept(this)},e.prototype.visitNow=function(e){this.visitDefault(e)},e.prototype.visitDefaultValue=function(e){this.visitDefault(e)},e.prototype.visitAnyValue=function(e){this.visitDefault(e)},e.prototype.visitArithmetic=function(e){e.left.accept(this),e.right.accept(this)},e.prototype.visitFillRule=function(e){e.input.accept(this);var t=e.rule,r=t.linearGradient2,i=t.linearGradient3;r&&this.visitLinearGradient2(r),i&&this.visitLinearGradient3(i)},e.prototype.visitLinearGradient2=function(e){this.visitFillRuleStop(e.min),this.visitFillRuleStop(e.max)},e.prototype.visitLinearGradient3=function(e){this.visitFillRuleStop(e.min),this.visitFillRuleStop(e.mid),this.visitFillRuleStop(e.max)},e.prototype.visitResourcePackageItem=function(e){this.visitDefault(e)},e.prototype.visitScopedEval=function(e){e.expression.accept(this);for(var t=0,r=e.scope;t<r.length;t++){var i=r[t];i.accept(this)}},e.prototype.visitWithRef=function(e){this.visitDefault(e)},e.prototype.visitTransformTableRef=function(e){this.visitDefault(e)},e.prototype.visitTransformOutputRoleRef=function(e){this.visitDefault(e)},e.prototype.visitDefault=function(e){},e.prototype.visitFillRuleStop=function(e){e.color.accept(this);var t=e.value;t&&t.accept(this)},e}();e.DefaultSQExprVisitorWithTraversal=n}(t=e.data||(e.data={}))}(r||(r={}))},74:function(e,t){var r,i=window.jsCommon,r=window.powerbi;window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){function t(e){return e&m}function r(e){return(e&g)===e}function n(e){if(r(e))return null;var t=h[e];if(t){var i=t.lastIndexOf("_");if(i>0){var n=t.slice(0,i);h[n]&&(t=n)}}return t||null}function o(e,r){var i=v[e],n=h[i];if(null==n&&(n=h.Null),e&&r){var o=h[r];if(o){var a=t(o);a===v.Null?(o=n|o,h[o]&&(n=o)):a===e&&(n=o)}}return n}function a(e,t){return(e&y)===(t&y)}var u=i.EnumExtensions,s=function(){function e(e,t,r){this.underlyingType=e,this.category=t,u.hasFlag(e,h.Temporal)&&(this.temporalType=new l(e)),u.hasFlag(e,h.Geography)&&(this.geographyType=new p(e)),u.hasFlag(e,h.Miscellaneous)&&(this.miscType=new f(e)),u.hasFlag(e,h.Formatting)&&(this.formattingType=new d(e)),u.hasFlag(e,h.Enumeration)&&(this.enumType=r),u.hasFlag(e,h.Scripting)&&(this.scriptingType=new c(e))}return e.fromDescriptor=function(t){if(t=t||{},t.text)return e.fromExtendedType(h.Text);if(t.integer)return e.fromExtendedType(h.Integer);if(t.numeric)return e.fromExtendedType(h.Double);if(t.bool)return e.fromExtendedType(h.Boolean);if(t.dateTime)return e.fromExtendedType(h.DateTime);if(t.duration)return e.fromExtendedType(h.Duration);if(t.binary)return e.fromExtendedType(h.Binary);if(t.none)return e.fromExtendedType(h.None);if(t.scripting&&t.scripting.source)return e.fromExtendedType(h.ScriptSource);if(t.enumeration)return e.fromEnum(t.enumeration);if(t.temporal){if(t.temporal.year)return e.fromExtendedType(h.Years_Integer);if(t.temporal.month)return e.fromExtendedType(h.Months_Integer);if(t.temporal.paddedDateTableDate)return e.fromExtendedType(h.PaddedDateTableDates)}if(t.geography){if(t.geography.address)return e.fromExtendedType(h.Address);if(t.geography.city)return e.fromExtendedType(h.City);if(t.geography.continent)return e.fromExtendedType(h.Continent);if(t.geography.country)return e.fromExtendedType(h.Country);if(t.geography.county)return e.fromExtendedType(h.County);if(t.geography.region)return e.fromExtendedType(h.Region);if(t.geography.postalCode)return e.fromExtendedType(h.PostalCode_Text);if(t.geography.stateOrProvince)return e.fromExtendedType(h.StateOrProvince);if(t.geography.place)return e.fromExtendedType(h.Place);if(t.geography.latitude)return e.fromExtendedType(h.Latitude_Double);if(t.geography.longitude)return e.fromExtendedType(h.Longitude_Double)}if(t.misc){if(t.misc.image)return e.fromExtendedType(h.Image);if(t.misc.imageUrl)return e.fromExtendedType(h.ImageUrl);if(t.misc.webUrl)return e.fromExtendedType(h.WebUrl);if(t.misc.barcode)return e.fromExtendedType(h.Barcode_Text)}if(t.formatting){if(t.formatting.color)return e.fromExtendedType(h.Color);if(t.formatting.formatString)return e.fromExtendedType(h.FormatString);if(t.formatting.alignment)return e.fromExtendedType(h.Alignment);if(t.formatting.labelDisplayUnits)return e.fromExtendedType(h.LabelDisplayUnits);if(t.formatting.fontSize)return e.fromExtendedType(h.FontSize);if(t.formatting.labelDensity)return e.fromExtendedType(h.LabelDensity)}return t.extendedType?e.fromExtendedType(t.extendedType):t.operations&&t.operations.searchEnabled?e.fromExtendedType(h.SearchEnabled):e.fromExtendedType(h.Null)},e.fromExtendedType=function(r){r=r||h.Null;var i=t(r),o=n(r);return e.fromPrimitiveTypeAndCategory(i,o)},e.fromPrimitiveTypeAndCategory=function(t,r){t=t||v.Null,r=r||null;var i=t.toString();return r&&(i+="|"+r),e.typeCache[i]||(e.typeCache[i]=new e(o(t,r),r))},e.fromEnum=function(t){return new e(h.Enumeration,null,t)},e.isCompatibleTo=function(t,r){for(var i=e.fromDescriptor(t),n=0,o=r;n<o.length;n++){var a=o[n],u=e.fromDescriptor(a);if(u.isCompatibleFrom(i))return!0}return!1},e.prototype.isCompatibleFrom=function(e){var t=e.primitiveType;return this===e||this.primitiveType===t||t===v.Null},e.prototype.equals=function(e){return _.isEqual(this,e)},Object.defineProperty(e.prototype,"primitiveType",{get:function(){return t(this.underlyingType)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extendedType",{get:function(){return this.underlyingType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categoryString",{get:function(){return this.category},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.primitiveType===v.Text},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numeric",{get:function(){return u.hasFlag(this.underlyingType,h.Numeric)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"integer",{get:function(){return this.primitiveType===v.Integer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bool",{get:function(){return this.primitiveType===v.Boolean},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateTime",{get:function(){return this.primitiveType===v.DateTime||this.primitiveType===v.Date||this.primitiveType===v.Time},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this.primitiveType===v.Duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binary",{get:function(){return this.primitiveType===v.Binary},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"none",{get:function(){return this.primitiveType===v.None},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"temporal",{get:function(){return this.temporalType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"geography",{get:function(){return this.geographyType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"misc",{get:function(){return this.miscType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatting",{get:function(){return this.formattingType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enum",{get:function(){return this.enumType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scripting",{get:function(){return this.scriptingType},enumerable:!0,configurable:!0}),e.typeCache={},e}();e.ValueType=s;var c=function(){function e(e){this.underlyingType=e}return Object.defineProperty(e.prototype,"source",{get:function(){return a(this.underlyingType,h.ScriptSource)},enumerable:!0,configurable:!0}),e}();e.ScriptType=c;var l=function(){function e(e){this.underlyingType=e}return Object.defineProperty(e.prototype,"year",{get:function(){return a(this.underlyingType,h.Years)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"month",{get:function(){return a(this.underlyingType,h.Months)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paddedDateTableDate",{get:function(){return a(this.underlyingType,h.PaddedDateTableDates)},enumerable:!0,configurable:!0}),e}();e.TemporalType=l;var p=function(){function e(e){this.underlyingType=e}return Object.defineProperty(e.prototype,"address",{get:function(){return a(this.underlyingType,h.Address)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"city",{get:function(){return a(this.underlyingType,h.City)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"continent",{get:function(){return a(this.underlyingType,h.Continent)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"country",{get:function(){return a(this.underlyingType,h.Country)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"county",{get:function(){return a(this.underlyingType,h.County)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"region",{get:function(){return a(this.underlyingType,h.Region)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"postalCode",{get:function(){return a(this.underlyingType,h.PostalCode)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stateOrProvince",{get:function(){return a(this.underlyingType,h.StateOrProvince)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"place",{get:function(){return a(this.underlyingType,h.Place)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"latitude",{get:function(){return a(this.underlyingType,h.Latitude)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return a(this.underlyingType,h.Longitude)},enumerable:!0,configurable:!0}),e}();e.GeographyType=p;var f=function(){function e(e){this.underlyingType=e}return Object.defineProperty(e.prototype,"image",{get:function(){return a(this.underlyingType,h.Image)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageUrl",{get:function(){return a(this.underlyingType,h.ImageUrl)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"webUrl",{get:function(){return a(this.underlyingType,h.WebUrl)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barcode",{get:function(){return a(this.underlyingType,h.Barcode)},enumerable:!0,configurable:!0}),e}();e.MiscellaneousType=f;var d=function(){function e(e){this.underlyingType=e}return Object.defineProperty(e.prototype,"color",{get:function(){return a(this.underlyingType,h.Color)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatString",{get:function(){return a(this.underlyingType,h.FormatString)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignment",{get:function(){return a(this.underlyingType,h.Alignment)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelDisplayUnits",{get:function(){return a(this.underlyingType,h.LabelDisplayUnits)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return a(this.underlyingType,h.FontSize)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelDensity",{get:function(){return a(this.underlyingType,h.LabelDensity)},enumerable:!0,configurable:!0}),e}();e.FormattingType=d,function(e){e[e.Null=0]="Null",e[e.Text=1]="Text",e[e.Decimal=2]="Decimal",e[e.Double=3]="Double",e[e.Integer=4]="Integer",e[e.Boolean=5]="Boolean",e[e.Date=6]="Date",e[e.DateTime=7]="DateTime",e[e.DateTimeZone=8]="DateTimeZone",e[e.Time=9]="Time",e[e.Duration=10]="Duration",e[e.Binary=11]="Binary",e[e.None=12]="None"}(e.PrimitiveType||(e.PrimitiveType={}));var v=e.PrimitiveType;!function(e){e[e.Numeric=256]="Numeric",e[e.Temporal=512]="Temporal",e[e.Geography=1024]="Geography",e[e.Miscellaneous=2048]="Miscellaneous",e[e.Formatting=4096]="Formatting",e[e.Scripting=8192]="Scripting",e[e.Null=0]="Null",e[e.Text=1]="Text",e[e.Decimal=258]="Decimal",e[e.Double=259]="Double",e[e.Integer=260]="Integer",e[e.Boolean=5]="Boolean",e[e.Date=518]="Date",e[e.DateTime=519]="DateTime",e[e.DateTimeZone=520]="DateTimeZone",e[e.Time=521]="Time",e[e.Duration=10]="Duration",e[e.Binary=11]="Binary",e[e.None=12]="None",e[e.Years=66048]="Years",e[e.Years_Text=66049]="Years_Text",e[e.Years_Integer=66308]="Years_Integer",e[e.Years_Date=66054]="Years_Date",e[e.Years_DateTime=66055]="Years_DateTime",e[e.Months=131584]="Months",e[e.Months_Text=131585]="Months_Text",e[e.Months_Integer=131844]="Months_Integer",e[e.Months_Date=131590]="Months_Date",e[e.Months_DateTime=131591]="Months_DateTime",e[e.PaddedDateTableDates=197127]="PaddedDateTableDates",e[e.Address=6554625]="Address",e[e.City=6620161]="City",e[e.Continent=6685697]="Continent",e[e.Country=6751233]="Country",e[e.County=6816769]="County",e[e.Region=6882305]="Region",e[e.PostalCode=6947840]="PostalCode",e[e.PostalCode_Text=6947841]="PostalCode_Text",e[e.PostalCode_Integer=6948100]="PostalCode_Integer",e[e.StateOrProvince=7013377]="StateOrProvince",e[e.Place=7078913]="Place",e[e.Latitude=7144448]="Latitude",e[e.Latitude_Decimal=7144706]="Latitude_Decimal",e[e.Latitude_Double=7144707]="Latitude_Double",e[e.Longitude=7209984]="Longitude",e[e.Longitude_Decimal=7210242]="Longitude_Decimal",e[e.Longitude_Double=7210243]="Longitude_Double",e[e.Image=13109259]="Image",e[e.ImageUrl=13174785]="ImageUrl",e[e.WebUrl=13240321]="WebUrl",e[e.Barcode=13305856]="Barcode",e[e.Barcode_Text=13305857]="Barcode_Text",e[e.Barcode_Integer=13306116]="Barcode_Integer",e[e.Color=19664897]="Color",e[e.FormatString=19730433]="FormatString",e[e.Alignment=20058113]="Alignment",e[e.LabelDisplayUnits=20123649]="LabelDisplayUnits",e[e.FontSize=20189443]="FontSize",e[e.LabelDensity=20254979]="LabelDensity",e[e.Enumeration=26214401]="Enumeration",e[e.ScriptSource=32776193]="ScriptSource",e[e.SearchEnabled=65541]="SearchEnabled"}(e.ExtendedType||(e.ExtendedType={}));var h=e.ExtendedType,m=255,g=65535,y=4294901760}(r||(r={}))},75:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){function t(e){switch(e){case 0:return"Add";case 1:return"Subtract";case 2:return"Multiply";case 3:return"Divide"}throw new Error("Unexpected ArithmeticOperatorKind: "+e)}!function(e){e[e.Table=0]="Table",e[e.Pod=1]="Pod",e[e.Expression=2]="Expression"}(e.EntitySourceType||(e.EntitySourceType={}));e.EntitySourceType;e.getArithmeticOperatorName=t,function(e){e[e.Day=0]="Day",e[e.Week=1]="Week",e[e.Month=2]="Month",e[e.Year=3]="Year",e[e.Decade=4]="Decade",e[e.Second=5]="Second",e[e.Minute=6]="Minute",e[e.Hour=7]="Hour"}(e.TimeUnit||(e.TimeUnit={}));e.TimeUnit;!function(e){e[e.Sum=0]="Sum",e[e.Avg=1]="Avg",e[e.Count=2]="Count",e[e.Min=3]="Min",e[e.Max=4]="Max",e[e.CountNonNull=5]="CountNonNull",e[e.Median=6]="Median",e[e.StandardDeviation=7]="StandardDeviation",e[e.Variance=8]="Variance"}(e.QueryAggregateFunction||(e.QueryAggregateFunction={}));e.QueryAggregateFunction;!function(e){e[e.Equal=0]="Equal",e[e.GreaterThan=1]="GreaterThan",e[e.GreaterThanOrEqual=2]="GreaterThanOrEqual",e[e.LessThan=3]="LessThan",e[e.LessThanOrEqual=4]="LessThanOrEqual"}(e.QueryComparisonKind||(e.QueryComparisonKind={}));e.QueryComparisonKind;!function(e){e[e.None=0]="None",e[e.Number=1]="Number",e[e.Integer=3]="Integer",e[e.DateTime=4]="DateTime",e[e.Time=8]="Time",e[e.Date=20]="Date",e[e.Month=35]="Month",e[e.Year=67]="Year",e[e.YearAndMonth=128]="YearAndMonth",e[e.MonthAndDay=256]="MonthAndDay",e[e.Decade=515]="Decade",e[e.YearAndWeek=1024]="YearAndWeek",e[e.String=2048]="String",e[e.Boolean=4096]="Boolean",e[e.Table=8192]="Table",e[e.Range=16384]="Range"}(e.SemanticType||(e.SemanticType={}));e.SemanticType;!function(e){e[e.Default=0]="Default",e[e.Period=1]="Period"}(e.FilterKind||(e.FilterKind={}));e.FilterKind}(t=e.data||(e.data={}))}(r||(r={}))},76:function(e,t){var r,i=window.jsCommon,r=window.powerbi;window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){var r,n=e.Prototype.inherit,o=e.Prototype.inheritSingle,a=i.ArrayExtensions,u=i.EnumExtensions;!function(r){function i(e){var r=e.prototype,i=e.objectDescriptors,n=e.transforms,o=e.colorAllocatorFactory;if(!r)return c(i,n,o);if(!n)return[r];var a=t.DataViewTransformContext.create(r.metadata,i,e.dataViewMappings,e.dataRoles,n,o);r=t.DataViewPivotCategoricalToPrimaryGroups.unpivotResult(r,a.selectTransforms,a.roleKindByQueryRef,a.queryProjectionsByRole,a.applicableRoleMappings);var u=s(r,a);return u=t.DataViewRegression.run({visualDataViews:u,dataRoles:a.dataRoles,objectDescriptors:i,objectDefinitions:n.objects,colorAllocatorFactory:o,transformSelects:n.selects,applicableDataViewMappings:a.applicableRoleMappings,roleKindByQueryRef:a.roleKindByQueryRef,queryProjectionsByRole:a.queryProjectionsByRole})}function s(e,t){var r=[],i=t.transforms.splits;if(_.isEmpty(i))r.push(l(e,t));else for(var n=0,o=i;n<o.length;n++){var a=o[n],u=l(e,t,a.selects);r.push(u)}return r}function c(e,t,r){if(t&&t.objects){var i={metadata:{columns:[]}};return C(i,0,e,t.objects,t.selects,r),[i]}return[]}function l(e,r,i){var o=r.visualCapabilitiesDataViewKinds,a=r.visualCapabilitiesRoleMappings,u=r.selectTransforms,s=r.objectDescriptors,c=r.projectionOrdering,l=n(e);return l.metadata=n(e.metadata),l=p(l,o,a,u,c),C(l,r.visualCapabilitiesDataViewKinds,s,r.transforms.objects,u,r.colorAllocatorFactory),l=t.DataViewCategoricalProjectionOrder.apply(l,r.applicableRoleMappings,c,i),l=t.DataViewConcatenateCategoricalColumns.detectAndApply(l,r.objectDescriptors,r.applicableRoleMappings,r.projectionOrdering,r.projectionActiveItems),t.DataViewNormalizeValues.apply({dataview:l,dataViewMappings:a,dataRoles:r.dataRoles}),l}function p(e,r,i,n,o){var a=[];if(n&&(e.metadata.columns=f(e.metadata.columns,n,a),v(e,n)),e.categorical&&u.hasFlag(r,1)&&(e.categorical=y(e.categorical,a),e=oe(e,i)),e.matrix&&u.hasFlag(r,2)){var s={rowHierarchyRewritten:!1,columnHierarchyRewritten:!1,hierarchyTreesRewritten:!1};e.matrix=b(e.matrix,a,i,o,s),ue(e.matrix,i)&&t.DataViewPivotMatrix.apply(e.matrix,s)}return e.table&&u.hasFlag(r,8)&&(e.table=w(e.table,a,o)),e}function f(e,t,r){if(!t)return e;for(var i=n(e),o=0,a=e.length;a>o;o++){var u=e[o],s=t[u.index];if(s){var c=i[o]=d(u,s);r.push({from:u,to:c})}}return i}function d(e,t){var r=n(e);return t.roles&&(r.roles=t.roles),t.type&&(r.type=t.type),r.format=g(t,r),t.displayName&&(r.displayName=t.displayName),t.queryName&&(r.queryName=t.queryName),t.expr&&(r.expr=t.expr),t.kpi&&(r.kpi=t.kpi),t.sort&&(r.sort=t.sort),t.discourageAggregationAcrossGroups&&(r.discourageAggregationAcrossGroups=t.discourageAggregationAcrossGroups),r}function v(r,i){if(i)for(var n,o=r.metadata.columns,a=0,u=i.length;u>a;a++){var s=i[a],c=s&&s.aggregateSources;if(c){n||(n=t.createStaticEvalContext(t.createColorAllocatorCache(),r,i));var l=h(o,a,s),p=l.aggregates={},f=e.ValueType.fromDescriptor(l.type),d=m(n,i,f,c.min);void 0!==d&&(p.min=d),d=m(n,i,f,c.max),void 0!==d&&(p.max=d)}}}function h(e,t,r){for(var i=0,n=e;i<n.length;i++){var o=n[i];if(o.index===t&&void 0===o.groupName)return o}var a=d({displayName:r.displayName},r);return e.push(a),a}function m(e,r,i,n){var o=r[n.index];return o?t.DataViewObjectEvaluator.evaluateValue(e,o.expr,i):void 0}function g(e,t){return e.format||t.format}function y(r,i){function a(e){var t=E(e.source,i);if(t){var r=n(e);return r.source=t,r}}var u=n(r),s=e.Prototype.overrideArray(r.categories,a);if(s&&(u.categories=s),r.values){var c=e.Prototype.overrideArray(r.values,a)||o(r.values);if(u.values=c,c.source){var l=E(c.source,i);l&&(c.source=l)}}return t.DataViewCategoricalEvalGrouped.apply(u),u}function w(t,r,i){var o=n(t),a=function(e){return E(e,r)},u=e.Prototype.overrideArray(t.columns,a);if(u&&(o.columns=u),!i)return o;var s=x(i,r);if(!s)return o;for(var c=u.slice(0),l=Object.keys(s),p=0,f=l.length;f>p;p++){var d=c[s[l[p]]];p===u.length?u.push(d):u[p]=d}var v=e.Prototype.overrideArray(o.rows,function(e){for(var t=[],r=0,i=l.length;i>r;++r)t[r]=e[s[l[r]]];return t});return v&&(o.rows=v),o}function x(e,t){var r=Object.keys(e);if(1===r.length){var i=r[0],n=_.map(t,function(e){return e.from.index}),o=e[i];return S(n,o)}}function b(r,i,o,a,u){function s(e){return E(e,i)}function c(t){var r=null,i=e.Prototype.overrideArray(t.levels,function(t){var r=null,i=e.Prototype.overrideArray(t.sources,s);return i&&(r=D(r,t,function(e){return e.sources=i})),r});return i&&(r=D(r,t,function(e){return e.levels=i})),r}var l=_.find(o,function(e){return!!e.matrix}),p=l.matrix,f=n(r),d=c(f.rows);d&&(f.rows=d,u.rowHierarchyRewritten=!0);var v=c(f.columns);v&&(f.columns=v,u.columnHierarchyRewritten=!0);var h=e.Prototype.overrideArray(f.valueSources,s);return h&&(f.valueSources=h),t.DataViewMatrixProjectionOrder.apply(f,p,a,u),f}function S(e,t){if(!a.sequenceEqual(e,t,function(e,t){return e===t})){for(var r={},i=0,n=t.length;n>i;++i){var o=t[i];r[i]=e.indexOf(o)}return r}}function E(e,t){for(var r=0,i=t.length;i>r;r++){var n=t[r];if(n.from===e)return n.to}}function D(e,t,r){return e||(e=n(t)),r&&r(e),e}function C(e,r,i,n,o,a){if(i){var u=t.DataViewObjectEvaluationUtils.groupObjectsBySelector(n);t.DataViewObjectEvaluationUtils.addImplicitObjects(u,i,e.metadata.columns,o);var s=u.metadataOnce,c=u.data;s&&V(e,o,i,s.objects,c,a);var l=u.metadata;if(l)for(var p=0,f=l.length;f>p;p++){var d=l[p],v=d.objects,h=A(e,o,v,a);X(e,o,i,d.selector,v,h)}for(var p=0,f=c.length;f>p;p++){var m=c[p],v=m.objects,h=A(e,o,v,a);j(e,r,o,i,m.selector,m.rules,v,h)}var g=u.userDefined;g&&T(e,o,i,g,a)}}function T(e,r,i,n,o){var a=e.metadata.objects;a||(a=e.metadata.objects={});for(var u=0,s=n;u<s.length;u++){var c=s[u],l=c.selector.id,p=A(e,r,c.objects,o),f=t.createStaticEvalContext(p,e,r),d=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(f,i,c.objects);for(var v in d){var h=d[v],m=a[v];m||(m=a[v]=[]),m.push({id:l,object:h})}}}function V(e,r,i,n,o,a){var u=A(e,r,n,a),s=t.createStaticEvalContext(u,e,r),c=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(s,i,n);if(c){e.metadata.objects=c;for(var l in c){var p=c[l],f=i[l];for(var d in p){var v=f.properties[d],h=v.rule;if(h){var m=M(e,a,h,l,p[d],v.type);_.isEmpty(m)||o.push.apply(o,m)}}}}}function M(e,t,r,i,n,o){var a=r.output;if(a){var u=$(e,a.selector);if(!_.isEmpty(u))return o.fillRule?R(e,t,r,u,i,n):void 0}}function R(e,r,i,n,o,a){var u=F(e,r,i.inputRole,1,a);if(u){var s=new t.ColorRuleEvaluation(i.inputRole,u),c={};c[i.output.property]={solid:{color:s}};for(var l=[],p=0,f=n.length;f>p;p++)l.push({selector:n[p],rules:[s],objects:[{name:o,properties:c}]});return l}}function F(e,t,r,i,n){return n.linearGradient2?P(e,t,r,i,n,n.linearGradient2):n.linearGradient3?I(e,t,r,i,n,n.linearGradient3):void 0}function P(e,t,r,i,n,o){if(o=n.linearGradient2,void 0===o.min.value||void 0===o.max.value){var a=te(e,r,i);if(!a)return;void 0===o.min.value&&(o.min.value=a.min),void 0===o.max.value&&(o.max.value=a.max)}return t.linearGradient2(n.linearGradient2)}function I(e,t,r,i,n,o){var a;if(o=n.linearGradient3,void 0===o.min.value||void 0===o.mid.value||void 0===o.max.value){var u=te(e,r,i);if(!u)return;if(a=void 0===o.min.value&&void 0===o.max.value&&void 0!==o.mid.value,void 0===o.min.value&&(o.min.value=u.min),void 0===o.max.value&&(o.max.value=u.max),void 0===o.mid.value){var s=(o.max.value+o.min.value)/2;o.mid.value=s}}return t.linearGradient3(n.linearGradient3,a)}function A(e,r,i,n){for(var o=t.createColorAllocatorCache(),a=t.createStaticEvalContext(),u=0,s=i.length;s>u;u++){var c=i[u].properties;for(var l in c){var p=c[l];if(p&&p.solid&&p.solid.color&&23===p.solid.color.kind){var f=p.solid.color,d=ee(r,f.input);if(!d)continue;var v=t.DataViewObjectEvaluator.evaluateProperty(a,pe,f.rule),h=F(e,n,d,0,v);h&&o.register(f,h)}}}return o}function j(e,r,i,n,o,a,s,c){var l=t.Selector.containsWildcard(o),p=e.categorical;if(p&&u.hasFlag(r,1)){var f=O(p,o);H(p,i,n,f,a,l,s,c),B(p,i,n,f,a,l,s,c)}var d=e.matrix;if(d&&u.hasFlag(r,2)){var v=G(d,n,o,a,l,s,c);v&&(e.matrix=v)}var h=e.table;if(h&&u.hasFlag(r,8)){var f=N(h,o),m=Y(h,i,n,f,a,l,s,c);m&&(e.table=m)}}function N(e,r){return t.Selector.hasRoleWildcard(r)&&(r=Q(r,function(t){return U(t,e)})),r}function O(e,r){return t.Selector.hasRoleWildcard(r)&&(r=Q(r,function(t){return q(t,e)})),r}function Q(e,r){for(var i={data:[],id:e.id,metadata:e.metadata},n=0,o=e.data;n<o.length;n++){var a=o[n];if(t.Selector.isRoleWildcard(a)){var u=r(a.roles);if(!_.isEmpty(u)){i.data.push(t.DataViewScopeWildcard.fromExprs(u));continue}}L(i.data,a)&&i.data.push(a)}return i}function U(e,t){var r=k(t.columns,e),i=t.identityFields;return r&&i?i:void 0}function q(e,t){if(t.categories)for(var r=0,i=t.categories;r<i.length;r++){var n=i[r];if(n.source&&k([n.source],e))return n.identityFields}}function L(e,t){return _.isEmpty(e)?!0:!_.any(e,function(e){return e.key===t.key})}function k(e,t){for(var r=0,i=e;r<i.length;r++){var n=i[r],o=n.roles;if(!o||!_.any(t,function(e){return o[e]}))return!1}return!0}function H(e,r,i,n,o,a,u,s){if(e.categories&&0!==e.categories.length){var c=Z(e,n);if(c){var l,p=c.identities,f=t.createCategoricalEvalContext(s,e,r);if(p){for(var d=0,v=p.length;v>d;d++){var h=p[d];if(a||t.Selector.matchesData(n,[h])){f.setCurrentRowIndex(d);var m=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(f,i,u);if(m&&(c.column.objects||(c.column.objects=[],c.column.objects.length=v),c.column.objects[d]=m),!a)return!0;l=!0}}return l}}}}function B(r,i,n,o,a,u,s,c){var l=r.values;if(l&&l.identityFields&&t.Selector.matchesKeys(o,[l.identityFields])){var p=l.grouped();if(p){for(var f,d=t.createCategoricalEvalContext(c,r,i),v=0,h=p.length;h>v;v++){var m=p[v],g=o.metadata,y=m.values;if(u||t.Selector.matchesData(o,[m.identity])){var w=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(d,n,s);if(w)if(g)for(var x=0,b=y.length;b>x;x++){var S=y[x],E=S.source;if(E.queryName===g){var D=e.Prototype.inherit(E);D.objects=w,S.source=D,f=!0;break}}else m.objects=w,ie(l,p),f=!0;if(!u)return!0}}return f}}}function G(e,r,i,n,a,u,s){var c=t.createMatrixEvalContext(s,e),l=W(c,e.rows,r,i,n,a,u),p=W(c,e.columns,r,i,n,a,u);if(l||p){var f=o(e);return l&&(f.rows=l),p&&(f.columns=p),f}}function W(e,t,r,i,n,a,u){if(t){var s=t.root;if(s){var c=J(e,s,r,i,n,a,u);if(c){var l=o(t);return l.root=c,l}}}}function J(e,r,i,n,a,u,s){var c=r.children;if(c){var l,p,f=r.childIdentityFields;f&&(p=t.Selector.matchesKeys(n,[f]));for(var d=0,v=c.length;v>d;d++){var h=c[d],m=h.identity,g=null;if(p){if(u||t.Selector.matchesData(n,[m])){var y=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(e,i,s);y&&(g=o(h),g.objects=y)}}else g=J(e,h,i,n,a,u,s);if(g&&(l||(l=K(r)),l.children[d]=g,!u))break}return l}}function K(e){if(Object.getPrototypeOf(e)!==Object.prototype)return e;var t=o(e);return t.children=n(e.children),t}function Y(e,r,i,n,a,u,s,c){var l=t.createTableEvalContext(c,e,r),p=z(l,e.columns,e.rows,e.identity,e.identityFields,i,n,a,u,s);if(p){var f=o(e);return f.rows=p,f}}function z(e,r,i,n,a,u,s,c,l,p){if(!_.isEmpty(n)&&!_.isEmpty(a)&&s.metadata&&t.Selector.matchesKeys(s,[a])){var f=_.findIndex(r,function(e){return e.queryName===s.metadata});if(!(0>f)){for(var d,v=r.length,h=0,m=n.length;m>h;h++){var g=n[h];if(l||t.Selector.matchesData(s,[g])){e.setCurrentRowIndex(h);var y=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(e,u,p);if(y){d||(d=o(i));var w=d[h]=o(d[h]),x=w.objects;x||(w.objects=x=new Array(v)),x[f]=y}if(!l)break;
}}return d}}}function X(e,r,i,n,o,a){for(var u=e.metadata.columns,s=n.metadata,c=t.createStaticEvalContext(a,e,r),l=0,p=u.length;p>l;l++){var f=u[l];if(f.queryName===s){var d=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(c,i,o);d&&(f.objects=d)}}}function Z(e,r){var i=e.categories[0];if(i.identityFields&&t.Selector.matchesKeys(r,[i.identityFields])){var n=i.identity,o=i,a=r.metadata;if(a){var u=e.values;if(u)for(var s=0,c=u.length;c>s;s++){var l=u[s];if(l.source.queryName===a){o=l;break}}}return{column:o,identities:n}}}function $(e,r){var i=e.categorical;if(i){var n=i.categories;if(n){for(var o,a=[],u=0,s=n.length;s>u;u++){var c=n[u],l=c.identityFields;if(o=c.source.roles,o&&l){var p=_.any(r,function(e){return o[e]});p&&a.push({data:[t.DataViewScopeWildcard.fromExprs(l)]})}}return a}}}function ee(e,r){if(t.SQExpr.isSelectRef(r))return r.expressionName;if(e)for(var i=0,n=e.length;n>i;i++){var o=e[i],a=o.expr;if(a&&t.SQExpr.equals(r,o.expr))return o.queryName}}function te(e,t,r){for(var i=e.metadata.columns,n=0,o=i.length;o>n;n++){var a=i[n];if(1===r){var u=a.roles;if(!u||!u[t])continue}else if(a.queryName!==t)continue;var s=a.aggregates;if(s){var c=s.min;if(void 0===c&&(c=s.minLocal),void 0!==c){var l=s.max;if(void 0===l&&(l=s.maxLocal),void 0!==l)return{min:c,max:l}}}}}function re(e,t,r){void 0===e&&(e=[]);var i=e;return ie(e),t&&(i.identityFields=t),r&&(i.source=r),i}function ie(e,t){e.grouped=t?function(){return t}:function(){return ne(e)}}function ne(e){for(var t,r=[],i=0,n=e.length;n>i;i++){var o=e[i];if(!t||t.identity!==o.identity){if(t={values:[]},o.identity){t.identity=o.identity;var a=o.source;void 0!==a.groupName?t.name=a.groupName:a.displayName&&(t.name=a.displayName)}r.push(t)}t.values.push(o)}return r}function oe(e,r){var i;switch(ae(e.categorical,r)){case 1:i=t.DataViewPivotCategorical.apply(e);break;case 2:i=t.DataViewSelfCrossJoin.apply(e)}return i||e}function ae(e,t){if(e&&!_.isEmpty(t)){var r=e.categories;if(r&&1===r.length){var i=e.values;if(!_.isEmpty(i)&&!i.grouped().some(function(e){return!!e.identity}))for(var n=r[0].source.roles,o=0,a=t.length;a>o;o++){var u=t[o].categorical;if(u&&le(n,u.values)){var s=u.categories,c=se(n,s)||ce(n,s);return c?2:1}}}}}function ue(e,t){if(e&&!_.isEmpty(t)){var r=e.rows.levels;if(!(r.length<1)){var i=e.rows.root.children;if(i&&0!==i.length)for(var n=r[0].sources[0].roles,o=0,a=t.length;a>o;o++){var u=t[o].matrix;if(u&&!ce(n,u.rows)&&ce(n,u.columns))return!0}}}}function se(e,t){return e&&t&&t.bind?e[t.bind.to]:void 0}function ce(e,t){return e&&t&&t["for"]?e[t["for"]["in"]]:void 0}function le(e,t){return e&&t&&t.group?e[t.group.by]:void 0}var pe={type:{fillRule:{}}};r.apply=i,r.transformObjects=C,r.createValueColumns=re,r.setGrouped=ie}(r=t.DataViewTransform||(t.DataViewTransform={}))}(t=e.data||(e.data={}))}(r||(r={}))},77:function(e,t){var r,i=window.jsCommon,r=window.powerbi;window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){function i(e,t,i){return e=e||null,t=t||null,e===t?!0:!e!=!t?!1:r.SQExpr.equals(e.expr,t.expr,i)}function n(e,t){if(!_.isEmpty(e)){for(var r=[],i=0,n=e;i<n.length;i++){var a=n[i];r.push(a.expr)}return o(r,t)}}function o(t,i){if(!_.isEmpty(t)){for(var n,o=0,a=t;o<a.length;o++){var u=a[o],s=r.ScopeIdentityExtractor.getInExpr(u);n=n?r.SQExprBuilder.or(n,s):s||u}return n&&i&&(n=e.data.SQExprBuilder.not(n)),e.data.SemanticFilter.fromSQExpr(n)}}t.equals=i,t.filterFromIdentity=n,t.filterFromExprs=o}(t=e.DataViewScopeIdentity||(e.DataViewScopeIdentity={}));var r;!function(e){function t(e){return new n(e)}var r=i.Lazy;e.createDataViewScopeIdentity=t;var n=function(){function t(t){this._expr=t,this._key=new r(function(){return e.SQExprShortSerializer.serialize(t)})}return Object.defineProperty(t.prototype,"expr",{get:function(){return this._expr},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this._key.getValue()},enumerable:!0,configurable:!0}),t}()}(r=e.data||(e.data={}))}(r||(r={}))},78:function(e,t){var r,i=window.jsCommon,r=window.powerbi;window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){var t;!function(e){function t(e){return e+"M"}function r(e){return e+"D"}function n(e){return e+"L"}function o(e){var t=new Date(e.getTime()-6e4*e.getTimezoneOffset()),r=t.toISOString();return i.StringExtensions.endsWith(r,"Z")&&(r=r.substr(0,r.length-1)),"datetime'"+r+"'"}function a(e){return"'"+e.replace(c,"''")+"'"}function u(){return"null"}function s(e){return e?"true":"false"}var c=/'/g;e.decimal=t,e["double"]=r,e.integer=n,e.dateTime=o,e.text=a,e.nullEncoding=u,e["boolean"]=s}(t=e.PrimitiveValueEncoding||(e.PrimitiveValueEncoding={}))}(t=e.data||(e.data={}))}(r||(r={}))},79:function(e,t){var r,i=window.jsCommon,r=window.powerbi;window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){var t=i.ArrayExtensions,r=function(){function r(){}return r.prototype.visitColumnRef=function(t){var r=t.source,i=r.accept(this);return r===i?t:new e.SQColumnRefExpr(i,t.ref)},r.prototype.visitMeasureRef=function(t){var r=t.source,i=r.accept(this);return r===i?t:new e.SQMeasureRefExpr(i,t.ref)},r.prototype.visitAggr=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQAggregationExpr(i,t.func)},r.prototype.visitSelectRef=function(e){return e},r.prototype.visitPercentile=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQPercentileExpr(i,t.k,t.exclusive)},r.prototype.visitHierarchy=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQHierarchyExpr(i,t.hierarchy)},r.prototype.visitHierarchyLevel=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQHierarchyLevelExpr(i,t.level)},r.prototype.visitPropertyVariationSource=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQPropertyVariationSourceExpr(i,t.name,t.property)},r.prototype.visitEntity=function(e){return e},r.prototype.visitAnd=function(t){var r=t.left,i=r.accept(this),n=t.right,o=n.accept(this);return r===i&&n===o?t:new e.SQAndExpr(i,o)},r.prototype.visitBetween=function(t){var r=t.arg,i=r.accept(this),n=t.lower,o=n.accept(this),a=t.upper,u=a.accept(this);return r===i&&n===o&&a===u?t:new e.SQBetweenExpr(i,o,u)},r.prototype.visitIn=function(r){for(var i,n=r.args,o=this.rewriteAll(n),a=r.values,u=0,s=a.length;s>u;u++){var c=a[u],l=this.rewriteAll(c);c===l||i||(i=t.take(a,u)),i&&i.push(l)}return n!==o||i?new e.SQInExpr(o,i||a):r},r.prototype.rewriteAll=function(e){for(var r,i=0,n=e.length;n>i;i++){var o=e[i],a=o.accept(this);o===a||r||(r=t.take(e,i)),r&&r.push(a)}return r||e},r.prototype.visitOr=function(t){var r=t.left,i=r.accept(this),n=t.right,o=n.accept(this);return r===i&&n===o?t:new e.SQOrExpr(i,o)},r.prototype.visitCompare=function(t){var r=t.left,i=r.accept(this),n=t.right,o=n.accept(this);return r===i&&n===o?t:new e.SQCompareExpr(t.comparison,i,o)},r.prototype.visitContains=function(t){var r=t.left,i=r.accept(this),n=t.right,o=n.accept(this);return r===i&&n===o?t:new e.SQContainsExpr(i,o)},r.prototype.visitExists=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQExistsExpr(i)},r.prototype.visitNot=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQNotExpr(i)},r.prototype.visitStartsWith=function(t){var r=t.left,i=r.accept(this),n=t.right,o=n.accept(this);return r===i&&n===o?t:new e.SQStartsWithExpr(i,o)},r.prototype.visitConstant=function(e){return e},r.prototype.visitDateSpan=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQDateSpanExpr(t.unit,i)},r.prototype.visitDateAdd=function(t){var r=t.arg,i=r.accept(this);return r===i?t:new e.SQDateAddExpr(t.unit,t.amount,i)},r.prototype.visitNow=function(e){return e},r.prototype.visitDefaultValue=function(e){return e},r.prototype.visitAnyValue=function(e){return e},r.prototype.visitArithmetic=function(t){var r=t.left,i=r.accept(this),n=t.right,o=n.accept(this);return r===i&&n===o?t:new e.SQArithmeticExpr(i,o,t.operator)},r.prototype.visitScopedEval=function(t){var r=t.expression,i=r.accept(this),n=t.scope,o=this.rewriteAll(n);return r===i&&n===o?t:new e.SQScopedEvalExpr(i,o)},r.prototype.visitWithRef=function(e){return e},r.prototype.visitTransformTableRef=function(e){return e},r.prototype.visitTransformOutputRoleRef=function(e){return e},r.prototype.visitFillRule=function(t){var r=t.input,i=r.accept(this),n=t.rule,o=n.linearGradient2,a=o;o&&(a=this.visitLinearGradient2(o));var u=n.linearGradient3,s=u;if(u&&(s=this.visitLinearGradient3(u)),r!==i||o!==a||u!==s){var c={};return a&&(c.linearGradient2=a),s&&(c.linearGradient3=s),new e.SQFillRuleExpr(i,c)}return t},r.prototype.visitLinearGradient2=function(e){var t=e.min,r=this.visitFillRuleStop(t),i=e.max,n=this.visitFillRuleStop(i);return t!==r||i!==n?{min:r,max:n}:e},r.prototype.visitLinearGradient3=function(e){var t=e.min,r=this.visitFillRuleStop(t),i=e.mid,n=this.visitFillRuleStop(i),o=e.max,a=this.visitFillRuleStop(o);return t!==r||i!==n||o!==a?{min:r,mid:n,max:a}:e},r.prototype.visitFillRuleStop=function(e){var t=e.color,r=e.color.accept(this),i=e.value,n=i;if(i&&(n=i.accept(this)),t!==r||i!==n){var o={color:r};return n&&(o.value=n),o}return e},r.prototype.visitResourcePackageItem=function(e){return e},r}();e.SQExprRewriter=r}(t=e.data||(e.data={}))}(r||(r={}))},80:function(e,t){var r,i=window.jsCommon,r=window.powerbi,n=(window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft,this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});!function(e){var t;!function(t){function r(e){return e.integer||e.numeric?t.QueryAggregateFunction.Sum:t.QueryAggregateFunction.Count}function o(e){switch(e){case 6:return t.QueryAggregateFunction.Avg;case 3:return t.QueryAggregateFunction.CountNonNull;case 7:return t.QueryAggregateFunction.Count;case 5:return t.QueryAggregateFunction.Max;case 4:return t.QueryAggregateFunction.Min;case 2:return t.QueryAggregateFunction.Sum;default:return}}var a=i.StringExtensions,u=function(){function i(e){this._kind=e}return i.equals=function(e,t,r){return H.run(e,t,r)},i.prototype.validate=function(e,t,r){var i=new G(e,t,r);return this.accept(i),i.errors},i.prototype.accept=function(e,t){},Object.defineProperty(i.prototype,"kind",{get:function(){return this._kind},enumerable:!0,configurable:!0}),i.isArithmetic=function(e){return 22===e.kind},i.isColumn=function(e){return 1===e.kind},i.isConstant=function(e){return 16===e.kind},i.isEntity=function(e){return 0===e.kind},i.isHierarchy=function(e){return 5===e.kind},i.isHierarchyLevel=function(e){return 6===e.kind},i.isAggregation=function(e){return 3===e.kind},i.isMinAggregation=function(e){return i.isAggregation(e)&&e.func===t.QueryAggregateFunction.Min},i.isMaxAggregation=function(e){return i.isAggregation(e)&&e.func===t.QueryAggregateFunction.Max},i.isAvgAggregation=function(e){return i.isAggregation(e)&&e.func===t.QueryAggregateFunction.Avg},i.isMedianAggregation=function(e){return i.isAggregation(e)&&e.func===t.QueryAggregateFunction.Median},i.isMeasure=function(e){return 2===e.kind},i.isPercentile=function(e){return 27===e.kind},i.isSelectRef=function(e){return 28===e.kind},i.isScopedEval=function(e){return 25===e.kind},i.isWithRef=function(e){return 26===e.kind},i.isTransformTableRef=function(e){return 29===e.kind},i.isTransformOutputRoleRef=function(e){return 30===e.kind},i.isResourcePackageItem=function(e){return 24===e.kind},i.prototype.getMetadata=function(e){var r=t.SQExprConverter.asFieldPattern(this);if(r)return r.column||r.columnAggr||r.measure?this.getMetadataForProperty(r,e):r.hierarchyLevel||r.hierarchyLevelAggr?this.getMetadataForHierarchyLevel(r,e):r.columnHierarchyLevelVariation?this.getMetadataForVariation(r,e):r.percentOfGrandTotal?this.getMetadataForPercentOfGrandTotal():i.getMetadataForEntity(r,e)},i.prototype.getDefaultAggregate=function(e,i){void 0===i&&(i=!1);var n=this.getConceptualProperty(e)||this.getHierarchyLevelConceptualProperty(e);if(n){var a;if(n&&0===n.kind){var u=n.column?n.column.defaultAggregate:null;(n.type.integer||n.type.numeric)&&1!==u&&(a=o(u),void 0===a&&(a=r(n.type))),void 0===a&&i&&(a=t.QueryAggregateFunction.CountNonNull)}return a}},i.prototype.getKeyColumns=function(e){var t=J.getColumnRefSQExpr(e,this);if(t){var r=[],i=this.getPropertyKeys(e);if(i&&i.length>0)for(var n=0,o=i.length;o>n;n++)r.push(L.columnRef(t.source,i[n].name));else r.push(t);return r}},i.prototype.hasGroupOnKeys=function(e){var t=J.getColumnRefSQExpr(e,this);if(t){var r=this.getPropertyKeys(e);if(!r||r.length<1)return!1;if(r.length>1)return!0;var n=L.columnRef(t.source,r[0].name);return!i.equals(n,this)}},i.prototype.getPropertyKeys=function(e){var t=this.getConceptualProperty(e)||this.getHierarchyLevelConceptualProperty(e);if(t)return t.column?t.column.keys:void 0},i.prototype.getConceptualProperty=function(e){var r=t.SQExprConverter.asFieldPattern(this);if(r){var i=t.FieldExprPattern.toFieldExprEntityItemPattern(r),n=t.FieldExprPattern.getPropertyName(r);return n?e.schema(i.schema).findProperty(i.entity,n):void 0}},i.prototype.getTargetEntityForVariation=function(e,t){var r=this.getConceptualProperty(e);if(r&&r.column&&!_.isEmpty(r.column.variations))for(var i=r.column.variations,n=0,o=i;n<o.length;n++){var a=o[n];if(a.name===t)return a.navigationProperty.targetEntity.name}},i.prototype.getTargetEntity=function(e){return K.getEntityExpr(e,this)},i.prototype.getHierarchyLevelConceptualProperty=function(e){var r=t.SQExprConverter.asFieldPattern(this);if(r){var i=r.hierarchyLevel||r.hierarchyLevelAggr;if(i){var n=t.FieldExprPattern.toFieldExprEntityItemPattern(r),o=e.schema(n.schema).findHierarchy(n.entity,i.name);if(o){var a=o.levels.withName(i.level);if(a)return a.column}}}},i.prototype.getMetadataForVariation=function(e,r){var i=e.columnHierarchyLevelVariation,n=t.FieldExprPattern.toFieldExprEntityItemPattern(e),o=r.schema(n.schema).findProperty(n.entity,i.source.name);if(o&&o.column&&o.column.variations)for(var a=0,u=o.column.variations;a<u.length;a++){var s=u[a];if(s.defaultHierarchy&&s.defaultHierarchy.levels)for(var c=0,l=s.defaultHierarchy.levels;c<l.length;c++){var p=l[c];if(p.name===i.level.level){var f=p.column;return{kind:1===f.kind?1:0,type:f.type,format:f.format,idOnEntityKey:f.column?f.column.idOnEntityKey:!1,defaultAggregate:f.column?f.column.defaultAggregate:null}}}}},i.prototype.getMetadataForHierarchyLevel=function(e,t){var r=this.getHierarchyLevelConceptualProperty(t);if(r)return this.getPropertyMetadata(e,r)},i.prototype.getMetadataForPercentOfGrandTotal=function(){return{kind:1,format:"#,##0.00%",type:e.ValueType.fromExtendedType(e.ExtendedType.Double)}},i.prototype.getPropertyMetadata=function(r,i){var n=i.format,o=i.type,a=r.columnAggr||r.hierarchyLevelAggr;if(a)switch(a.aggregate){case t.QueryAggregateFunction.Count:case t.QueryAggregateFunction.CountNonNull:o=e.ValueType.fromExtendedType(e.ExtendedType.Integer),n=void 0;break;case t.QueryAggregateFunction.Avg:o.integer&&(o=e.ValueType.fromExtendedType(e.ExtendedType.Double))}return{kind:1===i.kind||a&&void 0!==a.aggregate?1:0,type:o,format:n,idOnEntityKey:i.column?i.column.idOnEntityKey:!1,aggregate:a?a.aggregate:void 0,defaultAggregate:i.column?i.column.defaultAggregate:null}},i.prototype.getMetadataForProperty=function(e,t){var r=this.getConceptualProperty(t);if(r)return this.getPropertyMetadata(e,r)},i.getMetadataForEntity=function(r,i){var n=t.FieldExprPattern.toFieldExprEntityItemPattern(r),o=i.schema(n.schema).entities.withName(n.entity);if(o&&r.entityAggr)switch(r.entityAggr.aggregate){case t.QueryAggregateFunction.Count:case t.QueryAggregateFunction.CountNonNull:return{kind:1,type:e.ValueType.fromExtendedType(e.ExtendedType.Integer),format:void 0,idOnEntityKey:!1,aggregate:r.entityAggr.aggregate}}},i}();t.SQExpr=u,t.defaultAggregateForDataType=r,t.defaultAggregateToQueryAggregateFunction=o;var s=function(e){function t(t,r,i){e.call(this,0),this.schema=t,this.entity=r,i&&(this.variable=i)}return n(t,e),t.prototype.accept=function(e,t){return e.visitEntity(this,t)},t}(u);t.SQEntityExpr=s;var c=function(e){function t(t,r,i){e.call(this,22),this.left=t,this.right=r,this.operator=i}return n(t,e),t.prototype.accept=function(e,t){return e.visitArithmetic(this,t)},t}(u);t.SQArithmeticExpr=c;var l=function(e){function t(t,r){e.call(this,25),this.expression=t,this.scope=r}return n(t,e),t.prototype.accept=function(e,t){return e.visitScopedEval(this,t)},t.prototype.getMetadata=function(e){return this.expression.getMetadata(e)},t}(u);t.SQScopedEvalExpr=l;var p=function(e){function t(t){e.call(this,26),this.expressionName=t}return n(t,e),t.prototype.accept=function(e,t){return e.visitWithRef(this,t)},t}(u);t.SQWithRefExpr=p;var f=function(e){function t(t,r,i){e.call(this,t),this.source=r,this.ref=i}return n(t,e),t}(u);t.SQPropRefExpr=f;var d=function(e){function t(t,r){e.call(this,1,t,r)}return n(t,e),t.prototype.accept=function(e,t){return e.visitColumnRef(this,t)},t}(f);t.SQColumnRefExpr=d;var v=function(e){function t(t,r){e.call(this,2,t,r)}return n(t,e),t.prototype.accept=function(e,t){return e.visitMeasureRef(this,t)},t}(f);t.SQMeasureRefExpr=v;var h=function(e){function t(t,r){e.call(this,3),this.arg=t,this.func=r}return n(t,e),t.prototype.accept=function(e,t){return e.visitAggr(this,t)},t}(u);t.SQAggregationExpr=h;var m=function(e){function t(t,r,i){e.call(this,27),this.arg=t,this.k=r,this.exclusive=i}return n(t,e),t.prototype.getMetadata=function(e){var t=this.arg.getMetadata(e);return t?{kind:1,type:t.type}:void 0},t.prototype.accept=function(e,t){return e.visitPercentile(this,t)},t}(u);t.SQPercentileExpr=m;var g=function(e){function t(t,r,i){e.call(this,4),this.arg=t,this.name=r,this.property=i}return n(t,e),t.prototype.accept=function(e,t){return e.visitPropertyVariationSource(this,t)},t}(u);t.SQPropertyVariationSourceExpr=g;var y=function(e){function t(t,r){e.call(this,5),this.arg=t,this.hierarchy=r}return n(t,e),t.prototype.accept=function(e,t){return e.visitHierarchy(this,t)},t}(u);t.SQHierarchyExpr=y;var w=function(e){function t(t,r){e.call(this,6),this.arg=t,this.level=r}return n(t,e),t.prototype.accept=function(e,t){return e.visitHierarchyLevel(this,t)},t}(u);t.SQHierarchyLevelExpr=w;var x=function(e){function t(t){e.call(this,28),this.expressionName=t}return n(t,e),t.prototype.accept=function(e,t){return e.visitSelectRef(this,t)},t}(u);t.SQSelectRefExpr=x;var b=function(e){function t(t,r){e.call(this,7),this.left=t,this.right=r}return n(t,e),t.prototype.accept=function(e,t){return e.visitAnd(this,t)},t}(u);t.SQAndExpr=b;var S=function(e){function t(t,r,i){e.call(this,8),this.arg=t,this.lower=r,this.upper=i}return n(t,e),t.prototype.accept=function(e,t){return e.visitBetween(this,t)},t}(u);t.SQBetweenExpr=S;var E=function(e){function t(t,r){e.call(this,9),this.args=t,this.values=r}return n(t,e),t.prototype.accept=function(e,t){return e.visitIn(this,t)},t}(u);t.SQInExpr=E;var D=function(e){function t(t,r){e.call(this,10),this.left=t,this.right=r}return n(t,e),t.prototype.accept=function(e,t){return e.visitOr(this,t)},t}(u);t.SQOrExpr=D;var C=function(e){function t(t,r,i){e.call(this,12),this.comparison=t,this.left=r,this.right=i}return n(t,e),t.prototype.accept=function(e,t){return e.visitCompare(this,t)},t}(u);t.SQCompareExpr=C;var T=function(e){function t(t,r){e.call(this,11),this.left=t,this.right=r}return n(t,e),t.prototype.accept=function(e,t){return e.visitContains(this,t)},t}(u);t.SQContainsExpr=T;var V=function(e){function t(t,r){e.call(this,13),this.left=t,this.right=r}return n(t,e),t.prototype.accept=function(e,t){return e.visitStartsWith(this,t)},t}(u);t.SQStartsWithExpr=V;var M=function(e){function t(t){e.call(this,14),this.arg=t}return n(t,e),t.prototype.accept=function(e,t){return e.visitExists(this,t)},t}(u);t.SQExistsExpr=M;var R=function(e){function t(t){e.call(this,15),this.arg=t}return n(t,e),t.prototype.accept=function(e,t){return e.visitNot(this,t)},t}(u);t.SQNotExpr=R;var F=function(e){function t(t,r,i){e.call(this,16),this.type=t,this.value=r,this.valueEncoded=i}return n(t,e),t.prototype.accept=function(e,t){return e.visitConstant(this,t)},t.prototype.getMetadata=function(e){return{kind:1,type:this.type}},t}(u);t.SQConstantExpr=F;var P=function(e){function t(t,r){e.call(this,17),this.unit=t,this.arg=r}return n(t,e),t.prototype.accept=function(e,t){return e.visitDateSpan(this,t)},t}(u);t.SQDateSpanExpr=P;var I=function(e){function t(t,r,i){e.call(this,18),this.unit=t,this.arg=i,this.amount=r}return n(t,e),t.prototype.accept=function(e,t){return e.visitDateAdd(this,t)},t}(u);t.SQDateAddExpr=I;var A=function(e){function t(){e.call(this,19)}return n(t,e),t.prototype.accept=function(e,t){return e.visitNow(this,t)},t}(u);t.SQNowExpr=A;var j=function(e){function t(){e.call(this,21)}return n(t,e),t.prototype.accept=function(e,t){return e.visitDefaultValue(this,t)},t}(u);t.SQDefaultValueExpr=j;var N=function(e){function t(){e.call(this,20)}return n(t,e),t.prototype.accept=function(e,t){return e.visitAnyValue(this,t)},t}(u);t.SQAnyValueExpr=N;var O=function(e){function t(t,r){e.call(this,23),this.input=t,this.rule=r}return n(t,e),t.prototype.accept=function(e,t){return e.visitFillRule(this,t)},t}(u);t.SQFillRuleExpr=O;var Q=function(e){function t(t,r,i){e.call(this,24),this.packageName=t,this.packageType=r,this.itemName=i}return n(t,e),t.prototype.accept=function(e,t){return e.visitResourcePackageItem(this,t)},t}(u);t.SQResourcePackageItemExpr=Q;var U=function(e){function t(t){e.call(this,29),this.source=t}return n(t,e),t.prototype.accept=function(e,t){return e.visitTransformTableRef(this,t)},t}(u);t.SQTransformTableRefExpr=U;var q=function(e){function t(t,r){e.call(this,30),this.role=t,r&&(this.transform=r)}return n(t,e),t.prototype.accept=function(e,t){return e.visitTransformOutputRoleRef(this,t)},t}(u);t.SQTransformOutputRoleRefExpr=q;var L;!function(r){function i(e,t,r){return new s(e,t,r)}function n(e,t){return new d(e,t)}function o(e,t){return new v(e,t)}function a(e,t){return new h(e,t)}function f(e){return new x(e)}function L(e,t,r){return new m(e,t,r)}function k(e,t,r){return new c(e,t,r)}function H(e,t){return new l(e,t)}function B(e){return new p(e)}function G(e,t){return new y(e,t)}function W(e,t,r){return new g(e,t,r)}function J(e,t){return new w(e,t)}function K(e){return new U(e)}function Y(e,t){return new q(e,t)}function Z(e,t){return e?t?new b(e,t):e:t}function re(e,t,r){return new S(e,t,r)}function ie(e,t){return new E(e,t)}function ne(e,t){if(!e)return t;if(!t)return e;if(e instanceof E&&t instanceof E){var r=oe(e,t);if(r)return r}return new D(e,t)}function oe(e,t){if(e.args&&t.args){var i=e.args.length,n=t.args.length;if(i===n){for(var o=0;i>o;++o)if(!u.equals(e.args[o],t.args[o]))return;var a=e.values.concat(t.values);return r.inExpr(e.args,a)}}}function ae(e,t,r){return new C(e,t,r)}function ue(e,t){return new T(e,t)}function se(e){return new M(e)}function ce(e,r){return ae(t.QueryComparisonKind.Equal,e,r)}function le(e){return new R(e)}function pe(e,t){return new V(e,t)}function fe(){return new F(e.ValueType.fromExtendedType(e.ExtendedType.Null),null,t.PrimitiveValueEncoding.nullEncoding())}function de(){return new A}function ve(){return new j}function he(){return new N}function me(r){return new F(e.ValueType.fromExtendedType(e.ExtendedType.Boolean),r,t.PrimitiveValueEncoding["boolean"](r))}function ge(e,t,r){return new I(e,t,r)}function ye(r,i){return void 0===i&&(i=t.PrimitiveValueEncoding.dateTime(r)),new F(e.ValueType.fromExtendedType(e.ExtendedType.DateTime),r,i)}function we(e,t){return new P(e,t)}function xe(r,i){return void 0===i&&(i=t.PrimitiveValueEncoding.decimal(r)),new F(e.ValueType.fromExtendedType(e.ExtendedType.Decimal),r,i)}function be(r,i){return void 0===i&&(i=t.PrimitiveValueEncoding["double"](r)),new F(e.ValueType.fromExtendedType(e.ExtendedType.Double),r,i)}function Se(r,i){return void 0===i&&(i=t.PrimitiveValueEncoding.integer(r)),new F(e.ValueType.fromExtendedType(e.ExtendedType.Integer),r,i)}function Ee(r,i){return new F(e.ValueType.fromExtendedType(e.ExtendedType.Text),r,i||t.PrimitiveValueEncoding.text(r))}function De(t,r){return null==t?fe():_.isBoolean(t)?me(t):_.isString(t)?Ee(t):_.isNumber(t)?r.integer&&e.Double.isInteger(t)?Se(t):be(t):t instanceof Date?ye(t):void 0}function Ce(e,t){return z.rewrite(e,t)}function Te(e){return X.rewrite(e)}function Ve(e){return te.rewrite(e)}function Me(e){return ee.rewrite(e)}function Re(e){return $.rewrite(e)}function Fe(e,t){return new O(e,t)}function Pe(e,t,r){return new Q(e,t,r)}r.entity=i,r.columnRef=n,r.measureRef=o,r.aggregate=a,r.selectRef=f,r.percentile=L,r.arithmetic=k,r.scopedEval=H,r.withRef=B,r.hierarchy=G,r.propertyVariationSource=W,r.hierarchyLevel=J,r.transformTableRef=K,r.transformOutputRoleRef=Y,r.and=Z,r.between=re,r.inExpr=ie,r.or=ne,r.compare=ae,r.contains=ue,r.exists=se,r.equal=ce,r.not=le,r.startsWith=pe,r.nullConstant=fe,r.now=de,r.defaultValue=ve,r.anyValue=he,r["boolean"]=me,r.dateAdd=ge,r.dateTime=ye,r.dateSpan=we,r.decimal=xe,r["double"]=be,r.integer=Se,r.text=Ee,r.typedConstant=De,r.setAggregate=Ce,r.removeAggregate=Te,r.setPercentOfGrandTotal=Ve,r.removePercentOfGrandTotal=Me,r.removeEntityVariables=Re,r.fillRule=Fe,r.resourcePackageItem=Pe}(L=t.SQExprBuilder||(t.SQExprBuilder={}));var k;!function(e){function t(e){return W.getAggregate(e)}e.getAggregate=t}(k=t.SQExprInfo||(t.SQExprInfo={}));var H=function(){function e(e){this.ignoreCase=e}return e.run=function(t,r,i){return t=t||null,r=r||null,t===r?!0:!t!=!r?!1:i?t.accept(e.ignoreCaseInstance,r):t.accept(e.instance,r)},e.prototype.visitColumnRef=function(e,t){return t instanceof d&&e.ref===t.ref&&this.equals(e.source,t.source)},e.prototype.visitMeasureRef=function(e,t){return t instanceof v&&e.ref===t.ref&&this.equals(e.source,t.source)},e.prototype.visitAggr=function(e,t){return t instanceof h&&e.func===t.func&&this.equals(e.arg,t.arg)},e.prototype.visitPercentile=function(e,t){return t instanceof m&&e.exclusive===t.exclusive&&e.k===t.k&&this.equals(e.arg,t.arg)},e.prototype.visitHierarchy=function(e,t){return t instanceof y&&e.hierarchy===t.hierarchy&&this.equals(e.arg,t.arg)},e.prototype.visitHierarchyLevel=function(e,t){return t instanceof w&&e.level===t.level&&this.equals(e.arg,t.arg)},e.prototype.visitPropertyVariationSource=function(e,t){return t instanceof g&&e.name===t.name&&e.property===t.property&&this.equals(e.arg,t.arg)},e.prototype.visitSelectRef=function(e,t){return t instanceof x&&e.expressionName===t.expressionName},e.prototype.visitBetween=function(e,t){return t instanceof S&&this.equals(e.arg,t.arg)&&this.equals(e.lower,t.lower)&&this.equals(e.upper,t.upper)},e.prototype.visitIn=function(e,t){if(!(t instanceof E&&this.equalsAll(e.args,t.args)))return!1;var r=e.values,i=t.values;if(r.length!==i.length)return!1;for(var n=0,o=r.length;o>n;n++)if(!this.equalsAll(r[n],i[n]))return!1;return!0},e.prototype.visitEntity=function(e,t){return t instanceof s&&e.schema===t.schema&&e.entity===t.entity&&this.optionalEqual(e.variable,t.variable)},e.prototype.visitAnd=function(e,t){return t instanceof b&&this.equals(e.left,t.left)&&this.equals(e.right,t.right)},e.prototype.visitOr=function(e,t){return t instanceof D&&this.equals(e.left,t.left)&&this.equals(e.right,t.right)},e.prototype.visitCompare=function(e,t){return t instanceof C&&e.comparison===t.comparison&&this.equals(e.left,t.left)&&this.equals(e.right,t.right)},e.prototype.visitContains=function(e,t){return t instanceof T&&this.equals(e.left,t.left)&&this.equals(e.right,t.right)},e.prototype.visitDateSpan=function(e,t){return t instanceof P&&e.unit===t.unit&&this.equals(e.arg,t.arg)},e.prototype.visitDateAdd=function(e,t){return t instanceof I&&e.unit===t.unit&&e.amount===t.amount&&this.equals(e.arg,t.arg)},e.prototype.visitExists=function(e,t){return t instanceof M&&this.equals(e.arg,t.arg)},e.prototype.visitNot=function(e,t){return t instanceof R&&this.equals(e.arg,t.arg)},e.prototype.visitNow=function(e,t){return t instanceof A},e.prototype.visitDefaultValue=function(e,t){return t instanceof j},e.prototype.visitAnyValue=function(e,t){return t instanceof N},e.prototype.visitResourcePackageItem=function(e,t){return t instanceof Q&&e.packageName===t.packageName&&e.packageType===t.packageType&&e.itemName===t.itemName},e.prototype.visitStartsWith=function(e,t){return t instanceof V&&this.equals(e.left,t.left)&&this.equals(e.right,t.right)},e.prototype.visitConstant=function(e,t){return t instanceof F&&e.type===t.type?e.type.text&&this.ignoreCase?a.equalIgnoreCase(e.valueEncoded,t.valueEncoded):e.valueEncoded===t.valueEncoded:!1},e.prototype.visitFillRule=function(e,t){if(t instanceof O&&this.equals(e.input,t.input)){var r=e.rule,i=t.rule;if(r===i)return!0;var n=r.linearGradient2,o=i.linearGradient2;if(n&&o)return this.visitLinearGradient2(n,o);var a=r.linearGradient3,u=i.linearGradient3;if(a&&u)return this.visitLinearGradient3(a,u)}return!1},e.prototype.visitLinearGradient2=function(e,t){return this.equalsFillRuleStop(e.min,t.min)&&this.equalsFillRuleStop(e.max,t.max)},e.prototype.visitLinearGradient3=function(e,t){return this.equalsFillRuleStop(e.min,t.min)&&this.equalsFillRuleStop(e.mid,t.mid)&&this.equalsFillRuleStop(e.max,t.max)},e.prototype.equalsFillRuleStop=function(e,t){return this.equals(e.color,t.color)?e.value?this.equals(e.value,t.value):e.value===t.value:!1},e.prototype.visitArithmetic=function(e,t){return t instanceof c&&e.operator===t.operator&&this.equals(e.left,t.left)&&this.equals(e.right,t.right)},e.prototype.visitScopedEval=function(e,t){return t instanceof l&&this.equals(e.expression,t.expression)&&this.equalsAll(e.scope,t.scope)},e.prototype.visitWithRef=function(e,t){return t instanceof p&&e.expressionName===t.expressionName},e.prototype.visitTransformTableRef=function(e,t){return t instanceof U&&e.source===t.source},e.prototype.visitTransformOutputRoleRef=function(e,t){return t instanceof q&&e.role===t.role&&e.transform===t.transform},e.prototype.optionalEqual=function(e,t){return e&&t?e===t:!0},e.prototype.equals=function(e,t){return e.accept(this,t)},e.prototype.equalsAll=function(e,t){var r=e.length;if(r!==t.length)return!1;for(var i=0;r>i;i++)if(!this.equals(e[i],t[i]))return!1;return!0},e.instance=new e(!1),e.ignoreCaseInstance=new e(!0),e}(),B=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.visitDefault=function(e){return e},t}(t.DefaultSQExprVisitor),G=function(e){function r(t,r,i){e.call(this),this.schema=t,this.aggrUtils=r,i&&(this.errors=i)}return n(r,e),r.prototype.visitIn=function(t){for(var r=e.prototype.visitIn.call(this,t),i=r.args,n=r.values,o=0,a=n;o<a.length;o++)for(var u=a[o],s=0,c=u.length;c>s;++s)this.validateCompatibleType(i[s],u[s]);return r},r.prototype.visitCompare=function(t){var r=e.prototype.visitCompare.call(this,t);return this.validateCompatibleType(r.left,r.right),r},r.prototype.visitColumnRef=function(e){var r=t.SQExprConverter.asFieldPattern(e);if(r){var i=t.FieldExprPattern.toFieldExprEntityItemPattern(r),n=this.validateEntity(i.schema,i.entity);if(n){var o=n.properties.withName(r.column.name);o&&0===o.kind&&this.isQueryable(r)||this.register(3)}}return e},r.prototype.visitMeasureRef=function(e){var r=t.SQExprConverter.asFieldPattern(e);if(r){var i=t.FieldExprPattern.toFieldExprEntityItemPattern(r),n=this.validateEntity(i.schema,i.entity);if(n){var o=n.properties.withName(r.measure.name);o&&1===o.kind&&this.isQueryable(r)||this.register(4)}}return e},r.prototype.visitAggr=function(t){var r=e.prototype.visitAggr.call(this,t),i=J.getColumnRefSQExpr(this.schema,r.arg);return i&&(this.aggrUtils.isSupportedAggregate(t,this.schema,t.func,null,!0)||this.register(0)),r},r.prototype.visitHierarchy=function(e){var r=t.SQExprConverter.asFieldPattern(e);if(r){var i=r.hierarchy;i?this.validateHierarchy(i.schema,i.entity,i.name):this.register(5);
}return e},r.prototype.visitHierarchyLevel=function(e){var r=t.SQExprConverter.asFieldPattern(e);if(r){var i=r.hierarchyLevel;i?this.validateHierarchyLevel(i.schema,i.entity,i.name,i.level):r.columnHierarchyLevelVariation||this.register(6)}return e},r.prototype.visitPercentile=function(e){if(e.arg.accept(this),_.isEmpty(this.errors)){var t=e.arg.getMetadata(this.schema);t&&0===t.kind&&t.type&&(t.type.integer||t.type.numeric)||this.register(10)}return e},r.prototype.visitEntity=function(e){return this.validateEntity(e.schema,e.entity),e},r.prototype.visitContains=function(e){return this.validateOperandsAndTypeForStartOrContains(e.left,e.right),e},r.prototype.visitStartsWith=function(e){return this.validateOperandsAndTypeForStartOrContains(e.left,e.right),e},r.prototype.visitArithmetic=function(e){return this.validateArithmeticTypes(e.left,e.right),e},r.prototype.visitScopedEval=function(e){for(var t=0,r=e.scope;t<r.length;t++){var i=r[t];u.isWithRef(i)||u.isColumn(i)||this.register(11)}return e},r.prototype.visitWithRef=function(e){return e},r.prototype.visitTransformTableRef=function(e){return e},r.prototype.visitTransformOutputRoleRef=function(e){return e},r.prototype.validateOperandsAndTypeForStartOrContains=function(e,t){e instanceof d?this.visitColumnRef(e):e instanceof w?this.visitHierarchyLevel(e):this.register(7),t instanceof F&&t.type.text?this.validateCompatibleType(e,t):this.register(8)},r.prototype.validateArithmeticTypes=function(e,r){t.SQExprUtils.supportsArithmetic(e,this.schema)||this.register(7),t.SQExprUtils.supportsArithmetic(r,this.schema)||this.register(8)},r.prototype.validateCompatibleType=function(e,t){var r=e.getMetadata(this.schema),i=r&&r.type,n=t.getMetadata(this.schema),o=n&&n.type;i&&o&&!i.isCompatibleFrom(o)&&this.register(9)},r.prototype.validateEntity=function(e,t){var r=this.schema.schema(e);if(r){var i=r.entities.withName(t);if(i)return i;this.register(2)}else this.register(1)},r.prototype.validateHierarchy=function(e,t,r){var i=this.validateEntity(e,t);if(i){var n=i.hierarchies.withName(r);if(n)return n;this.register(5)}},r.prototype.validateHierarchyLevel=function(e,t,r,i){var n=this.validateHierarchy(e,t,r);if(n){var o=n.levels.withName(i);if(o)return o;this.register(6)}},r.prototype.register=function(e){this.errors||(this.errors=[]),this.errors.push(e)},r.prototype.isQueryable=function(e){var r=t.FieldExprPattern.toFieldExprEntityItemPattern(e);if(e.hierarchyLevel||e.hierarchyLevelAggr){var i=t.SQHierarchyExprUtils.getConceptualHierarchyLevelFromExpr(this.schema,e);return i&&1!==i.column.queryable}return 1!==this.schema.schema(r.schema).findProperty(r.entity,t.FieldExprPattern.getPropertyName(e)).queryable},r}(t.SQExprRewriter);t.SQExprValidationVisitor=G;var W=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.visitAggr=function(e){return e.func},t.prototype.visitDefault=function(e){},t.getAggregate=function(e){var r=new t;return e.accept(r)},t}(t.DefaultSQExprVisitor),J=function(e){function r(t){e.call(this),this.schema=t}return n(r,e),r.prototype.visitColumnRef=function(e){return e},r.prototype.visitHierarchyLevel=function(e){var r=e.level,i=e.arg,n=i.accept(this);if(i&&i.arg instanceof g){var o=i.arg,a=n.getTargetEntityForVariation(this.schema,o.name);if(n&&a){var u=n.source.schema,s=L.entity(u,a),c=this.schema.schema(u).findHierarchy(a,i.hierarchy);if(c)for(var l=0,p=c.levels;l<p.length;l++){var f=p[l];if(f.name===r)return new d(s,f.column.name)}}}else{var v=i.arg,h=t.SQHierarchyExprUtils.getConceptualHierarchyLevel(this.schema,v.schema,v.entity,i.hierarchy,e.level);if(h)return new d(i.arg,h.column.name)}},r.prototype.visitHierarchy=function(e){return e.arg.accept(this)},r.prototype.visitPropertyVariationSource=function(e){var t=e.property;return new d(e.arg,t)},r.prototype.visitAggr=function(e){return e.arg.accept(this)},r.prototype.visitDefault=function(e){},r.getColumnRefSQExpr=function(e,t){var i=new r(e);return t.accept(i)},r}(t.DefaultSQExprVisitor),K=function(e){function r(t){e.call(this),this.schema=t}return n(r,e),r.prototype.visitEntity=function(e){return e},r.prototype.visitColumnRef=function(e){return r.getEntity(e)},r.prototype.visitHierarchyLevel=function(e){var t=r.getColumnRefSQExpr(this.schema,e);return r.getEntity(t)},r.prototype.visitHierarchy=function(e){return e.arg.accept(this)},r.prototype.visitPropertyVariationSource=function(e){var t=r.getColumnRefSQExpr(this.schema,e);return r.getEntity(t)},r.prototype.visitAggr=function(e){var t=r.getColumnRefSQExpr(this.schema,e);return r.getEntity(t)},r.prototype.visitMeasureRef=function(e){return e.source.accept(this)},r.getColumnRefSQExpr=function(e,t){var r=new J(e);return t.accept(r)},r.getEntity=function(e){var r=t.SQExprConverter.asFieldPattern(e),i=r.column;return L.entity(i.schema,i.entity,i.entityVar)},r.getEntityExpr=function(e,t){var i=new r(e);return t.accept(i)},r}(t.DefaultSQExprVisitor),Y=function(e){function t(t){e.call(this),this.func=t}return n(t,e),t.prototype.visitAggr=function(e){return e.func===this.func?e:new h(e.arg,this.func)},t.prototype.visitColumnRef=function(e){return new h(e,this.func)},t.rewrite=function(e,r){var i=new t(r);return e.accept(i)},t}(B),z=function(){function e(e,t){this.sqExpr=e,this.aggregate=t}return e.rewrite=function(r,i){return t.FieldExprPattern.visit(r,new e(r,i))},e.prototype.visitPercentOfGrandTotal=function(e){return e.baseExpr=t.SQExprConverter.asFieldPattern(Y.rewrite(L.fieldExpr(e.baseExpr),this.aggregate)),L.fieldExpr({percentOfGrandTotal:e})},e.prototype.visitColumn=function(e){return this.defaultRewrite()},e.prototype.visitColumnAggr=function(e){return this.defaultRewrite()},e.prototype.visitColumnHierarchyLevelVariation=function(e){return this.defaultRewrite()},e.prototype.visitSelectRef=function(e){return this.defaultRewrite()},e.prototype.visitEntity=function(e){return this.defaultRewrite()},e.prototype.visitEntityAggr=function(e){return this.defaultRewrite()},e.prototype.visitHierarchy=function(e){return this.defaultRewrite()},e.prototype.visitHierarchyLevel=function(e){return this.defaultRewrite()},e.prototype.visitHierarchyLevelAggr=function(e){return this.defaultRewrite()},e.prototype.visitMeasure=function(e){return this.defaultRewrite()},e.prototype.visitPercentile=function(e){return this.defaultRewrite()},e.prototype.defaultRewrite=function(){return Y.rewrite(this.sqExpr,this.aggregate)},e}(),X=function(){function e(e){this.sqExpr=e}return e.rewrite=function(r){return t.FieldExprPattern.visit(r,new e(r))},e.prototype.visitPercentOfGrandTotal=function(t){return e.rewrite(L.fieldExpr(t.baseExpr))},e.prototype.visitColumn=function(e){return this.defaultRewrite()},e.prototype.visitColumnAggr=function(e){return this.defaultRewrite()},e.prototype.visitColumnHierarchyLevelVariation=function(e){return this.defaultRewrite()},e.prototype.visitSelectRef=function(e){return this.defaultRewrite()},e.prototype.visitEntity=function(e){return this.defaultRewrite()},e.prototype.visitEntityAggr=function(e){return this.defaultRewrite()},e.prototype.visitHierarchy=function(e){return this.defaultRewrite()},e.prototype.visitHierarchyLevel=function(e){return this.defaultRewrite()},e.prototype.visitHierarchyLevelAggr=function(e){return this.defaultRewrite()},e.prototype.visitMeasure=function(e){return this.defaultRewrite()},e.prototype.visitPercentile=function(e){return this.defaultRewrite()},e.prototype.defaultRewrite=function(){return Z.rewrite(this.sqExpr)},e}(),Z=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.visitAggr=function(e){return e.arg},t.rewrite=function(e){return e.accept(t.instance)},t.instance=new t,t}(B),$=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.visitEntity=function(e){return e.variable?L.entity(e.schema,e.entity):e},t.rewrite=function(e){return e.accept(t.instance)},t.instance=new t,t}(t.SQExprRewriter),ee=function(e){function r(){e.apply(this,arguments)}return n(r,e),r.rewrite=function(e){return e.accept(r.instance)},r.prototype.visitDefault=function(e){var r=t.SQExprConverter.asFieldPattern(e);return r&&r.percentOfGrandTotal&&(e=L.fieldExpr(r.percentOfGrandTotal.baseExpr)),e},r.instance=new r,r}(B),te=function(e){function r(){e.apply(this,arguments)}return n(r,e),r.rewrite=function(e){return e.accept(r.instance)},r.prototype.visitDefault=function(e){var r=t.SQExprConverter.asFieldPattern(e);return r&&!r.percentOfGrandTotal&&(e=L.fieldExpr({percentOfGrandTotal:{baseExpr:t.SQExprConverter.asFieldPattern(e)}})),e},r.instance=new r,r}(B)}(t=e.data||(e.data={}))}(r||(r={}))},81:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){function r(){return new s}function i(e,r,i,n){var o=e.identities;return o?o[r]:t.createDataViewScopeIdentity(u.equal(e.fields[0],u.typedConstant(i,n)))}function n(e,t){_.contains(e,t)||e.push(t)}function o(e,t,r){var i=t.values;e.values=i;var n=t.highlights;n&&(e.highlights=n);var o;void 0!==t.minLocal&&(o||(o={}),o.minLocal=t.minLocal),void 0!==t.maxLocal&&(o||(o={}),o.maxLocal=t.maxLocal),o&&(e.source.aggregates=o,_.extend(e,o))}var a=e.data.DataViewTransform,u=e.data.SQExprBuilder;t.createCategoricalDataViewBuilder=r;var s=function(){function e(){this.categories=[],this.staticMeasureColumns=[],this.dynamicMeasureColumns=[],this.columnIndex=0}return e.prototype.withCategory=function(e){var t=e.values,r=e.identityFrom,n=e.source.type,o={source:e.source,identityFields:e.identityFrom.fields,identity:e.identityFrom.identities||[],values:t};if(!e.identityFrom.identities)for(var a=0,u=t.length;u>a;a++)o.identity.push(i(r,a,t[a],n));return this.categories||(this.categories=[]),this.categories.push(o),this},e.prototype.withCategories=function(e){return _.isEmpty(this.categories)?this.categories=e:Array.prototype.push.apply(this.categories,e),this},e.prototype.withValues=function(e){for(var t=e.columns,r=0,i=t;r<i.length;r++){var n=i[r];this.staticMeasureColumns.push(n.source)}return this.staticSeriesValues=t,this},e.prototype.withGroupedValues=function(e){var t=e.groupColumn;this.dynamicSeriesMetadata={column:t.source,identityFrom:t.identityFrom,values:t.values};for(var r=e.valueColumns,i=0,n=r;i<n.length;i++){var o=n[i];this.dynamicMeasureColumns.push(o.source)}return this.dynamicSeriesValues=e.data,this},e.prototype.fillData=function(e){var t=_.first(this.categories),r=t&&t.values?t.values.length:0;if(this.hasDynamicSeries())for(var i=0;i<this.dynamicSeriesMetadata.values.length;i++)for(var n=this.dynamicSeriesValues[i],a=0,u=this.dynamicMeasureColumns.length;u>a;a++){var s=i*u+a;o(e[s],n[a],r)}if(this.hasStaticSeries())for(var c=this.hasDynamicSeries()?this.dynamicSeriesValues.length*this.dynamicMeasureColumns.length:0,a=0,u=this.staticMeasureColumns.length;u>a;a++)o(e[c+a],this.staticSeriesValues[a],r)},e.prototype.build=function(){for(var e=[],t={},r=this.categories,o=this.dynamicSeriesMetadata,u=0,s=r;u<s.length;u++){var c=s[u];n(e,c.source)}if(this.hasDynamicSeries()){n(e,o.column),t.values=a.createValueColumns([],o.identityFrom.fields,o.column);for(var l=o.values,p=0;p<l.length;p++)for(var f=l[p],d=i(o.identityFrom,p,f,o.column.type),v=0,h=this.dynamicMeasureColumns;v<h.length;v++){var m=h[v],g=_.toPlainObject(m);g.groupName=f,n(e,g),t.values.push({source:g,values:[],identity:d})}if(this.hasStaticSeries()){var y=t.values.grouped();t.values.grouped=function(){return y},this.appendStaticMeasureColumns(e,t.values)}}else t.values=a.createValueColumns(),this.appendStaticMeasureColumns(e,t.values);var w=this.categories;_.isEmpty(w)||(t.categories=w),this.fillData(t.values);var x={metadata:{columns:e},categorical:t};return this.isLegalDataView(x)?x:void 0},e.prototype.appendStaticMeasureColumns=function(e,t){if(!_.isEmpty(this.staticMeasureColumns))for(var r=0,i=this.staticMeasureColumns;r<i.length;r++){var o=i[r];n(e,o),t.push({source:o,values:[]})}},e.prototype.isLegalDataView=function(t){return!(this.hasDynamicSeries()&&this.hasStaticSeries()&&e.isVisualDataView(t.metadata.columns))},e.isVisualDataView=function(e){return!_.isEmpty(e)&&_.any(e,function(e){return!!e.queryName})},e.prototype.hasDynamicSeries=function(){return!!this.dynamicSeriesMetadata},e.prototype.hasStaticSeries=function(){return!!this.staticSeriesValues},e}()}(t=e.data||(e.data={}))}(r||(r={}))},82:function(e,t){var r,r=(window.jsCommon,window.powerbi),i=(window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft,this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});!function(e){var t;!function(e){var t;!function(t){function r(e){return JSON.stringify(e.accept(o.instance))}function n(e){for(var r="[",i=0,n=e.length;n>i;i++)i>0&&(r+=","),r+=t.serialize(e[i]);return r+"]"}t.serialize=r,t.serializeArray=n;var o=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype.visitColumnRef=function(e){return{col:{s:e.source.accept(this),r:e.ref}}},t.prototype.visitMeasureRef=function(e){return{measure:{s:e.source.accept(this),r:e.ref}}},t.prototype.visitAggr=function(e){return{agg:{a:e.arg.accept(this),f:e.func}}},t.prototype.visitEntity=function(e){return{e:e.entity}},t.prototype.visitHierarchyLevel=function(e){return{h:e.arg.accept(this),l:e.level}},t.prototype.visitHierarchy=function(e){return{e:e.arg.accept(this),h:e.hierarchy}},t.prototype.visitPropertyVariationSource=function(e){return{e:e.arg.accept(this),n:e.name,p:e.property}},t.prototype.visitAnd=function(e){return{and:{l:e.left.accept(this),r:e.right.accept(this)}}},t.prototype.visitCompare=function(e){return{comp:{k:e.comparison,l:e.left.accept(this),r:e.right.accept(this)}}},t.prototype.visitConstant=function(e){return{"const":{t:e.type.primitiveType,v:e.value}}},t.prototype.visitArithmetic=function(e){return{arithmetic:{o:e.operator,l:e.left.accept(this),r:e.right.accept(this)}}},t.prototype.visitScopedEval=function(e){return{scopedEval:{e:e.expression.accept(this),s:n(e.scope)}}},t.prototype.visitWithRef=function(e){return{withRef:{e:e.expressionName}}},t.prototype.visitTransformTableRef=function(e){return{transformTableRef:{source:e.source}}},t.prototype.visitTransformOutputRoleRef=function(e){var t={transformOutputRoleRef:{role:e.role}};return e.transform&&(t.transformOutputRoleRef.transform=e.transform),t},t.prototype.visitDefault=function(e){},t.instance=new t,t}(e.DefaultSQExprVisitor)}(t=e.SQExprShortSerializer||(e.SQExprShortSerializer={}))}(t=e.data||(e.data={}))}(r||(r={}))},373:function(e,t,r){window.jsCommon,window.powerbi,window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;window.jsCommon=window.jsCommon||{},window.powerbi=window.powerbi||{},window.debug=window.debug||{},window.InJs=window.InJs||{},r(374)},374:function(e,t,r){window.jsCommon,window.powerbi,window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;r(375),r(73),r(376),r(377),r(378),r(379),r(380),r(381),r(74),r(382),r(383),r(384),r(385),r(75),r(386),r(387),r(388),r(389),r(390),r(391),r(392),r(393),r(394),r(395),r(396),r(397),r(398),r(399),r(400),r(401),r(402),r(403),r(404),r(405),r(406),r(407),r(408),r(409),r(410),r(411),r(412),r(413),r(414),r(415),r(416),r(76),r(417),r(418),r(419),r(420),r(421),r(422),r(77),r(423),r(424),r(425),r(426),r(427),r(428),r(429),r(430),r(431),r(432),r(433),r(434),r(79),r(435),r(436),r(437),r(78),r(438),r(439),r(440),r(80),r(441),r(442),r(443),r(444),r(445),r(446),r(81),r(447),r(448),r(449),r(82),r(450),r(451)},375:function(e,t){window.jsCommon,window.powerbi,window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft},376:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){function t(e){return new r(e)}e.createEnumType=t;var r=function(){function e(e){this.allMembers=e}return e.prototype.members=function(e){var t=this.allMembers;if(!e)return t;for(var r=[],i=0,n=t;i<n.length;i++){var o=n[i];_.contains(e,o.value)&&r.push(o)}return r},e}()}(r||(r={}))},377:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){function r(t){return t?{solid:{color:e.data.SQExprBuilder.text(t)}}:void 0}function i(t){return r(t)||e.data.SQExprBuilder.nullConstant()}t.createSolidFillDefinition=r,t.createSolidFillSQExpr=i}(t=e.FillDefinitionHelpers||(e.FillDefinitionHelpers={}));var r;!function(e){function t(e){if(e===!0)return!1;var t=e;return!!t.nullable}e.nullable=t}(r=e.FillSolidColorTypeDescriptor||(e.FillSolidColorTypeDescriptor={}))}(r||(r={}))},378:function(e,t){window.jsCommon,window.powerbi,window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft},379:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){e.urlType={misc:{imageUrl:!0}}}(t=e.ImageDefinition||(e.ImageDefinition={}))}(r||(r={}))},380:function(e,t){window.jsCommon,window.powerbi,window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft},381:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){function t(e){return!!(e.fill||e.fillRule||e.filter||e.expression||e.image||e.paragraphs)}e.isValid=t}(t=e.StructuralTypeDescriptor||(e.StructuralTypeDescriptor={}))}(r||(r={}))},382:function(e,t){window.jsCommon,window.powerbi,window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft},383:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){var t;!function(e){function t(e){if(e){var t;return e.top&&(t={Top:{}},e.top.count&&(t.Top.Count=e.top.count)),e.bottom&&(t={Bottom:{}},e.bottom.count&&(t.Bottom.Count=e.bottom.count)),e.sample&&(t={Sample:{}},e.sample.count&&(t.Sample.Count=e.sample.count)),e.window&&(t={Window:{}},e.window.count&&(t.Window.Count=e.window.count)),t}}e.createFrom=t}(t=e.DataShapeBindingDataReduction||(e.DataShapeBindingDataReduction={}))}(t=e.data||(e.data={}))}(r||(r={}))},384:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){var t=function(){function e(e){this.schemas=e.schemas,e.links&&(this.links=e.links)}return e.prototype.schema=function(e){return this.schemas[e]},e}();e.FederatedConceptualSchema=t}(t=e.data||(e.data={}))}(r||(r={}))},385:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){var r;!function(r){function i(r,i){if(!_.isEmpty(r)){for(var n=[],o=0,a=r.length;a>o;o++){var u=r[o],s=u.data,c=void 0;if(s&&s.length)for(var l=0,p=s.length;p>l;l++)c=t.SQExprBuilder.and(c,u.data[l].expr);c&&n.push(c)}return _.isEmpty(n)?void 0:e.DataViewScopeIdentity.filterFromExprs(n,i)}}function n(r,i){var n=r.data;if(n.length!==i.length)return!1;for(var o=0,a=n.length;a>o;o++){var u=r.data[o],s=u;if(s.expr){if(!e.DataViewScopeIdentity.equals(s,i[o]))return!1}else if(!t.DataViewScopeWildcard.matches(u,i[o]))return!1}return!0}function o(e,r){var i=e.data,n=i.length;if(n!==r.length)return!1;for(var o=0;n>o;o++){var a=e.data[o],u=void 0;if(a.expr)u=t.ScopeIdentityExtractor.getKeys(a.expr);else{if(!a.exprs)return!1;u=a.exprs}if(u&&!t.SQExprUtils.sequenceEqual(r[o],u))return!1}return!0}function a(e,t){return e=e||null,t=t||null,e===t?!0:!e!=!t?!1:e.id!==t.id?!1:e.metadata!==t.metadata?!1:!!u(e.data,t.data)}function u(e,t){if(e=e||null,t=t||null,e===t)return!0;if(!e!=!t)return!1;if(e.length!==t.length)return!1;for(var r=0,i=e.length;i>r;r++)if(!s(e[r],t[r]))return!1;return!0}function s(r,i){var n=r,o=i;return n.expr&&o.expr?e.DataViewScopeIdentity.equals(n,o):n.exprs&&o.exprs?t.DataViewScopeWildcard.equals(n,o):n.roles&&o.roles?t.DataViewRoleWildcard.equals(n,o):!1}function c(e){var t={};if(e.data){for(var r=[],i=0,n=e.data.length;n>i;i++)r.push(e.data[i].key);t.data=r}return e.metadata&&(t.metadata=e.metadata),e.id&&(t.id=e.id),JSON.stringify(t)}function l(e){var t=e.data;if(!t)return!1;for(var r=0,i=t;r<i.length;r++){var n=i[r],o=n;if(o.exprs||o.roles)return!0}return!1}function p(e){var t=e.data;if(_.isEmpty(t))return!1;for(var r=0,i=t;r<i.length;r++){var n=i[r];if(f(n))return!0}return!1}function f(e){return!_.isEmpty(e.roles)}function d(e){var t=[];for(var r in e.dataMap)t.push(e.dataMap[r]);return{data:t,metadata:e.metadata,id:e.id}}r.filterFromSelector=i,r.matchesData=n,r.matchesKeys=o,r.equals=a,r.getKey=c,r.containsWildcard=l,r.hasRoleWildcard=p,r.isRoleWildcard=f,r.convertSelectorsByColumnToSelector=d}(r=t.Selector||(t.Selector={}))}(t=e.data||(e.data={}))}(r||(r={}))},386:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){var t=function(){function e(e,t,r){this.items=e,this._activeProjectionRefs=t,this._showAll=r}return e.prototype.all=function(){return this.items},Object.defineProperty(e.prototype,"activeProjectionRefs",{get:function(){return this._activeProjectionRefs},set:function(e){if(!_.isEmpty(e)){for(var t=this.items.map(function(e){return e.queryRef}),r=0,i=e;r<i.length;r++){var n=i[r];if(!_.contains(t,n))return}this._activeProjectionRefs=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showAll",{get:function(){return this._showAll},set:function(e){this._showAll=e},enumerable:!0,configurable:!0}),e.prototype.addActiveQueryReference=function(e){this._activeProjectionRefs?this._activeProjectionRefs.push(e):this._activeProjectionRefs=[e]},e.prototype.getLastActiveQueryReference=function(){return _.isEmpty(this._activeProjectionRefs)?void 0:this._activeProjectionRefs[this._activeProjectionRefs.length-1]},e.prototype.replaceQueryRef=function(e,t){for(var r=0,i=this.items;r<i.length;r++){var n=i[r];n.queryRef===e&&(n.queryRef=t)}},e.prototype.clone=function(){return new e(_.cloneDeep(this.items),_.clone(this._activeProjectionRefs),this._showAll)},e}();e.QueryProjectionCollection=t;var r;!function(e){function t(e){if(!e)return e;var t={};for(var r in e)t[r]=e[r].clone();return t}function r(e,t){return e?e[t]:void 0}e.clone=t,e.getRole=r}(r=e.QueryProjectionsByRole||(e.QueryProjectionsByRole={}))}(t=e.data||(e.data={}))}(r||(r={}))},387:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){!function(e){e[e.Default=0]="Default",e[e.Verbose=1]="Verbose",e[e.WholeUnits=2]="WholeUnits",e[e.DataLabels=3]="DataLabels"}(e.DisplayUnitSystemType||(e.DisplayUnitSystemType={}));e.DisplayUnitSystemType}(r||(r={}))},388:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t=function(){function t(e){this.unit=e,this.sequence=[],this.min=new Date("9999-12-31T23:59:59.999"),this.max=new Date("0001-01-01T00:00:00.000")}return t.prototype.add=function(e){e<this.min&&(this.min=e),e>this.max&&(this.max=e),this.sequence.push(e)},t.prototype.extendToCover=function(e,r){for(var i=this.min;i>e;)i=t.addInterval(i,-this.interval,this.unit),this.sequence.splice(0,0,i);for(this.min=i,i=this.max;r>i;)i=t.addInterval(i,this.interval,this.unit),this.sequence.push(i);this.max=i},t.prototype.moveToCover=function(e,r){var i=t.getDelta(e,r,this.unit),n=Math.floor(i/this.interval);for(this.min=t.addInterval(this.min,n*this.interval,this.unit),this.sequence=[],this.sequence.push(this.min),this.max=this.min;this.max<r;)this.max=t.addInterval(this.max,this.interval,this.unit),this.sequence.push(this.max)},t.calculate=function(r,i,n,o){switch(o||(o=t.getIntervalUnit(r,i,n)),o){case e.DateTimeUnit.Year:return t.calculateYears(r,i,n);case e.DateTimeUnit.Month:return t.calculateMonths(r,i,n);case e.DateTimeUnit.Week:return t.calculateWeeks(r,i,n);case e.DateTimeUnit.Day:return t.calculateDays(r,i,n);case e.DateTimeUnit.Hour:return t.calculateHours(r,i,n);case e.DateTimeUnit.Minute:return t.calculateMinutes(r,i,n);case e.DateTimeUnit.Second:return t.calculateSeconds(r,i,n);case e.DateTimeUnit.Millisecond:return t.calculateMilliseconds(r,i,n)}},t.calculateYears=function(r,i,n){var o=e.NumericSequenceRange.calculateDataRange(r.getFullYear(),i.getFullYear(),!1),a=e.NumericSequence.calculate(e.NumericSequenceRange.calculate(0,o.max-o.min),n,0,null,null,[1,2,5]),u=Math.floor(o.min/a.interval)*a.interval,s=new Date(u,0,1),c=t.fromNumericSequence(s,a,e.DateTimeUnit.Year);return c},t.calculateMonths=function(r,i,n){var o=r.getFullYear(),a=i.getFullYear(),u=r.getMonth(),s=12*(a-o)+i.getMonth(),c=new Date(o,0,1),l=e.NumericSequence.calculateUnits(u,s,n,[1,2,3,6,12]),p=t.fromNumericSequence(c,l,e.DateTimeUnit.Month);return p},t.calculateWeeks=function(r,i,n){var o=0,a=r.getDay(),u=(a-o+7)%7,s=r.getDate()-u,c=new Date(r.getFullYear(),r.getMonth(),s),l=0,p=e.Double.ceilWithPrecision(t.getDelta(c,i,e.DateTimeUnit.Week)),f=e.NumericSequence.calculateUnits(l,p,n,[1,2,4,8]),d=t.fromNumericSequence(c,f,e.DateTimeUnit.Week);return d},t.calculateDays=function(r,i,n){var o=new Date(r.getFullYear(),r.getMonth(),r.getDate()),a=0,u=e.Double.ceilWithPrecision(t.getDelta(r,i,e.DateTimeUnit.Day)),s=e.NumericSequence.calculateUnits(a,u,n,[1,2,7,14]),c=t.fromNumericSequence(o,s,e.DateTimeUnit.Day);return c},t.calculateHours=function(r,i,n){var o=new Date(r.getFullYear(),r.getMonth(),r.getDate()),a=e.Double.floorWithPrecision(t.getDelta(o,r,e.DateTimeUnit.Hour)),u=e.Double.ceilWithPrecision(t.getDelta(o,i,e.DateTimeUnit.Hour)),s=e.NumericSequence.calculateUnits(a,u,n,[1,2,3,6,12,24]),c=t.fromNumericSequence(o,s,e.DateTimeUnit.Hour);return c},t.calculateMinutes=function(r,i,n){var o=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours()),a=e.Double.floorWithPrecision(t.getDelta(o,r,e.DateTimeUnit.Minute)),u=e.Double.ceilWithPrecision(t.getDelta(o,i,e.DateTimeUnit.Minute)),s=e.NumericSequence.calculateUnits(a,u,n,[1,2,5,10,15,30,60,120,180,360,720,1440]),c=t.fromNumericSequence(o,s,e.DateTimeUnit.Minute);return c},t.calculateSeconds=function(r,i,n){var o=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes()),a=e.Double.floorWithPrecision(t.getDelta(o,r,e.DateTimeUnit.Second)),u=e.Double.ceilWithPrecision(t.getDelta(o,i,e.DateTimeUnit.Second)),s=e.NumericSequence.calculateUnits(a,u,n,[1,2,5,10,15,30,60,120,300,600,900,1800,3600]),c=t.fromNumericSequence(o,s,e.DateTimeUnit.Second);return c},t.calculateMilliseconds=function(r,i,n){var o=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds()),a=t.getDelta(o,r,e.DateTimeUnit.Millisecond),u=t.getDelta(o,i,e.DateTimeUnit.Millisecond),s=e.NumericSequence.calculate(e.NumericSequenceRange.calculate(a,u),n,0),c=t.fromNumericSequence(o,s,e.DateTimeUnit.Millisecond);return c},t.addInterval=function(t,i,n){switch(i=Math.round(i),n){case e.DateTimeUnit.Year:return r.addYears(t,i);case e.DateTimeUnit.Month:return r.addMonths(t,i);case e.DateTimeUnit.Week:return r.addWeeks(t,i);case e.DateTimeUnit.Day:return r.addDays(t,i);case e.DateTimeUnit.Hour:return r.addHours(t,i);case e.DateTimeUnit.Minute:return r.addMinutes(t,i);case e.DateTimeUnit.Second:return r.addSeconds(t,i);case e.DateTimeUnit.Millisecond:return r.addMilliseconds(t,i)}},t.fromNumericSequence=function(e,r,i){for(var n=new t(i),o=0;o<r.sequence.length;o++){var a=r.sequence[o],u=t.addInterval(e,a,i);n.add(u)}return n.interval=r.interval,n.intervalOffset=r.intervalOffset,n},t.getDelta=function(t,r,i){var n=0;switch(i){case e.DateTimeUnit.Year:n=r.getFullYear()-t.getFullYear();break;case e.DateTimeUnit.Month:n=12*(r.getFullYear()-t.getFullYear())+r.getMonth()-t.getMonth();break;case e.DateTimeUnit.Week:n=(r.getTime()-t.getTime())/6048e5;break;case e.DateTimeUnit.Day:n=(r.getTime()-t.getTime())/864e5;break;case e.DateTimeUnit.Hour:n=(r.getTime()-t.getTime())/36e5;break;case e.DateTimeUnit.Minute:n=(r.getTime()-t.getTime())/6e4;break;case e.DateTimeUnit.Second:n=(r.getTime()-t.getTime())/1e3;break;case e.DateTimeUnit.Millisecond:n=r.getTime()-t.getTime()}return n},t.getIntervalUnit=function(r,i,n){n=Math.max(n,2);var o=t.getDelta(r,i,e.DateTimeUnit.Day);if(o>356&&o>=180*n)return e.DateTimeUnit.Year;if(o>60&&o>7*n)return e.DateTimeUnit.Month;if(o>14&&o>2*n)return e.DateTimeUnit.Week;var a=t.getDelta(r,i,e.DateTimeUnit.Hour);if(o>2&&a>12*n)return e.DateTimeUnit.Day;if(a>=24&&a>=n)return e.DateTimeUnit.Hour;var u=t.getDelta(r,i,e.DateTimeUnit.Minute);if(u>2&&u>=n)return e.DateTimeUnit.Minute;var s=t.getDelta(r,i,e.DateTimeUnit.Second);if(s>2&&s>=.8*n)return e.DateTimeUnit.Second;var c=t.getDelta(r,i,e.DateTimeUnit.Millisecond);if(c>0)return e.DateTimeUnit.Millisecond;var l=r;return 0!==l.getMilliseconds()?e.DateTimeUnit.Millisecond:0!==l.getSeconds()?e.DateTimeUnit.Second:0!==l.getMinutes()?e.DateTimeUnit.Minute:0!==l.getHours()?e.DateTimeUnit.Hour:1!==l.getDate()?e.DateTimeUnit.Day:0!==l.getMonth()?e.DateTimeUnit.Month:e.DateTimeUnit.Year},t.MIN_COUNT=1,t.MAX_COUNT=1e3,t}();e.DateTimeSequence=t;var r;!function(e){function t(e){return e%4===0&&e%100!==0||e%400===0}function r(e,r){return t(e)?f[r]:p[r]}function i(e,r){var i=e.getFullYear(),n=e.getMonth(),o=e.getDate(),a=2===n&&29===o,u=new Date(e.getTime());return i+=r,a&&!t(i)&&(o=28),u.setFullYear(i,n,o),u}function n(e,t){var i=e.getFullYear(),n=e.getMonth(),o=e.getDate(),a=new Date(e.getTime());return i+=(t-t%12)/12,n+=t%12,n>11&&(n%=12,i++),o=Math.min(o,r(i,n)),a.setFullYear(i,n,o),a}function o(e,t){return a(e,7*t)}function a(e,t){var r=e.getFullYear(),i=e.getMonth(),n=e.getDate(),o=new Date(e.getTime());return o.setFullYear(r,i,n+t),o}function u(e,t){return new Date(e.getTime()+36e5*t)}function s(e,t){return new Date(e.getTime()+6e4*t)}function c(e,t){return new Date(e.getTime()+1e3*t)}function l(e,t){return new Date(e.getTime()+t)}var p=[31,28,31,30,31,30,31,31,30,31,30,31],f=[31,29,31,30,31,30,31,31,30,31,30,31];e.addYears=i,e.addMonths=n,e.addWeeks=o,e.addDays=a,e.addHours=u,e.addMinutes=s,e.addSeconds=c,e.addMilliseconds=l}(r=e.DateUtils||(e.DateUtils={}))}(r||(r={}))},389:function(e,t){var r,r=(window.jsCommon,window.powerbi),i=(window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft,this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});!function(e){function t(t,i){for(var o=[],a=3;n>a;a++){var u=t(a);u&&r(o,e.Double.pow10(a),u.title,u.format,i)}return o}function r(e,t,r,i,n){if(r||i){var o=t;if(e.length>0){var a=e[e.length-1];n&&(o=n(t,a.value,o)),a.applicableRangeMax=o}var u=new p;u.value=t,u.applicableRangeMin=o,u.applicableRangeMax=1e3*o,u.title=r,u.labelFormat=i,e.push(u)}}var n=24,o=1e15,a=1e-4,u="%",s="E+0",c="0.##"+s,l=/^([0\#,]*\.[0\#]+|[0\#,]+|g)$/i,p=function(){function t(){}return t.prototype.project=function(t){return this.value?e.Double.removeDecimalNoise(t/this.value):t},t.prototype.reverseProject=function(e){return this.value?e*this.value:e},t.prototype.isApplicableTo=function(t){t=Math.abs(t);var r=e.Double.getPrecision(t,3);return e.Double.greaterOrEqualWithPrecision(t,this.applicableRangeMin,r)&&e.Double.lessWithPrecision(t,this.applicableRangeMax,r)},t.prototype.isScaling=function(){return this.value>1},t}();e.DisplayUnit=p;var f=function(){function t(e){this.units=e?e:[]}return Object.defineProperty(t.prototype,"title",{get:function(){return this.displayUnit?this.displayUnit.title:void 0},enumerable:!0,configurable:!0}),t.prototype.update=function(e){void 0!==e&&(this.unitBaseValue=e,
this.displayUnit=this.findApplicableDisplayUnit(e))},t.prototype.findApplicableDisplayUnit=function(e){for(var t=0,r=this.units;t<r.length;t++){var i=r[t];if(i.isApplicableTo(e))return i}},t.prototype.format=function(e,t,r,i){r=this.getNumberOfDecimalsForFormatting(t,r);var n="";return this.isFormatSupported(t)&&!this.hasScientitifcFormat(t)&&this.isScalingUnit()&&this.shouldRespectScalingUnit(t)&&(e=this.displayUnit.project(e),n=this.displayUnit.labelFormat),this.formatHelper(e,n,t,r,i)},t.prototype.isFormatSupported=function(e){return!t.UNSUPPORTED_FORMATS.test(e)},t.prototype.isPercentageFormat=function(e){return e&&e.indexOf(u)>=0},t.prototype.shouldRespectScalingUnit=function(e){return!this.isPercentageFormat(e)},t.prototype.getNumberOfDecimalsForFormatting=function(e,t){return t},t.prototype.isScalingUnit=function(){return this.displayUnit&&this.displayUnit.isScaling()},t.prototype.formatHelper=function(t,r,i,n,o){if("g"!==i&&"G"!==i||null==n||(i=e.visuals.valueFormatter.DefaultNumericFormat),i=e.NumberFormat.addDecimalsToFormat(i,n,o),i&&!e.formattingService.isStandardNumberFormat(i))return e.formattingService.formatNumberWithCustomOverride(t,i,r);i||(i="G"),r||(r="{0}");var a=e.formattingService.formatValue(t,i);return e.formattingService.format(r,[a])},t.prototype.formatSingleValue=function(t,r,i,n){return this.update(this.shouldUseValuePrecision(t)?e.Double.getPrecision(t,8):t),this.format(t,r,i,n)},t.prototype.shouldUseValuePrecision=function(e){if(0===this.units.length)return!0;for(var t=0,r=0;r<this.units.length;r++)if(this.units[r].isScaling()){t=this.units[r].applicableRangeMin;break}return Math.abs(e)<t},t.prototype.isScientific=function(e){return-o>e||e>o||e>-a&&a>e&&0!==e},t.prototype.hasScientitifcFormat=function(e){return e&&-1!==e.toUpperCase().indexOf("E")},t.prototype.supportsScientificFormat=function(e){return e?l.test(e):!0},t.prototype.shouldFallbackToScientific=function(e,t){return!this.hasScientitifcFormat(t)&&this.supportsScientificFormat(t)&&this.isScientific(e)},t.prototype.getScientificFormat=function(t,r,i,n){if(this.isFormatSupported(r)&&this.shouldFallbackToScientific(t,r)){var o=e.NumberFormat.getNumericFormat(t,r);return i&&(o=e.NumberFormat.addDecimalsToFormat(o?o:"0",Math.abs(i),n)),o?o+s:c}return r},t.UNSUPPORTED_FORMATS=/^(p\d*)|(.*\%)|(e\d*)$/i,t}();e.DisplayUnitSystem=f;var d=function(e){function t(){e.call(this,[])}return i(t,e),t}(f);e.NoDisplayUnitSystem=d;var v=function(e){function r(t){e.call(this,r.getUnits(t))}return i(r,e),r.prototype.format=function(t,r,i,n){return r=this.getScientificFormat(t,r,i,n),e.prototype.format.call(this,t,r,i,n)},r.reset=function(){r.units=null},r.getUnits=function(e){return r.units||(r.units=t(e,function(e,t,r){return e-t>=1e3?e/10:r}),r.units[r.units.length-1].applicableRangeMax=1/0),r.units},r}(f);e.DefaultDisplayUnitSystem=v;var h=function(e){function r(t){e.call(this,r.getUnits(t))}return i(r,e),r.reset=function(){r.units=null},r.getUnits=function(e){return r.units||(r.units=t(e),r.units[r.units.length-1].applicableRangeMax=1/0),r.units},r.prototype.format=function(t,r,i,n){return r=this.getScientificFormat(t,r,i,n),e.prototype.format.call(this,t,r,i,n)},r}(f);e.WholeUnitsDisplayUnitSystem=h;var m=function(e){function n(t){e.call(this,n.getUnits(t))}return i(n,e),n.prototype.isFormatSupported=function(e){return!n.UNSUPPORTED_FORMATS.test(e)},n.getUnits=function(e){if(!n.units){var i=[],o=function(e,t,r){return-1===e&&e-t>=1e3?e/10:r},a=e(-1);r(i,n.AUTO_DISPLAYUNIT_VALUE,a.title,a.format,o),a=e(0),r(i,n.NONE_DISPLAYUNIT_VALUE,a.title,a.format,o),n.units=i.concat(t(e,o)),n.units[n.units.length-1].applicableRangeMax=1/0}return n.units},n.prototype.format=function(t,r,i,n){return r=this.getScientificFormat(t,r,i,n),e.prototype.format.call(this,t,r,i,n)},n.AUTO_DISPLAYUNIT_VALUE=0,n.NONE_DISPLAYUNIT_VALUE=1,n.UNSUPPORTED_FORMATS=/^(e\d*)$/i,n}(f);e.DataLabelsDisplayUnitSystem=m}(r||(r={}))},390:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t=function(){function t(){}return t.calculate=function(r,i,n,o,a,u){var s=new t;if(i=void 0===i?10:e.Double.ensureInRange(i,t.MIN_COUNT,t.MAX_COUNT),void 0===o&&(o=e.Double.MIN_EXP),void 0===a&&(a=!1),void 0===n&&(n=1),void 0===u&&(u=[1,2,5]),r.forcedSingleStop)return s.interval=r.getSize(),s.intervalOffset=s.interval-(r.forcedSingleStop-r.min),s.min=r.min,s.max=r.max,s.sequence=[r.forcedSingleStop],s;var c=0,l=0,p=9,f=n>0&&!r.hasFixedMin,d=n>0&&!r.hasFixedMax,v=r.getSize(),h=e.Double.log10(v),m=e.Double.log10(u[0]);h-=m;var g=e.Double.log10(i);h-=g,h=Math.max(h,o-m+1);var y=void 0;if(0!==c){var w=e.Double.pow10(h),x=e.Double.floorToPrecision(r.min,w),b=e.Double.ceilToPrecision(r.max,w),S=e.NumericSequenceRange.calculateFixedRange(x,b);S.shrinkByStep(r,c),l=S.min,p=S.max,y=Math.floor(S.getSize()/c)}else{var E=void 0;for(E=0;3>E;E++){for(var D=h+E,w=e.Double.pow10(D),x=e.Double.floorToPrecision(r.min,w),b=e.Double.ceilToPrecision(r.max,w),C=u.length,T=e.Double.pow10(D-1),V=0;C>V;V++){var M=u[V]*T,S=e.NumericSequenceRange.calculateFixedRange(x,b,a);if(S.shrinkByStep(r,M),f&&r.min===S.min&&n>=1&&(S.min-=M),d&&r.max===S.max&&n>=1&&(S.max+=M),y=e.Double.ceilWithPrecision(S.getSize()/M),i>=y||2===E&&V===C-1||1===i&&2===y&&(M>r.getSize()||r.min<0&&r.max>0&&2*M>=r.getSize())){c=M,l=S.min,p=S.max;break}}if(0!==c)break}}(y>32*i||y>t.MAX_COUNT)&&(y=Math.min(32*i,t.MAX_COUNT),c=(p-l)/y),s.min=l,s.max=p,s.interval=c,s.intervalOffset=l-r.min,s.maxAllowedMargin=n,s.canExtendMin=f,s.canExtendMax=d;var R=e.Double.getPrecision(c,0);s.precision=R;var F=[],P=e.Double.roundToPrecision(l,R);F.push(P);for(var V=0;y>V;V++)P=e.Double.roundToPrecision(P+c,R),F.push(P);return s.sequence=F,s.trimMinMax(r.min,r.max),s},t.calculateUnits=function(r,i,n,o){n=e.Double.ensureInRange(n,t.MIN_COUNT,t.MAX_COUNT),r===i&&(i=r+1);for(var a=0,u=0,s=0;s<o.length;s++){u=o[s];var c=e.Double.ceilWithPrecision(i/u),l=e.Double.floorWithPrecision(r/u);if(a=c-l,n>=a)break}var p=-r;p%=u;var f=new t;f.sequence=[];for(var d=r+p;f.sequence.push(d),!(d>=i);d+=u);return f.interval=u,f.intervalOffset=p,f.min=f.sequence[0],f.max=f.sequence[f.sequence.length-1],f},t.prototype.trimMinMax=function(e,t){var r=(e-this.min)/this.interval,i=(this.max-t)/this.interval,n=.001;(!this.canExtendMin||r>this.maxAllowedMargin&&r>n)&&(this.min=e),(!this.canExtendMax||i>this.maxAllowedMargin&&i>n)&&(this.max=t)},t.MIN_COUNT=1,t.MAX_COUNT=1e3,t}();e.NumericSequence=t}(r||(r={}))},391:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t=function(){function t(){}return t.prototype._ensureIncludeZero=function(){this.includeZero&&(this.min>0&&!this.hasFixedMin&&(this.min=0),this.max<0&&!this.hasFixedMax&&(this.max=0))},t.prototype._ensureNotEmpty=function(){if(this.min===this.max)if(this.min){var r=this.min,i=e.Double.log10(Math.abs(r)),n=void 0;i>=0&&4>i?(n=.5,this.forcedSingleStop=r):(n=e.Double.pow10(i)/2,this.forcedSingleStop=null),this.min=r-n,this.max=r+n}else this.min=0,this.max=t.DEFAULT_MAX,this.hasFixedMin=!0,this.hasFixedMax=!0},t.prototype._ensureDirection=function(){if(this.min>this.max){var e=this.min;this.min=this.max,this.max=e}},t.prototype.getSize=function(){return this.max-this.min},t.prototype.shrinkByStep=function(e,t){var r=this.min/t,i=e.min/t,n=Math.floor(i-r);this.min+=n*t,r=this.max/t,i=e.max/t,n=Math.ceil(i-r),this.max+=n*t},t.calculate=function(i,n,o,a,u){var s=new t;return s.includeZero=!!u,s.hasDataRange=r.hasValue(i)&&r.hasValue(n),s.hasFixedMin=r.hasValue(o),s.hasFixedMax=r.hasValue(a),i=e.Double.ensureInRange(i,t.MIN_SUPPORTED_DOUBLE,t.MAX_SUPPORTED_DOUBLE),n=e.Double.ensureInRange(n,t.MIN_SUPPORTED_DOUBLE,t.MAX_SUPPORTED_DOUBLE),s.hasFixedMin&&s.hasFixedMax?(s.min=o,s.max=a):s.hasFixedMin?(s.min=o,s.max=n>o?n:o):s.hasFixedMax?(s.min=a>i?i:a,s.max=a):s.hasDataRange?(s.min=i,s.max=n):(s.min=0,s.max=0),s._ensureIncludeZero(),s._ensureNotEmpty(),s._ensureDirection(),0===s.min?s.hasFixedMin=!0:0===s.max&&(s.hasFixedMax=!0),s},t.calculateDataRange=function(e,i,n){return r.hasValue(e)&&r.hasValue(i)?t.calculate(e,i,null,null,n):t.calculateFixedRange(0,t.DEFAULT_MAX)},t.calculateFixedRange=function(e,r,i){var n=new t;return n.hasDataRange=!1,n.includeZero=i,n.min=e,n.max=r,n._ensureIncludeZero(),n._ensureNotEmpty(),n._ensureDirection(),n.hasFixedMin=!0,n.hasFixedMax=!0,n},t.DEFAULT_MAX=10,t.MIN_SUPPORTED_DOUBLE=-1e307,t.MAX_SUPPORTED_DOUBLE=1e307,t}();e.NumericSequenceRange=t;var r;!function(e){function t(e){return void 0!==e&&null!==e}e.hasValue=t}(r=e.ValueUtil||(e.ValueUtil={}))}(r||(r={}))},392:function(e,t){var r,i=window.jsCommon,r=window.powerbi;window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){var r;!function(t){function r(e){var t=E[e];return t?D[t]||e:e}function n(e){var t=-1===e?"Auto":e.toString(),r=D["DisplayUnitSystem_E"+t+"_Title"],i=0>=e?"{0}":D["DisplayUnitSystem_E"+t+"_LabelFormat"];return r||i?{title:r,format:i}:void 0}function o(e){return D[e]}function a(t){return e.NumberFormat.getCustomFormatMetadata(t)}function u(t){C=t,e.DefaultDisplayUnitSystem.reset(),e.WholeUnitsDisplayUnitSystem.reset()}function s(e,t){void 0===t&&(t=!1);var r=t?C.beautify(e):e;return{format:function(e){return null==e?C["null"]:w(e,r)}}}function c(r){var i=r.allowFormatBeautification?C.beautify(r.format):r.format;if(d(r)){var n=f(r.displayUnitSystemType),o=!!r.formatSingleValues;n.update(Math.max(Math.abs(r.value||0),Math.abs(r.value2||0)));var a,u=null!=r.precision;if(u?a=-r.precision:n.displayUnit&&n.displayUnit.value>1&&(a=-T),r.detectAxisPrecision){u=!0;var c=r.value;n.displayUnit&&n.displayUnit.value>0&&(c/=n.displayUnit.value),e.Double.isInteger(c)?a=0:(a=e.Double.log10(c),i&&t.getFormatMetadata(i).hasPercent&&(a=0>a?Math.min(0,a+2):0))}return{format:function(t){var r=x(t,!0);return S.isNullOrUndefinedOrWhiteSpaceString(r)?(t&&!n.isScalingUnit()&&Math.abs(t)<V&&!u&&(t=e.Double.roundToPrecision(t)),o?n.formatSingleValue(t,i,a,u):n.format(t,i,a,u)):r},displayUnit:n.displayUnit,options:r}}if(v(r.value,r.value2,r.tickCount)){var l=e.DateTimeSequence.getIntervalUnit(r.value,r.value2,r.tickCount);return{format:function(t){if(null==t)return C["null"];var r=e.formattingService.dateFormatString(l);return w(t,r)},options:r}}return s(i)}function l(e,t,r){return null==e?C["null"]:w(e,r?C.beautify(t):t)}function p(e,t,r,i){if(!(t&&t.type&&t.type.dateTime)&&e instanceof Date){var n=h(F,null,!1);return w(e,n,i)}return w(e,h(t,r),i)}function f(t){if(null==t)return new e.DefaultDisplayUnitSystem(C.describe);switch(t){case e.DisplayUnitSystemType.Default:return new e.DefaultDisplayUnitSystem(C.describe);case e.DisplayUnitSystemType.WholeUnits:return new e.WholeUnitsDisplayUnitSystem(C.describe);case e.DisplayUnitSystemType.Verbose:return new e.NoDisplayUnitSystem;case e.DisplayUnitSystemType.DataLabels:return new e.DataLabelsDisplayUnitSystem(C.describe);default:return new e.DefaultDisplayUnitSystem(C.describe)}}function d(t){var r=t.value,i=t.value2,n=t.format;if(t.formatSingleValues&&n&&Math.abs(r)<M){var o=!e.NumberFormat.isStandardFormat(n);if(o){var a=e.NumberFormat.getCustomFormatMetadata(n,!0).precision;if(R>a)return!1}else if(e.Double.isInteger(r))return!1}return"number"==typeof r||"number"==typeof i?!0:void 0}function v(e,t,r){return e instanceof Date&&t instanceof Date&&void 0!==r&&null!==r}function h(r,i,n){if(r){if(i){var o=e.DataViewObjects.getValue(r.objects,i);if(o)return o}if(!n){var a=r.type;if(a){if(a.dateTime)return t.DefaultDateFormat;if(a.integer)return t.DefaultIntegerFormat;if(a.numeric)return t.DefaultNumericFormat}}}}function m(e,t){var r;if(!e)return null;var i=e.length;if(i>0){r=e[0];for(var n=i-1,o=1,a=n;a>o;o++){var u=e[o];r=S.format(C.restatementComma,r,u)}if(i>1){var u=e[n];r=S.format(t,r,u)}}else r=null;return r}function g(e){return m(e,C.restatementCompoundAnd)}function y(e){return m(e,C.restatementCompoundOr)}function w(t,r,i){var n=x(t,i?i:!1);return S.isNullOrUndefinedOrWhiteSpaceString(n)?e.formattingService.formatValue(t,r):n}function x(e,t){return null==e&&t?C["null"]:e===!0?C["true"]:e===!1?C["false"]:"number"==typeof e&&isNaN(e)?C.NaN:e===Number.NEGATIVE_INFINITY?C.negativeInfinity:e===Number.POSITIVE_INFINITY?C.infinity:""}function b(e){var t=f(e);return t.units}var S=i.StringExtensions,E={"0.00 %;-0.00 %;0.00 %":"Percentage","0.0 %;-0.0 %;0.0 %":"Percentage1"};t.DefaultIntegerFormat="g",t.DefaultNumericFormat="#,0.00",t.DefaultDateFormat="d";var D={NullValue:"(Blank)",BooleanTrue:"True",BooleanFalse:"False",NaNValue:"NaN",InfinityValue:"+Infinity",NegativeInfinityValue:"-Infinity",RestatementComma:"{0}, {1}",RestatementCompoundAnd:"{0} and {1}",RestatementCompoundOr:"{0} or {1}",DisplayUnitSystem_EAuto_Title:"Auto",DisplayUnitSystem_E0_Title:"None",DisplayUnitSystem_E3_LabelFormat:"{0}K",DisplayUnitSystem_E3_Title:"Thousands",DisplayUnitSystem_E6_LabelFormat:"{0}M",DisplayUnitSystem_E6_Title:"Millions",DisplayUnitSystem_E9_LabelFormat:"{0}bn",DisplayUnitSystem_E9_Title:"Billions",DisplayUnitSystem_E12_LabelFormat:"{0}T",DisplayUnitSystem_E12_Title:"Trillions",Percentage:"#,0.##%",Percentage1:"#,0.#%",TableTotalLabel:"Total",Tooltip_HighlightedValueDisplayName:"Highlighted",Funnel_PercentOfFirst:"Percent of first",Funnel_PercentOfPrevious:"Percent of previous",Funnel_PercentOfFirst_Highlight:"Percent of first (highlighted)",Funnel_PercentOfPrevious_Highlight:"Percent of previous (highlighted)",GeotaggingString_Continent:"continent",GeotaggingString_Continents:"continents",GeotaggingString_Country:"country",GeotaggingString_Countries:"countries",GeotaggingString_State:"state",GeotaggingString_States:"states",GeotaggingString_City:"city",GeotaggingString_Cities:"cities",GeotaggingString_Town:"town",GeotaggingString_Towns:"towns",GeotaggingString_Province:"province",GeotaggingString_Provinces:"provinces",GeotaggingString_County:"county",GeotaggingString_Counties:"counties",GeotaggingString_Village:"village",GeotaggingString_Villages:"villages",GeotaggingString_Post:"post",GeotaggingString_Zip:"zip",GeotaggingString_Code:"code",GeotaggingString_Place:"place",GeotaggingString_Places:"places",GeotaggingString_Address:"address",GeotaggingString_Addresses:"addresses",GeotaggingString_Street:"street",GeotaggingString_Streets:"streets",GeotaggingString_Longitude:"longitude",GeotaggingString_Longitude_Short:"lon",GeotaggingString_Longitude_Short2:"long",GeotaggingString_Latitude:"latitude",GeotaggingString_Latitude_Short:"lat",GeotaggingString_PostalCode:"postal code",GeotaggingString_PostalCodes:"postal codes",GeotaggingString_ZipCode:"zip code",GeotaggingString_ZipCodes:"zip codes",GeotaggingString_Territory:"territory",GeotaggingString_Territories:"territories"};t.getLocalizedString=o;var C={"null":D.NullValue,"true":D.BooleanTrue,"false":D.BooleanFalse,NaN:D.NaNValue,infinity:D.InfinityValue,negativeInfinity:D.NegativeInfinityValue,beautify:function(e){return r(e)},describe:function(e){return n(e)},restatementComma:D.RestatementComma,restatementCompoundAnd:D.RestatementCompoundAnd,restatementCompoundOr:D.RestatementCompoundOr},T=2,V=1e3,M=1e4,R=2,F={displayName:"",type:e.ValueType.fromPrimitiveTypeAndCategory(e.PrimitiveType.DateTime)};t.getFormatMetadata=a,t.setLocaleOptions=u,t.createDefaultFormatter=s,t.create=c,t.format=l,t.formatVariantMeasureValue=p,t.getFormatString=h,t.formatListAnd=g,t.formatListOr=y,t.getDisplayUnits=b}(r=t.valueFormatter||(t.valueFormatter={}))}(t=e.visuals||(e.visuals={}))}(r||(r={}))},393:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){var r,i=e.Prototype.inheritSingle;!function(e){function t(e){return!_.isEmpty(e)&&e[0].objects}function r(e,t){if(!_.isEmpty(e)){var r=i(e),n=r[0]=i(r[0]);return n.objects=t,r}}e.getCategoriesDataViewObjects=t,e.setCategoriesDataViewObjects=r}(r=t.DataViewCategoricalUtils||(t.DataViewCategoricalUtils={}))}(t=e.data||(e.data={}))}(r||(r={}))},394:function(e,t){var r,i=window.jsCommon,r=window.powerbi;window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){var r,n=e.Prototype.inherit,o=e.Prototype.inheritSingle,a=i.ArrayExtensions;!function(e){function t(e){return _.isEmpty(e.children)}function r(e,t){if(e)if(s(e))for(var r=0,n=e;r<n.length;r++){var o=n[r];o&&i(o,[],t)}else i(e,[],t)}function i(e,t,r){t.push(e);var n=r(e,t),o=!!n&&0!==n;if(1===n){var a=e.children;if(!_.isEmpty(a))for(var u=0,s=a;u<s.length;u++){var c=s[u];if(c&&(o=i(c,t,r),!o))break}}return t.pop(),o}function u(e,i){var n=0;r(e,function(e,r){return t(e)&&(i(e,n,r),n++),1})}function s(e){return a.isArrayOrInheritedArray(e)}function c(e,t,r){if(e.level===t)return void r(e);var i=e.children;if(i&&i.length>0)for(var n=0,o=i.length;o>n;n++)c(i[n],t,r)}function l(e,t,r){var i=e,a=void 0===e.level,u=a||e.level<=t;if(u){var s=r?o:n,c=s(e),p=a||e.level<t;if(p&&!_.isEmpty(e.children)){c.children=s(e.children);for(var f=0,d=c.children.length;d>f;f++)c.children[f]=l(c.children[f],t,r)}i=c}return i}function p(e){var t=!1;if(e)if(f(e))t=p(e.rows)||p(e.columns);else{var r=e.levels;if(!_.isEmpty(r))for(var i=0,n=r;i<n.length;i++){var o=n[i];if(o.sources&&o.sources.length>=2){var a=o.sources[0].isMeasure;if(!a){t=!0;break}}}}return t}function f(e){return"rows"in e&&"columns"in e&&"valueSources"in e}e.isLeafNode=t,e.forEachNodeDepthFirst=r,e.forEachLeafNode=u,e.forEachNodeAtLevel=c,e.inheritMatrixNodeHierarchy=l,e.containsCompositeGroup=p}(r=t.DataViewMatrixUtils||(t.DataViewMatrixUtils={}))}(t=e.data||(e.data={}))}(r||(r={}))},395:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){var t;!function(e){function t(e,t){var r=e.roles;return!!r&&!!r[t]}function r(e,t){var r=e.roles;return!!r&&_.any(t,function(e){return r[e]})}function i(e,t,i){var o=[];if(!_.isEmpty(e))for(var a=n(t),u=0,s=e.length;s>u;u++){var c=e[u];if(r(c,i)){var l=a[c.index];if(_.isEmpty(l)){var p={metadataColumn:c,sourceIndex:u,projectionOrderIndex:void 0};o.push(p)}else for(var f=0,d=l;f<d.length;f++){var v=d[f],p={metadataColumn:c,sourceIndex:u,projectionOrderIndex:v};o.push(p)}}}return o}function n(e){for(var t={},r=0,i=e.length;i>r;r++){var n=e[r],o=t[n];o||(o=t[n]=[]),o.push(r)}return t}e.isForRole=t,e.isForAnyRole=r,e.leftJoinMetadataColumnsAndProjectionOrder=i}(t=e.DataViewMetadataColumnUtils||(e.DataViewMetadataColumnUtils={}))}(t=e.data||(e.data={}))}(r||(r={}))},396:function(e,t){window.jsCommon,window.powerbi,window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft},397:function(e,t){window.jsCommon,window.powerbi,window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft},398:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){var t;!function(e){function t(e,t){if(!_.isEmpty(e)){var r=e[0];if(r.values&&r.values.length>0)for(var n=0,o=r.values.length;o>n;++n){var a=r.values[n];if(a&&a.source&&i(a.source,t))return n}}return-1}function r(e,t){if(!_.isEmpty(e))for(var r=0,n=e.length;n>r;r++)if(i(e[r].source,t))return r;return-1}function i(e,t){var r=e.roles;return r&&r[t]}function n(e,t){return null!=e&&null!=e.metadata&&e.metadata.columns&&_.any(e.metadata.columns,function(e){return e.roles&&void 0!==e.roles[t]})}function o(e,t){return e&&e.source&&e.source.roles&&e.source.roles[t]===!0}e.getMeasureIndexOfRole=t,e.getCategoryIndexOfRole=r,e.hasRole=i,e.hasRoleInDataView=n,e.hasRoleInValueColumn=o}(t=e.DataRoleHelper||(e.DataRoleHelper={}))}(t=e.data||(e.data={}))}(r||(r={}))},399:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){function r(e){return new n(e)}var i=e.data.DataRoleHelper;t.createIDataViewCategoricalReader=r;var n=function(){function e(e){this.dataView=e;var t;e&&(t=e.categorical);var r;t&&(r=this.categories=t.categories),this.hasValidCategories=!_.isEmpty(r);var i;if(t&&(i=t.values),this.hasAnyValidValues=!1,null!=i){var n=e.categorical.values.grouped();if(n.length>0){this.hasAnyValidValues=!0,this.grouped=n;for(var o={},a=n[0].values,u=0,s=a.length;s>u;u++){var c=a[u].source.roles;for(var l in c)c[l]&&(o[l]||(o[l]=[]),o[l].push(u))}this.valueRoleIndexMapping=o}}this.hasAnyValidValues&&(this.dataHasDynamicSeries=!!this.dataView.categorical.values.source)}return e.prototype.hasCategories=function(){return this.hasValidCategories},e.prototype.getCategoryCount=function(){return this.hasValidCategories?this.categories[0].values.length:0},e.prototype.getCategoryValues=function(e){if(this.hasValidCategories){var t=this.getCategoryFromRole(e);return t?t.values:void 0}},e.prototype.getCategoryValue=function(e,t){if(this.hasValidCategories){var r=this.getCategoryFromRole(e);return r?r.values[t]:void 0}},e.prototype.getCategoryColumn=function(e){return this.hasValidCategories?this.getCategoryFromRole(e):void 0},e.prototype.getCategoryMetadataColumn=function(e){if(this.hasValidCategories){var t=this.getCategoryFromRole(e);return t?t.source:void 0}},e.prototype.getCategoryColumnIdentityFields=function(e){if(this.hasValidCategories){var t=this.getCategoryFromRole(e);return t?t.identityFields:void 0}},e.prototype.getCategoryDisplayName=function(e){if(this.hasValidCategories){var t=this.getCategoryColumn(e);if(t&&t.source)return t.source.displayName}},e.prototype.hasCompositeCategories=function(){return this.hasValidCategories?this.categories.length>1:void 0},e.prototype.hasCategoryWithRole=function(e){return-1!==i.getCategoryIndexOfRole(this.categories,e)},e.prototype.getCategoryObjects=function(e,t){if(this.hasValidCategories){var r=this.getCategoryFromRole(e);if(r&&r.objects)return r.objects[t]}},e.prototype.getCategoryFromRole=function(e){var t=this.categories;return t[i.getCategoryIndexOfRole(t,e)]},e.prototype.hasValues=function(e){return this.valueRoleIndexMapping&&!_.isEmpty(this.valueRoleIndexMapping[e])},e.prototype.hasHighlights=function(e){return this.hasValues(e)?!_.isEmpty(this.grouped[0].values[this.valueRoleIndexMapping[e][0]].highlights):!1},e.prototype.getValue=function(e,t,r){return void 0===r&&(r=0),this.hasValues(e)?this.dataHasDynamicSeries?this.getValueInternal(e,t,r,0,!1):this.getValueInternal(e,t,0,r,!1):void 0},e.prototype.getHighlight=function(e,t,r){return void 0===r&&(r=0),this.hasValues(e)?this.dataHasDynamicSeries?this.getValueInternal(e,t,r,0,!0):this.getValueInternal(e,t,0,r,!0):void 0},e.prototype.getAllValuesForRole=function(e,t,r){if(void 0===r&&(r=0),this.hasValues(e)){for(var i=[],n=0,o=this.valueRoleIndexMapping[e].length;o>n;n++)i.push(this.getValueInternal(e,t,r,n,!1));return i}},e.prototype.getAllHighlightsForRole=function(e,t,r){if(void 0===r&&(r=0),this.hasValues(e)){for(var i=[],n=0,o=this.valueRoleIndexMapping[e].length;o>n;n++)i.push(this.getValueInternal(e,t,r,n,!0));return i}},e.prototype.getValueInternal=function(e,t,r,i,n){if(this.hasValues(e)){var o=this.valueRoleIndexMapping[e][i],a=this.grouped[r].values[o];return n?a.highlights[t]:a.values[t]}},e.prototype.getFirstNonNullValueForCategory=function(e,t){if(this.hasValues(e)){if(!this.dataHasDynamicSeries)return this.getValue(e,t);for(var r=0,i=this.grouped.length;i>r;r++){var n=this.getValue(e,t,r);if(null!=n)return n}}},e.prototype.getMeasureQueryName=function(e){return this.hasValues(e)?this.grouped[0].values[this.valueRoleIndexMapping[e][0]].source.queryName:void 0},e.prototype.getValueColumn=function(e,t){return void 0===t&&(t=0),this.hasValues(e)?this.dataHasDynamicSeries?this.grouped[t].values[this.valueRoleIndexMapping[e][0]]:this.grouped[0].values[this.valueRoleIndexMapping[e][t]]:void 0},e.prototype.getValueMetadataColumn=function(e,t){void 0===t&&(t=0);var r=this.getValueColumn(e,t);return r?r.source:void 0},e.prototype.getAllValueMetadataColumnsForRole=function(e,t){if(void 0===t&&(t=0),this.hasValues(e)){for(var r=[],i=0,n=this.valueRoleIndexMapping[e].length;n>i;i++){var o=this.grouped[t].values[this.valueRoleIndexMapping[e][i]].source;r.push(o)}return r}},e.prototype.getValueDisplayName=function(e,t){if(this.hasValues(e)){var r=this.getValueColumn(e,t);if(r&&r.source)return r.source.displayName}},e.prototype.hasDynamicSeries=function(){return this.dataHasDynamicSeries},e.prototype.getSeriesCount=function(e){if(this.hasAnyValidValues){if(this.dataHasDynamicSeries)return this.grouped.length;var t=e&&this.valueRoleIndexMapping[e];return t?t.length:1}},e.prototype.getSeriesObjects=function(e){return this.hasAnyValidValues?this.grouped[e].objects:void 0},e.prototype.getSeriesValueColumns=function(){return this.hasAnyValidValues?this.dataView.categorical.values:void 0},e.prototype.getSeriesValueColumnGroup=function(e){return this.hasAnyValidValues?this.grouped[e]:void 0},e.prototype.getSeriesMetadataColumn=function(){return this.hasAnyValidValues?this.dataView.categorical.values.source:void 0},e.prototype.getSeriesColumnIdentityFields=function(){return this.hasAnyValidValues?this.dataView.categorical.values.identityFields:void 0},e.prototype.getSeriesName=function(e){return this.hasAnyValidValues?this.grouped[e].name:void 0},e.prototype.getSeriesDisplayName=function(){return this.hasAnyValidValues&&this.dataHasDynamicSeries?this.dataView.categorical.values.source.displayName:void 0},e.prototype.getStaticObjects=function(){var e=null;return this.dataView.metadata&&this.dataView.metadata.objects&&(e=this.dataView.metadata.objects),e},e}()}(t=e.data||(e.data={}))}(r||(r={}))},400:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){var r,i=e.Prototype.inherit,n=e.Prototype.inheritSingle,o=e.visuals.valueFormatter;!function(r){function a(e,t,r,i,n){var o=e,a=e.categorical;if(a){var u=s(a,r);if(u&&u.categories.length>=2){var c=_.chain(n&&n[u.roleName]).filter(function(e){return e.suppressConcat}).map(function(e){return e.queryRef}).value();o=p(e,t,u.roleName,u.categories,c)}}return o}function u(e,t,r,n){var o;if(!_.isEmpty(n.categories)&&n.categories.length>=2){var a=i(e.columns),u=i(e,function(e){e.columns=a}),s={metadata:u,categorical:n};o=p(s,t,r,n.categories,[])}else o={metadata:e,categorical:n};return o}function s(e,t){var r,i=_.map(t,function(e){return e.categorical}),n=!_.isEmpty(i)&&_.every(i,function(e){return!!e});if(n){var o=c(i);if(o&&l(o,t)){var a=_.filter(e.categories,function(e){return e.source.roles&&!!e.source.roles[o]});if(a.length>=2){var u=_.every(a,function(e){return e.values.length===a[0].values.length});u&&(r={roleName:o,categories:a})}}}return r}function c(t){var r=e.DataViewMapping.getRolesIfSameInAllCategoricalMappings(t,e.DataViewMapping.getAllRolesInCategories);return 1===_.size(r)?_.first(r):void 0}function l(e,t){var r=_.every(t,function(t){return!_.isEmpty(t.conditions)&&_.every(t.conditions,function(t){return t[e]&&1===t[e].max})});return r}function p(e,r,i,o,a){var u=t.DataViewObjectDescriptors.findFormatString(r),s=f(o,a,u),c=_.map(o,function(e){return e.source}),l=d(i,c,a),p=n(e);v(p,l);var m=e.categorical,g=t.DataViewCategoricalUtils.getCategoriesDataViewObjects(m.categories),y=h(o,l,s,g),w=_.difference(m.categories,o);w.push(y);var x=n(m);return x.categories=w,p.categorical=x,p}function f(e,t,r){for(var i=[],n=0,a=e;n<a.length;n++)for(var u=a[n],s=o.getFormatString(u.source,r),c=0,l=u.values.length;l>c;c++)if(!_.contains(t,u.source.queryName)){var p=u.values&&u.values[c],f=o.format(p,s);i[c]=void 0===i[c]?f:f+" "+i[c]}return i}function d(t,r,i){for(var n,o=0,a=r;o<a.length;o++){var u=a[o];_.contains(i,u.queryName)||(n=null==n?u.displayName:u.displayName+" "+n)}var s={};s[t]=!0;var c={displayName:n,roles:s,type:e.ValueType.fromPrimitiveTypeAndCategory(e.PrimitiveType.Text)},l=_.last(r);return void 0!==l.isMeasure&&(c.isMeasure=l.isMeasure),c.queryName=l.queryName,c}function v(e,t){var r=n(e.metadata.columns);r.push(t);var i=n(e.metadata);i.columns=r,e.metadata=i}function h(e,t,r,i){var n={source:t,values:r},o=e[0];return o.identity&&(n.identity=o.identity),o.identityFields&&(n.identityFields=o.identityFields),i&&(n.objects=i),n}r.detectAndApply=a,r.applyToPlayChartCategorical=u}(r=t.DataViewConcatenateCategoricalColumns||(t.DataViewConcatenateCategoricalColumns={}))}(t=e.data||(e.data={}))}(r||(r={}))},401:function(e,t){var r,i=window.jsCommon,r=window.powerbi;window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t,r=i.ArrayExtensions;!function(e){function t(e){var t=e&&e.usage&&e.usage.regression;return t||void 0}function i(e,t){if(0!==_.size(e)){var i=_.map(e,function(e){return t(e)}),n=i[0];if(!(i.length>=2)||_.every(i,function(e){return r.sequenceEqual(e,n,function(e,t){return e===t})}))return n}}function n(t){if(!t.categories)return[];var r=[];return e.visitCategoricalCategories(t.categories,{visitRole:function(e){r.push(e)}}),r}e.getRegressionUsage=t,e.getRolesIfSameInAllCategoricalMappings=i,e.getAllRolesInCategories=n}(t=e.DataViewMapping||(e.DataViewMapping={}))}(r||(r={}))},402:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){function t(e,t){var i=e.categorical;i&&r(i,t);var n=e.table;n&&o(n,t);var u=e.matrix;u&&a(u,t);var c=e.tree;c&&s(c,t);var l=e.single;l&&m(l,t)}function r(e,t){i(e.categories,t);var r=e.values;n(r,t),v(r,t)}function i(e,t){e&&(p(e,t),f(e,t),d(e,t),h(e,t))}function n(e,t){if(e){p(e,t,0),f(e,t,0),d(e,t,0);var r=e.group;if(r)for(var i=0,n=r.select;i<n.length;i++){var o=n[i];p(o,t,1),f(o,t,1)}}}function o(e,t){var r=e.rows;p(r,t),f(r,t),d(r,t),h(r,t)}function a(e,t){u(e.rows,t),u(e.columns,t),u(e.values,t)}function u(e,t){e&&(f(e,t),d(e,t),h(e,t))}function s(e,t){c(e.nodes,t),l(e.values,t)}function c(e,t){e&&(f(e,t),h(e,t))}function l(e,t){e&&f(e,t)}function p(e,t,r){var i=e.bind;i&&(null!=r?t.visitRole(i.to,r):t.visitRole(i.to))}function f(e,t,r){var i=e["for"];i&&(null!=r?t.visitRole(i["in"],r):t.visitRole(i["in"]))}function d(e,t,r){var i=e.select;if(i)for(var n=0,o=i;n<o.length;n++){var a=o[n];p(a,t,r),f(a,t,r)}}function v(e,t){if(e){var r=e.group;r&&(t.visitRole(r.by),h(r,t))}}function h(e,t){if(t.visitReduction){var r=e.dataReductionAlgorithm;r&&t.visitReduction(r)}}function m(e,t){t.visitRole(e.role)}e.visitMapping=t,e.visitCategorical=r,e.visitCategoricalCategories=i,e.visitCategoricalValues=n,e.visitTable=o,e.visitMatrixItems=u,e.visitTreeNodes=c,e.visitTreeValues=l,e.visitGrouped=v}(t=e.DataViewMapping||(e.DataViewMapping={}))}(r||(r={}))},403:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){var r,i=e.Prototype.inheritSingle;!function(t){function r(e){var t=_.filter(e.dataRoles,function(e){return!_.isEmpty(e.requiredTypes)});n(e.dataview,e.dataViewMappings,t)}function n(e,t,r){if(!_.isEmpty(t)&&!_.isEmpty(r)){for(var i=o(e.metadata.columns,r),n=a(e.metadata.columns,r),u={},s=0,d=t;s<d.length;s++){var h=d[s];for(var m in h)null!=e[m]&&(u[m]=!0)}u.categorical&&c(e.categorical,i,n),u.table&&l(e.table,i,n),u.tree&&p(e.tree.root,i,n),u.matrix&&f(e.matrix,i,n),u.single&&v(e,t,r,n)}}function o(e,t){if(!e||!t)return function(){return!1};for(var r={},i=0,n=e;i<n.length;i++){var o=n[i],a=o.roles;if(a)for(var u=0,s=t;u<s.length;u++){var c=s[u];if(a[c.name]){r[o.index]=!0;break}}}return function(e){return isNaN(e)?!1:!!r[e]}}function a(e,t){if(!e||!t)return function(){return!0};for(var r=[],i=0,n=e;i<n.length;i++){var o=n[i],a=u(o,t);a&&(r[o.index]=a)}return function(e,t){return r[e]?r[e](t):!0;
}}function u(e,t){var r=s(e,t);if(!_.isEmpty(r))return function(e){return m(e,r)}}function s(t,r){var i=[],n=t&&t.roles;if(!n)return i;for(var o=0,a=r;o<a.length;o++){var u=a[o];if(n[u.name])for(var s=0,c=u.requiredTypes;s<c.length;s++){var l=c[s],p=e.ValueType.fromDescriptor(l);i.push(p)}}return i}function c(e,t,r){var i=e&&e.values;if(i){var n=i.grouped();if(n)for(var o=0,a=n;o<a.length;o++)for(var u=a[o],s=u.values,c=0,l=s;c<l.length;c++){var p=l[c],f=p.source.index;if(t(f))for(var d=0,v=p.values.length;v>d;d++)p.values=h(p.values,d,f,r)}}}function l(e,t,r){var i=e&&e.columns;if(i){for(var n=[],o=0,a=i;o<a.length;o++){var u=a[o];t(u.index)&&n.push(u.index)}for(var s=e.rows,c=0,l=s.length;l>c;c++)for(var p=0,f=n;p<f.length;p++){var d=f[p];s[c]=h(s[c],d,d,r)}}}function p(e,t,r){if(e.values)for(var i in e.values)t(i)&&("object"==typeof e.values[i]&&"value"in e.values[i]?e.values[i]=h(e.values[i],"value",i,r):e.values=h(e.values,i,i,r));else if(e.children)for(var n=0,o=e.children;n<o.length;n++){var a=o[n];p(a,t,r)}}function f(e,t,r){var i=e&&e.rows&&e.rows.root;i&&d(e,i,t,r)}function d(e,t,r,i){if(t.values)for(var n in t.values){var o=t.values[n],a=o.valueSourceIndex||0,u=e.valueSources[a].index;_.isNumber(u)&&r(u)&&(t.values[n]=h(o,"value",u,i))}else if(t.children)for(var s=0,c=t.children;s<c.length;s++){var l=c[s];d(e,l,r,i)}}function v(e,t,r,i){if(e.single){for(var n=[],o=0,a=r;o<a.length;o++){var u=a[o];u.name&&n.push(u.name)}for(var s=e.metadata.columns,c=0,l=t;c<l.length;c++){var p=l[c],f=p.single.role;if(-1!==n.indexOf(f)){var d=g(s,f);return void(d&&(e.single=h(e.single,"value",d.index,i)))}}}}function h(e,t,r,n){if(e){var o=e[t];return null===o||n(r,o)||(e=i(e),e[t]=null),e}}function m(e,t){for(var r=0,i=t;r<i.length;r++){var n=i[r];if(n.numeric||n.integer)return"number"==typeof e}return!1}function g(e,t){for(var r=0,i=e;r<i.length;r++){var n=i[r],o=n&&n.roles;if(o&&o[t])return n}}t.apply=r,t.filterVariantMeasures=n,t.generateMetadataColumnFilter=o,t.generateValueFilter=a,t.getColumnRequiredTypes=s,t.normalizeVariant=h}(r=t.DataViewNormalizeValues||(t.DataViewNormalizeValues={}))}(t=e.data||(e.data={}))}(r||(r={}))},404:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){function t(e,t,i){if(!e)return i;var n=e[t.objectName],o=n;return r.getValue(o,t.propertyName,i)}function i(e,t,r){if(e&&e[t]){var i=e[t];return i}return r}function n(e,t){if(e&&e[t]){var r=e[t];return r}}function o(e,r,i){var n=t(e,r);return n&&n.solid?n.solid.color:i}function a(e){return _.isArray(e)}e.getValue=t,e.getObject=i,e.getUserDefinedObjects=n,e.getFillColor=o,e.isUserDefined=a}(t=e.DataViewObjects||(e.DataViewObjects={}));var r;!function(e){function t(e,t,r){if(!e)return r;var i=e[t];return void 0===i?r:i}function r(t,r,i){var n=e.getValue(t,r);return n&&n.solid?n.solid.color:i}e.getValue=t,e.getFillColorByPropertyName=r}(r=e.DataViewObject||(e.DataViewObject={}))}(r||(r={}))},405:function(e,t){var r,i=window.jsCommon,r=window.powerbi;window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){var t,r=i.JsonComparer;!function(t){function i(t,r,i){var n=t[r];n||(t[r]=n=[]);for(var o=0,a=n.length;a>o;o++){var u=n[o];if(e.Selector.equals(u.selector,i))return u}var s={selector:i,properties:{}};return n.push(s),s}function o(t,r,i){var n=t[r];if(!n)return!1;var o=_.remove(n,function(t){return e.Selector.equals(t.selector,i)}).length>0;return _.isEmpty(n)&&delete t[r],o}function a(e,t){if(e&&t)for(var r in t)for(var i=t[r],n=0,o=i;n<o.length;n++){var a=o[n];for(var u in a.properties)l(e,r,a.selector,u)}}function u(e,t){if(e&&t)for(var r in t){var i=t[r];if(i){var n=e[r];n||(n=e[r]=[]),s(n,i)}}}function s(t,r){for(var i,n=0,o=r;n<o.length;n++){var a=o[n];i=!1;for(var u=0,s=t;u<s.length;u++){var l=s[u];if(e.Selector.equals(l.selector,a.selector)){c(l.properties,a.properties),i=!0;break}}if(!i){var p={selector:a.selector,properties:{}};c(p.properties,a.properties),t.push(p)}}}function c(e,t){for(var r in t){var i=t[r];if(i){var n=e[r];n||(e[r]=i)}}}function l(e,t,r,i){var o=v(e,t,r);o&&n.deleteSingleProperty(o,i)}function p(e,t,r,n){i(e,t.objectName,r).properties[t.propertyName]=n}function f(e,t,r){var i=d(e,t,r);if(i)return i[t.propertyName]}function d(e,t,r){var i=v(e,t.objectName,r);if(i)return i.properties}function v(t,r,i){if(t){var n=t[r];if(n)for(var o=0,a=n.length;a>o;o++){var u=n[o];if(e.Selector.equals(u.selector,i))return u}}}function h(t,i){return t instanceof e.SemanticFilter&&i instanceof e.SemanticFilter?e.SemanticFilter.isSameFilter(t,i):r.equals(t,i)}function m(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!h(e[r],t[r]))return!1;return!0}function g(t,r){if(r.bool)return"boolean"!=typeof t&&(t=!1),e.SQExprBuilder["boolean"](t);if(r.text||r.scripting&&r.scripting.source)return e.SQExprBuilder.text(t);if(r.numeric){if($.isNumeric(t))return e.SQExprBuilder["double"](+t)}else if(r.fill){if(t)return{solid:{color:e.SQExprBuilder.text(t)}}}else{if(r.formatting)return r.formatting.labelDisplayUnits?e.SQExprBuilder["double"](+t):e.SQExprBuilder.text(t);if(r.enumeration)return $.isNumeric(t)?e.SQExprBuilder["double"](+t):e.SQExprBuilder.text(t);if(r.misc)t=t?e.SQExprBuilder.text(t):null;else if(r.dateTime)t=t?e.SQExprBuilder.dateTime(t):null;else if(r.image&&t){var i=t,n={name:e.SQExprBuilder.text(i.name),url:e.SQExprBuilder.text(i.url)};return i.scaling&&(n.scaling=e.SQExprBuilder.text(i.scaling)),n}}return t}function y(e){var t={};for(var r in e){var i=e[r];if(!_.isEmpty(i)){for(var n=[],o=0,a=i;o<a.length;o++){var u=a[o];n.push({properties:w(u.properties),selector:u.selector})}t[r]=n}}return t}function w(e){return _.clone(e)}t.ensure=i,t.deleteObjectDefinition=o,t.deleteProperties=a,t.extend=u,t.deleteProperty=l,t.setValue=p,t.getValue=f,t.getPropertyContainer=d,t.getObjectDefinition=v,t.propertiesAreEqual=h,t.allPropertiesAreEqual=m,t.encodePropertyValue=g,t.clone=y}(t=e.DataViewObjectDefinitions||(e.DataViewObjectDefinitions={}));var n;!function(e){function t(e,t){delete e.properties[t]}e.deleteSingleProperty=t}(n=e.DataViewObjectDefinition||(e.DataViewObjectDefinition={}))}(t=e.data||(e.data={}))}(r||(r={}))},406:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){var r;!function(t){function r(t){return s(t,function(t){var r=e.ValueType.fromDescriptor(t.type).formatting;return r&&r.formatString})}function i(e){return s(e,function(e){var t=e.type;return t&&t.filter&&!t.filter.selfFilter})}function n(e){return s(e,o)}function o(e){var t=e&&e.type;return t&&t.filter&&t.filter.selfFilter}function a(e){return s(e,function(e){var t=e.type;return t&&t.operations&&t.operations.searchEnabled})}function u(e){return s(e,function(e){var t=e.type;return t&&!!t.expression&&t.expression.defaultValue})}function s(e,t){if(e)for(var r in e){var i=e[r].properties;for(var n in i)if(t(i[n]))return{objectName:r,propertyName:n}}}t.findFormatString=r,t.findFilterOutput=i,t.findSelfFilter=n,t.isSelfFilter=o,t.findSelfFilterEnabled=a,t.findDefaultValue=u}(r=t.DataViewObjectDescriptors||(t.DataViewObjectDescriptors={}))}(t=e.data||(e.data={}))}(r||(r={}))},407:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){var t;!function(t){function r(t,r,i){for(var n,o=0,a=i.length;a>o;o++){var u=i[o],s=u.name,c=e.DataViewObjectEvaluator.run(t,r[s],u.properties);c&&(n||(n={}),n[s]=c)}return n}function i(e){var t={data:[]};if(e)for(var r in e)for(var i=e[r],o=0,a=i.length;a>o;o++){var u=i[o];n(t,u.selector).objects.push({name:r,properties:u.properties})}return t}function n(t,r){if(!r)return t.metadataOnce||(t.metadataOnce={objects:[]}),t.metadataOnce;var i;r.data?i=t.data:r.metadata?(t.metadata||(t.metadata=[]),i=t.metadata):r.id&&(t.userDefined||(t.userDefined=[]),i=t.userDefined);for(var n=0,o=i;n<o.length;n++){var a=o[n];if(e.Selector.equals(r,a.selector))return a}var u={selector:r,objects:[]};return i.push(u),u}function o(e,t,r,i){i&&(a(e,t,r,i),u(e,t,r,i))}function a(t,r,i,n){var o=e.DataViewObjectDescriptors.findFormatString(r);if(o)for(var a=0,u=n.length;u>a;a++){var l=n[a];l&&c(t,o,l.queryName,l.format||s(i,a))}}function u(t,r,i,n){var o=e.DataViewObjectDescriptors.findDefaultValue(r);if(o)for(var a=0,u=n;a<u.length;a++){var s=u[a];s&&l(t,o,s.queryName,s.defaultValue)}}function s(e,t){for(var r=0,i=e.length;i>r;r++){var n=e[r];if(n&&n.index===t)return n.format}}function c(t,r,i,n){n&&p(t,r,{metadata:i},e.SQExprBuilder.text(n))}function l(e,t,r,i){i&&p(e,t,{metadata:r},i)}function p(e,t,r,i){var n;if(r){var o=e.metadata;o||(o=e.metadata=[]),n=o}else{var a=e.metadataOnce;a||(a=e.metadataOnce={selector:r,objects:[]}),n=[a]}var u,s=f(n,r);if(s){var c=s.objects;if(u=d(c,t.objectName)){if(u.properties[t.propertyName])return}else u={name:t.objectName,properties:{}},c.push(u)}else u={name:t.objectName,properties:{}},n.push({selector:r,objects:[u]});u.properties[t.propertyName]=i}function f(t,r){for(var i=0,n=t.length;n>i;i++){var o=t[i];if(e.Selector.equals(o.selector,r))return o}}function d(e,t){for(var r=0,i=e.length;i>r;r++){var n=e[r];if(n.name===t)return n}}t.evaluateDataViewObjects=r,t.groupObjectsBySelector=i,t.addImplicitObjects=o}(t=e.DataViewObjectEvaluationUtils||(e.DataViewObjectEvaluationUtils={}))}(t=e.data||(e.data={}))}(r||(r={}))},408:function(e,t){var r,r=(window.jsCommon,window.powerbi),i=(window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft,this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});!function(e){var t;!function(t){var r;!function(r){function n(e,t,r){if(t){var i,n=t.properties;for(var a in r){var u=r[a],s=n[a];if(s){var c=o(e,s,u);void 0!==c&&(i||(i={}),i[a]=c)}}return i}}function o(r,i,n){var o=i.type;if(o&&o.expression)return n;var s=v(r,n,e.ValueType.fromDescriptor(i.type));return void 0!==s||n instanceof t.RuleEvaluation?s:a(r,n,o)||u(r,n,o)||c(r,n,o)||l(r,n,o)||n}function a(t,r,i){var n=i.fill;if(n)return n&&n.solid&&n.solid.color&&r.solid?{solid:{color:v(t,r.solid.color,e.ValueType.fromExtendedType(e.ExtendedType.Color))}}:void 0}function u(e,t,r){if(r.fillRule){if(t.linearGradient2){var i=t.linearGradient2;return{linearGradient2:{min:s(e,i.min),max:s(e,i.max)}}}if(t.linearGradient3){var n=t.linearGradient3;return{linearGradient3:{min:s(e,n.min),mid:s(e,n.mid),max:s(e,n.max)}}}}}function s(e,t){var r={color:v(e,t.color,h)},i=v(e,t.value,m);return null!=i&&(r.value=i),r}function c(t,r,i){if(i.image&&r){var n={name:v(t,r.name,g),url:v(t,r.url,e.ValueType.fromDescriptor(e.ImageDefinition.urlType))};return r.scaling&&(n.scaling=v(t,r.scaling,g)),n}}function l(e,t,r){return r.paragraphs&&t?d(e,t,p):void 0}function p(e,t){var r,i=t.textRuns,n=d(e,i,f);return i!==n&&(r=_.clone(t),r.textRuns=n),r||t}function f(e,t){var r,i=t.value,n=v(e,i,g);return void 0!==n&&(r=_.clone(t),r.value=n),r||t}function d(e,t,r){for(var i,n=0,o=t.length;o>n;n++){var a=t[n],u=r(e,a);i||a===u||(i=_.take(t,n)),i&&i.push(u)}return i||t}function v(e,r,i){return r instanceof t.SQExpr?y.evaluate(r,e):r instanceof t.RuleEvaluation?r.evaluate(e):void 0}var h=e.ValueType.fromDescriptor({formatting:{color:!0}}),m=e.ValueType.fromDescriptor({numeric:!0}),g=e.ValueType.fromDescriptor({text:!0});r.run=n,r.evaluateProperty=o,r.evaluateValue=v;var y=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.evaluate=function(e,r){return null!=e?e.accept(t.instance,r):void 0},t.prototype.visitColumnRef=function(e,t){return t.getExprValue(e)},t.prototype.visitConstant=function(e,t){return e.value},t.prototype.visitMeasureRef=function(e,t){return t.getExprValue(e)},t.prototype.visitAggr=function(e,t){return t.getExprValue(e)},t.prototype.visitFillRule=function(e,t){var r=e.input.accept(this,t);if(void 0!==r){var i=t.getColorAllocator(e);if(i)return i.color(r)}},t.prototype.visitPercentile=function(e,t){return t.getExprValue(e)},t.prototype.visitSelectRef=function(e,t){return t.getExprValue(e)},t.instance=new t,t}(t.DefaultSQExprVisitorWithArg)}(r=t.DataViewObjectEvaluator||(t.DataViewObjectEvaluator={}))}(t=e.data||(e.data={}))}(r||(r={}))},409:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){var r,i=e.Prototype.inheritSingle;!function(e){function t(e){var t=e.values;if(t){var r,n=!!t.source;if(n){r=i(t.grouped());for(var o=0,a=void 0,u=0,s=t.length;s>u;u++){var c=t[u];if(!a||c.identity!==a.identity){var l=r[o];a=l?i(l):l=r[o]={values:null},r[o]=a,a.values=[],o++}a.values.push(c)}}else r=[{values:t}];t.grouped=function(){return r},e.values=t}}e.apply=t}(r=t.DataViewCategoricalEvalGrouped||(t.DataViewCategoricalEvalGrouped={}))}(t=e.data||(e.data={}))}(r||(r={}))},410:function(e,t){var r,i=window.jsCommon,r=window.powerbi;window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){var r,n=i.ArrayExtensions,o=e.Prototype.inheritSingle;!function(r){function i(e,t,r,i){var n=e;return r&&(n=u(n,t,r,i),n=f(n,t,r)),n}function u(e,r,i,n){if(!i)return e;var u=s(r);if(_.isEmpty(u))return e;var f=e.valueSources,d=c(i,u);if(_.isEmpty(f)||l(e.valueSources,d))return e;var v=t.DataViewMetadataColumnUtils.leftJoinMetadataColumnsAndProjectionOrder(f,d,u),h=_.chain(v).filter(function(e){return void 0!==e.projectionOrderIndex}).sortBy(function(e){return e.projectionOrderIndex}).value(),m=o(e);m.rows=p(m.rows,m.valueSources,h);var g=_.map(h,function(e){return e.metadataColumn});return m.valueSources=g,m.columns=a.update(m.columns,g.slice()),n.hierarchyTreesRewritten=!0,m}function s(t){var r=[];return e.DataViewMapping.visitMatrixItems(t.values,{visitRole:function(e){r.push(e)}}),r}function c(e,t){for(var r=[],i=0,n=t;i<n.length;i++){var o=n[i],a=e[o];_.isEmpty(a)||r.push.apply(r,a)}return r}function l(e,t){var r=_.map(e,function(e){return e.index});return n.sequenceEqual(r,t,function(e,t){return e===t})}function p(e,r,i){var n,a=r.length,u=i.length,s=o(e);return s.root=t.DataViewPivotMatrix.cloneTreeExecuteOnLeaf(s.root,function(e){var t=e.values;if(t)if(void 0===n&&(n=Object.keys(e.values).length/a),u>0){for(var r={},s=0;n>s;s++)for(var c=s*a,l=s*u,p=0;u>p;p++){var f=i[p].sourceIndex,d=t[c+f];p!==(d.valueSourceIndex||0)&&(d=o(d),d.valueSourceIndex=p||void 0),r[l+p]=d}e.values=r}else e.values=void 0}),s}function f(t,r,i){var n;e.DataViewMapping.visitMatrixItems(r.rows,{visitRole:function(e,r){n=d(n||t.rows,e,i)}});var a;e.DataViewMapping.visitMatrixItems(r.columns,{visitRole:function(e,r){a=d(a||t.columns,e,i)}});var u;return(n||a)&&(u=o(t),u.rows=n||u.rows,u.columns=a||u.columns),u||t}function d(e,r,i){var n,a=i[r],u=a&&a.length>=2;if(u&&!_.isEmpty(e.levels))for(var s=e.levels.length-1;s>=0;s--){var c=e.levels[s],l=v(c,r,i);if(!_.isEmpty(l)){void 0===n&&(n=o(e),n.levels=o(e.levels),n.root=t.DataViewMatrixUtils.inheritMatrixNodeHierarchy(e.root,s,!0));var p=o(e.levels[s]);n.levels[s]=h(p,l),m(n.root,s,l)}}return n}function v(e,r,i){var n,o=e.sources;if(o&&o.length>=2){var a=_.uniq(i[r]),u=t.DataViewMetadataColumnUtils.leftJoinMetadataColumnsAndProjectionOrder(o,a,[r]);if(u&&u.length>=2){var s=_.sortBy(u,function(e){return e.projectionOrderIndex});n=_.map(s,function(e,t){var r={originalSourceIndex:e.sourceIndex,newSourceIndex:t};return r})}}return n}function h(e,t){var r=e.sources;e.sources=r.slice(0);for(var i=0,n=t;i<n.length;i++){var o=n[i];e.sources[o.newSourceIndex]=r[o.originalSourceIndex]}return e}function m(e,r,i){var n=_.reduce(i,function(e,t){return e[t.originalSourceIndex]=t,e},{});return t.DataViewMatrixUtils.forEachNodeAtLevel(e,r,function(e){var t=e.levelValues;if(!_.isEmpty(t)){for(var r=_.sortBy(t,function(e){var t=n[e.levelSourceIndex];return t&&t.newSourceIndex}),i=0,a=r.length;a>i;i++){var u=o(r[i]),s=n[u.levelSourceIndex];u.levelSourceIndex=s&&s.newSourceIndex,r[i]=u}e.levelValues=r;var c=_.last(r);e.value!==c.value&&(e.value=c.value),(e.levelSourceIndex||0)!==c.levelSourceIndex&&(e.levelSourceIndex=c.levelSourceIndex)}}),e}r.apply=i}(r=t.DataViewMatrixProjectionOrder||(t.DataViewMatrixProjectionOrder={}));var a;!function(e){function r(e,t){var r,o=e.levels,s=i(o),c=s?_.size(o)>=2:_.size(o)>=1,l=c?t.length>=2:t.length>=1;return r=s?l?n(e,t):a(e):l?u(e,t):e}function i(e){return!_.isEmpty(e)&&_.every(_.last(e).sources,function(e){return e.isMeasure})}function n(e,r){var i=o(e),n=i.levels=o(i.levels),a=n.length-1,u=n[a]=o(n[a]);return u.sources=r,i.root=t.DataViewMatrixUtils.inheritMatrixNodeHierarchy(i.root,a,!0),t.DataViewMatrixUtils.forEachNodeDepthFirst(i.root,function(e){return s(e,a)?(e.children=c(a,r.length,e.isSubtotal),2):1}),i}function a(e){var r=o(e),i=r.levels=o(r.levels),n=i.length-1;return i.splice(n,1),r.root=t.DataViewMatrixUtils.inheritMatrixNodeHierarchy(r.root,n,!0),t.DataViewMatrixUtils.forEachNodeDepthFirst(r.root,function(e){return s(e,n)?(e.children=void 0,2):1}),r}function u(e,r){var i=o(e),n=i.levels=o(i.levels),a={sources:r};n.push(a);var u=n.length-1;return i.root=t.DataViewMatrixUtils.inheritMatrixNodeHierarchy(i.root,u,!0),t.DataViewMatrixUtils.forEachNodeDepthFirst(i.root,function(e){return t.DataViewMatrixUtils.isLeafNode(e)?(e.children=c(u,r.length,e.isSubtotal),2):1}),i}function s(e,t){var r=e.children;return!_.isEmpty(r)&&r[0].level===t}function c(e,t,r){for(var i=[],n=0,o=t;o>n;n++){var a={level:e};n>0&&(a.levelSourceIndex=n),r&&(a.isSubtotal=!0),i.push(a)}return i}e.update=r}(a||(a={}))}(t=e.data||(e.data={}))}(r||(r={}))},411:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){var r,i=e.Prototype.inherit;!function(e){function r(e){var r=e.categorical;if(!r)return null;var n=r.categories;if(!n||1!==n.length)return null;var o=r.values;if(_.isEmpty(o)||o.source)return null;for(var a=n[0],u=a.identity,s=a.values,c=[],l=[],p=0,f=s.length;f>p;p++)for(var d=s[p],v=u[p],h=0,m=o.length;m>h;h++){var g=o[h],y=i(g.source);if(g.identity)return null;y.groupName=d;var w={source:y,values:[g.values[p]],identity:v,min:g.min,max:g.max,subtotal:g.subtotal},x=g.highlights;x&&(w.highlights=[x[p]]),c.push(y),l.push(w)}var b=i(e.metadata);return b.columns=c,o=t.DataViewTransform.createValueColumns(l,a.identityFields,a.source),{metadata:b,categorical:{values:o},matrix:e.matrix}}e.apply=r}(r=t.DataViewPivotCategorical||(t.DataViewPivotCategorical={}))}(t=e.data||(e.data={}))}(r||(r={}))},412:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){var r;!function(t){function r(t,r){r.columnHierarchyRewritten||(t.columns=e.Prototype.inherit(t.columns));var a=t.columns;r.rowHierarchyRewritten||(t.rows=e.Prototype.inherit(t.rows));var u=t.rows;if(!(a.levels.length>1)){var s={level:0},c=a.root.children,l=c.length,p=u.levels.length;if(l>0){var f=0,d=function(e){if(e.values){s.values||(s.values={});for(var t=0;l>t;t++)s.values[f++]=e.values[t];e.values=void 0}if(l>1){e.children||(e.children=[]);for(var r=0;l>r;r++){var i={level:p},n=c[r];i.levelSourceIndex=n.levelSourceIndex,e.isSubtotal&&(i.isSubtotal=!0),e.children.push(i)}}};r.hierarchyTreesRewritten?i(u.root,d):t.columns.root=o(u.root,d)}else r.hierarchyTreesRewritten||(t.columns.root=n(u.root));if(l>1){var v={sources:a.levels[0].sources};u.levels.push(v),a.levels.length=0}if(r.hierarchyTreesRewritten)t.columns.root=u.root,t.rows.root={children:[s]};else{var h=e.Prototype.inherit(t.rows.root);h.children=[s],t.rows.root=h}t.columns.levels=u.levels,t.rows.levels=[]}}function i(e,t){var r=e.children;if(r&&r.length>0)for(var n=0,o=r.length;o>n;n++)i(r[n],t);else t(e)}function n(e){return o(e)}function o(t,r){var i=e.Prototype.inherit(t),n=t.children;if(n&&n.length>0){for(var a=[],u=0,s=n.length;s>u;u++){var c=o(n[u],r);a.push(c)}i.children=a}else r&&r(i);return i}t.apply=r,t.cloneTree=n,t.cloneTreeExecuteOnLeaf=o}(r=t.DataViewPivotMatrix||(t.DataViewPivotMatrix={}))}(t=e.data||(e.data={}))}(r||(r={}))},413:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){function r(e){for(var t=new Array(e),r=0;e>r;r++)t[r]=null;return t}function i(t,r,i){var n=e.Prototype.inherit(t);return n[i]=r[i],n}var n;!function(n){function o(e){if(e.categorical){var t=e.categorical;if(t.categories&&1===t.categories.length&&(!t.values||!t.values.source))return a(e.metadata,t)}}function a(r,i){var n=i.categories[0],o=n.values,a=o.length;if(0!==a){var s=i.values?i.values.grouped()[0].values:[],c=t.createCategoricalDataViewBuilder().withCategories(i.categories).withGroupedValues(u(n,o,a,s)).build();return r=e.Prototype.inherit(r),r.columns=c.metadata.columns,{metadata:r,categorical:c.categorical}}}function u(e,t,n,o){for(var a=r(n),u=o.length,s=[],c=0;n>c;c++){for(var l=[],p=0;u>p;p++){var f=o[p],d=f.highlights,v={values:i(a,f.values,c)};d&&(v.highlights=i(a,d,c)),l.push(v)}s.push(l)}return{groupColumn:{source:e.source,identityFrom:{fields:e.identityFields,identities:e.identity},values:e.values},valueColumns:_.map(o,function(e){return{source:e.source}}),data:s}}n.apply=o}(n=t.DataViewSelfCrossJoin||(t.DataViewSelfCrossJoin={}))}(t=e.data||(e.data={}))}(r||(r={}))},414:function(e,t){var r,i=window.jsCommon,r=window.powerbi;window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){var r,n=i.ArrayExtensions,o=e.data.DataShapeBindingDataReduction,a=e.Prototype.inheritSingle;!function(r){function i(e,t,r,i){t&&1===t.length&&r.categorical&&r.categorical.dataReductionAlgorithm&&e&&s(e,r)&&(e.Primary.Groupings=[e.Secondary.Groupings[0],e.Primary.Groupings[0]],e.Secondary=void 0,e.DataReduction={Primary:o.createFrom(r.categorical.dataReductionAlgorithm),DataVolume:r.categorical.dataVolume||i})}function u(e){return e&&e.Groupings&&1===e.Groupings.length&&!_.isEmpty(e.Groupings[0].Projections)&&!e.Groupings[0].Subtotal&&_.isEmpty(e.Groupings[0].SuppressedProjections)}function s(e,t){return u(e.Primary)&&u(e.Secondary)&&1===e.Secondary.Groupings[0].Projections.length?!e.DataReduction||!e.DataReduction.Primary&&!e.DataReduction.Secondary:!1}function c(e,r,i,o,a){if(!l(e,r,i,o,a))return e;var u={metadata:{columns:n.copy(e.metadata.columns)}};if(e.single&&(u.single=e.single),e.table&&(u.table=e.table),e.matrix){var s=p(e.matrix);if(!_.isEmpty(s.valueSources)){var c=t.DataViewMatrixUtils.containsCompositeGroup(s.columns);c||(u.categorical=f(s,u.metadata.columns))}}return u}function l(t,r,i,n,o){if(_.isEmpty(r)||!t||_.isEmpty(o))return!1;var a=_.filter(o,function(t){return!e.DataViewMapping.getRegressionUsage(t)});if(1!==a.length)return!1;var u=a[0].categorical;if(!u)return!1;var s=t.matrix;if(!s)return!1;if(!s.rows||!s.rows.levels||2!==s.rows.levels.length)return!1;var c=[],l=[],p=function(t,r){var o=n[t];if(o)for(var a=0,u=o.all();a<u.length;a++){var s=u[a];i[s.queryRef]===e.VisualDataRoleKind.Grouping&&r.push(s.queryRef)}};if(e.DataViewMapping.visitCategoricalCategories(u.categories,{visitRole:function(e){p(e,c)}}),e.DataViewMapping.visitGrouped(u.values,{visitRole:function(e){p(e,l)}}),e.DataViewMapping.visitCategoricalValues(u.values,{visitRole:function(e){p(e,l)}}),_.isEmpty(c)||_.isEmpty(l))return!1;for(var f=0,d=s.columns.levels;f<d.length;f++)for(var v=d[f],h=0,m=v.sources;h<m.length;h++){var g=m[h];if(!g.isMeasure)return!1}return!0}function p(e){var t=e.rows,r=t.root,i=r.children,n=[],o=t.levels[0],u=r.childIdentityFields,s={},c=[],l=t.levels[1],p=_.isEmpty(i)?void 0:i[0].childIdentityFields,f=e.valueSources.length,d=function(e){var t=s[e.key];return t};if(i)for(var v=function(e){var t=e.identity.key,r=s[t];void 0===r&&(r=c.length,s[t]=r,c.push(e))},h=0,m=i;h<m.length;h++){var g=m[h];n.push(g);for(var y=0,w=g.children;y<w.length;y++){var x=w[y];v(x)}}for(var b=new Array(c.length),S=0;S<n.length;++S)for(var g=i[S],E=0,D=g.children;E<D.length;E++){var x=D[E],C=d(x.identity);b[C]||(b[C]=new Array(n.length)),b[C][S]=x.values}var T={root:{children:_.map(n,function(e){var t=a(e);return t.level=0,t.children=void 0,t.childIdentityFields=void 0,t}),childIdentityFields:u},levels:[o]};if(f>0){for(var V=_.map(e.columns.root.children,function(e){var t={level:1};return e.levelSourceIndex&&(t.levelSourceIndex=e.levelSourceIndex),t}),C=0;C<T.root.children.length;++C)T.root.children[C].children=V;T.levels.push(e.columns.levels[0])}var M={root:{children:_.map(c,function(e){var t=a(e);return t.level=0,t.children=void 0,t.childIdentityFields=void 0,t}),childIdentityFields:p},levels:[l]};if(f>0)for(var C=0;C<c.length;++C){for(var R=M.root.children[C],F={},S=0;S<n.length;++S)for(var P=b[C]&&b[C][S],I=0;f>I;++I){var A=S*f+I;F[A]=P?P[I]:0===I?{value:null}:{value:null,valueSourceIndex:I}}R.values=F}var j={rows:M,columns:T,valueSources:e.valueSources};return j}function f(e,t){for(var r=e.columns.root.children.length,i=e.valueSources,n=i.length,o=d(e),a=[],u=0;r>u;++u){var s=e.columns.root.children[u],c={values:[],identity:s.identity,name:s.value||null};a.push(c);for(var l=0;n>l;++l){var p=i[l],f={};for(var v in p)f[v]=p[v];f.groupName=c.name,t.push(f);var h={source:f,values:[],identity:c.identity};c.values.push(h);for(var m=l+u*n,g=0,y=e.rows.root.children;g<y.length;g++){var w=y[g],x=w.values[m].value;h.values.push(x)}}}for(var b=[],S=0,E=a;S<E.length;S++)for(var c=E[S],l=0;n>l;++l)b.push(c.values[l]);b.grouped=function(){return a},b.identityFields=e.columns.root.childIdentityFields,b.source=e.columns.levels[0].sources[0];var D={categories:o,values:b};return D}function d(e){for(var t=_.map(e.rows.root.children,function(e){return e.identity}),r=e.rows.root.childIdentityFields,i=e.rows.levels[0].sources,n=[],o=0,a=i.length;a>o;o++){var u=_.map(e.rows.root.children,function(e){var t=e.levelValues;return void 0!==t?t[o].value:void 0});n.push({source:i[o],values:u,identity:t,identityFields:r})}return n}r.pivotBinding=i,r.unpivotResult=c}(r=t.DataViewPivotCategoricalToPrimaryGroups||(t.DataViewPivotCategoricalToPrimaryGroups={}))}(t=e.data||(e.data={}))}(r||(r={}))},415:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){var r;!function(r){function i(r,i,o,a,u,s){var c=u.selects,l=u.roles&&u.roles.activeItems,p=_.isEmpty(c)?{}:t.DataViewSelectTransform.createRoleKindFromMetadata(c,r),f=t.DataViewSelectTransform.projectionsFromSelects(c,l),d=e.DataViewAnalysis.chooseDataViewMappings(f,o,p,i,u.objects),v=d.supportedMappings,h={queryDataViewMetadata:r,objectDescriptors:i,dataRoles:a,transforms:u,colorAllocatorFactory:s,selectTransforms:c,projectionOrdering:u.roles&&u.roles.ordering,projectionActiveItems:l,roleKindByQueryRef:p,queryProjectionsByRole:f,visualCapabilitiesRoleMappings:o,visualCapabilitiesDataViewKinds:n(o),applicableRoleMappings:v,applicableDataViewKinds:n(v)};return h}function n(e){if(!e)return 0;for(var t=0,r=0,i=e;r<i.length;r++){var n=i[r];n.categorical&&(t|=1),n.matrix&&(t|=2),n.single&&(t|=4),n.table&&(t|=8),n.tree&&(t|=16)}return t}r.create=i}(r=t.DataViewTransformContext||(t.DataViewTransformContext={}))}(t=e.data||(e.data={}))}(r||(r={}))},416:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){var r,i=e.data.DataViewMetadataColumnUtils,n=e.Prototype.inheritSingle;!function(r){function o(t,r,i,o){var a,s=_.chain(r).filter(function(t){return t.categorical&&!e.DataViewMapping.getRegressionUsage(t)}).map(function(e){return e.categorical}).value();if(t.categorical&&s.length>=1){var c=t.categorical,p=u(c,s,i,o);p=l(p||c,o),p&&(a=n(t),a.categorical=p)}return a||t}function a(e,t,r){if(t){var i=_.reduce(e,function(e,i){var n=_.filter(t[i],function(e){return!r||r[e]});return e.push.apply(e,n),e},[]);return i}}function u(t,r,i,n){if(!_.isEmpty(t.categories)){var o=e.DataViewMapping.getRolesIfSameInAllCategoricalMappings(r,e.DataViewMapping.getAllRolesInCategories);if(o){var u=a(o,i,n);if(u)return s(t,u,o)}}}function s(e,r,o){var a=e.categories;if(!_.isEmpty(a)&&!c(a,r)){var u=_.map(a,function(e){return e.source}),s=i.leftJoinMetadataColumnsAndProjectionOrder(u,r,o),l=_.chain(s).filter(function(e){return void 0!==e.projectionOrderIndex}).sortBy(function(e){return e.projectionOrderIndex}).value(),p=_.map(l,function(e){return a[e.sourceIndex]}),f=n(e);if(_.isEmpty(p))f.categories=void 0;else{var d=t.DataViewCategoricalUtils.getCategoriesDataViewObjects(a);d&&(p=t.DataViewCategoricalUtils.setCategoriesDataViewObjects(p,d)||p),f.categories=p}return f}}function c(e,t){return e.length===t.length&&_.every(t,function(t,r){return e[r].source.index===t})}function l(e,t){if(e.values&&t){var r=n(e);return p(r,t),r}}function p(e,r){var i=e.values;if(i){var n=void 0;i.source&&(r[i.source.index]||(i.source=void 0,i.identityFields=void 0,n=!0));for(var o=i.length-1;o>=0;o--)r[i[o].source.index]||(i.splice(o,1),n=!0);if(n){var a=!!i.source,u=i.length>0;a||u?t.DataViewCategoricalEvalGrouped.apply(e):e.values=void 0}}}r.apply=o}(r=t.DataViewCategoricalProjectionOrder||(t.DataViewCategoricalProjectionOrder={}))}(t=e.data||(e.data={}))}(r||(r={}))},417:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){function t(e){return function(t){return t.get(e)}}function r(e,t){return"function"==typeof e?e(t):"string"==typeof e?e:void 0}e.createDisplayNameGetter=t,e.getDisplayName=r}(t=e.data||(e.data={}))}(r||(r={}))},418:function(e,t){window.jsCommon,window.powerbi,window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft},419:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){!function(e){e[e.Year=0]="Year",e[e.Month=1]="Month",e[e.Week=2]="Week",e[e.Day=3]="Day",e[e.Hour=4]="Hour",e[e.Minute=5]="Minute",e[e.Second=6]="Second",e[e.Millisecond=7]="Millisecond"}(e.DateTimeUnit||(e.DateTimeUnit={}));e.DateTimeUnit}(r||(r={}))},420:function(e,t){var r,r=(window.jsCommon,window.powerbi),i=(window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft,this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});!function(e){var t;!function(e){var t;!function(e){function t(e){var t=n.visit(e,l.instance);return t}function r(t){return e.aggregate(i(t),t.aggregate)}function i(t){return e.columnRef(o(t),t.name)}function o(t){return e.entity(t.schema,t.entity,t.entityVar)}function a(t){return e.aggregate(o(t),t.aggregate)}function u(t){return e.aggregate(s(t),t.aggregate)}function s(t){return e.hierarchyLevel(c(t),t.level)}function c(t){return e.hierarchy(o(t),t.name)}e.fieldExpr=t,e.fromColumnAggr=r,e.fromColumn=i,e.fromEntity=o,e.fromEntityAggr=a,e.fromHierarchyLevelAggr=u,e.fromHierarchyLevel=s,e.fromHierarchy=c;var l=function(){function t(){}return t.prototype.visitColumn=function(e){return i(e)},t.prototype.visitColumnAggr=function(e){return r(e)},t.prototype.visitColumnHierarchyLevelVariation=function(t){return e.propertyVariationSource(this.visitEntity(t.source),t.source.name,t.level.name)},t.prototype.visitEntity=function(e){return o(e)},t.prototype.visitEntityAggr=function(e){return a(e)},t.prototype.visitHierarchy=function(e){return c(e)},t.prototype.visitHierarchyLevel=function(e){return s(e);
},t.prototype.visitHierarchyLevelAggr=function(e){return u(e)},t.prototype.visitMeasure=function(t){return e.measureRef(this.visitEntity(t),t.name)},t.prototype.visitPercentile=function(t){var r=e.fieldExpr(t.arg);return e.percentile(r,t.k,t.exclusive)},t.prototype.visitPercentOfGrandTotal=function(t){var r=e.fieldExpr(t.baseExpr);return e.arithmetic(r,e.scopedEval(r,[]),3)},t.prototype.visitSelectRef=function(t){return e.selectRef(t.expressionName)},t.instance=new t,t}()}(t=e.SQExprBuilder||(e.SQExprBuilder={}));var r;!function(e){function t(e,t){return e.accept(new o(t))}e.asFieldPattern=t}(r=e.SQExprConverter||(e.SQExprConverter={}));var n,o=function(r){function n(e){r.call(this),this.schema=e}return i(n,r),n.prototype.visitColumnRef=function(e){var t=e.source.accept(a.instance);if(t&&t.entity){var r=t.entity;return r.name=e.ref,{column:r}}},n.prototype.visitMeasureRef=function(e){var t=e.source.accept(a.instance);if(t&&t.entity){var r=t.entity;return r.name=e.ref,{measure:r}}},n.prototype.visitEntity=function(e){var t={schema:e.schema,entity:e.entity};return e.variable&&(t.entityVar=e.variable),{entity:t}},n.prototype.visitAggr=function(e){var t=e.arg.accept(this);if(t&&t.column){var r=t.column;return r.aggregate=e.func,{columnAggr:r}}if(t&&t.columnAggr){var r=t.columnAggr;return r.aggregate=e.func,{columnAggr:r}}if(t&&t.hierarchyLevel){var r=t.hierarchyLevel;return r.aggregate=e.func,{hierarchyLevelAggr:r}}var i=e.arg.accept(a.instance);if(i&&i.entity){var r=i.entity;return r.aggregate=e.func,{entityAggr:r}}},n.prototype.visitPercentile=function(e){return{percentile:{arg:e.arg.accept(this),k:e.k,exclusive:e.exclusive}}},n.prototype.visitHierarchy=function(e){var t=e.arg.accept(a.instance);if(t&&t.entity){var r=t.entity;return r.name=e.hierarchy,{hierarchy:r}}},n.prototype.visitHierarchyLevel=function(e){var t=e.arg.accept(u.instance);if(t){var r;if(t.hierarchy&&(r={entity:t.hierarchy.entity,schema:t.hierarchy.schema,name:t.hierarchy.name,level:e.level}),t.variation){if(this.schema){var i=t.variation,n=this.schema.schema(t.variation.column.schema).findTargetEntityOfVariation(r.entity,i.column.name,i.variationName);n&&(r.entity=n.name)}return{columnHierarchyLevelVariation:{source:{entity:t.variation.column.entity,schema:t.variation.column.schema,name:t.variation.column.name},level:r,variationName:t.variation.variationName}}}return{hierarchyLevel:r}}},n.prototype.visitArithmetic=function(r){var i={percentOfGrandTotal:{baseExpr:r.left.accept(this)}};return e.SQExpr.equals(r,t.fieldExpr(i))?i:void 0},n.prototype.visitSelectRef=function(e){return{selectRef:{expressionName:e.expressionName}}},n}(e.DefaultSQExprVisitor),a=function(t){function r(){t.apply(this,arguments)}return i(r,t),r.prototype.visitEntity=function(e){var t={schema:e.schema,entity:e.entity};return e.variable&&(t.entityVar=e.variable),{entity:t}},r.prototype.visitPropertyVariationSource=function(t){var r=t.arg;if(r instanceof e.SQEntityExpr){var i={schema:r.schema,entity:r.entity,name:t.property};return r.variable&&(i.entityVar=r.variable),{variation:{column:i,variationName:t.name}}}},r.instance=new r,r}(e.DefaultSQExprVisitor),u=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype.visitHierarchy=function(e){var t,r,i=e.arg.accept(a.instance);return i.variation?(t={name:e.hierarchy,schema:i.variation.column.schema,entity:i.variation.column.entity},r=i.variation):t={name:e.hierarchy,schema:i.entity.schema,entity:i.entity.entity},{hierarchy:t,variation:r}},t.instance=new t,t}(e.DefaultSQExprVisitor);!function(i){function n(t,i){var n=t instanceof e.SQExpr?r.asFieldPattern(t):t;return n.column?o(n.column,i):n.columnAggr?a(n.columnAggr,i):n.columnHierarchyLevelVariation?u(n.columnHierarchyLevelVariation,i):n.entity?s(n.entity,i):n.entityAggr?c(n.entityAggr,i):n.hierarchy?l(n.hierarchy,i):n.hierarchyLevel?p(n.hierarchyLevel,i):n.hierarchyLevelAggr?f(n.hierarchyLevelAggr,i):n.measure?d(n.measure,i):n.percentile?h(n.percentile,i):n.percentOfGrandTotal?m(n.percentOfGrandTotal,i):n.selectRef?v(n.selectRef,i):void 0}function o(e,t){return t.visitColumn(e)}function a(e,t){return t.visitColumnAggr(e)}function u(e,t){return t.visitColumnHierarchyLevelVariation(e)}function s(e,t){return t.visitEntity(e)}function c(e,t){return t.visitEntityAggr(e)}function l(e,t){return t.visitHierarchy(e)}function p(e,t){return t.visitHierarchyLevel(e)}function f(e,t){return t.visitHierarchyLevelAggr(e)}function d(e,t){return t.visitMeasure(e)}function v(e,t){return t.visitSelectRef(e)}function h(e,t){return t.visitPercentile(e)}function m(e,t){return t.visitPercentOfGrandTotal(e)}function g(e){return t.columnRef(t.entity(e.schema,e.entity,e.entityVar),e.name)}function y(e){return n(e,M.instance)}function w(e){return n(e,R.instance)}function x(e){return void 0!==(e.column||e.columnAggr||e.measure)}function b(e){return i.visit(e,P.instance)}function S(e){var t=e.hierarchy;return t?t.name:void 0}function E(e){return e.columnHierarchyLevelVariation?e.columnHierarchyLevelVariation.source:e.column||e.measure||e.columnAggr}function D(e){var t=b(e);return t?t:T(e).entity}function C(e){var t=i.toFieldExprEntityItemPattern(e);return t.schema}function T(e){return i.visit(e,F.instance)}function V(e){return i.visit(e,F.instance)}i.visit=n,i.toColumnRefSQExpr=g,i.getAggregate=y,i.isAggregation=w,i.hasFieldExprName=x,i.getPropertyName=b,i.getHierarchyName=S,i.getColumnRef=E,i.getFieldExprName=D,i.getSchema=C,i.toFieldExprEntityPattern=T,i.toFieldExprEntityItemPattern=V;var M=function(){function r(){}return r.prototype.visitColumn=function(e){},r.prototype.visitColumnAggr=function(e){return e.aggregate},r.prototype.visitColumnHierarchyLevelVariation=function(e){},r.prototype.visitEntity=function(e){},r.prototype.visitEntityAggr=function(e){return e.aggregate},r.prototype.visitHierarchy=function(e){},r.prototype.visitHierarchyLevel=function(e){},r.prototype.visitHierarchyLevelAggr=function(e){return e.aggregate},r.prototype.visitMeasure=function(e){},r.prototype.visitSelectRef=function(e){},r.prototype.visitPercentile=function(e){},r.prototype.visitPercentOfGrandTotal=function(r){return e.SQExprInfo.getAggregate(t.fieldExpr(r.baseExpr))},r.instance=new r,r}(),R=function(){function e(){}return e.prototype.visitColumn=function(e){return!1},e.prototype.visitColumnAggr=function(e){return!0},e.prototype.visitColumnHierarchyLevelVariation=function(e){return!1},e.prototype.visitEntity=function(e){return!1},e.prototype.visitEntityAggr=function(e){return!0},e.prototype.visitHierarchy=function(e){return!1},e.prototype.visitHierarchyLevel=function(e){return!1},e.prototype.visitHierarchyLevelAggr=function(e){return!0},e.prototype.visitMeasure=function(e){return!0},e.prototype.visitSelectRef=function(e){return!1},e.prototype.visitPercentile=function(e){return!0},e.prototype.visitPercentOfGrandTotal=function(e){return!0},e.instance=new e,e}(),F=function(){function e(){}return e.prototype.visitColumn=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitColumnAggr=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitColumnHierarchyLevelVariation=function(t){return e.toEntityItemExprPattern(t.source)},e.prototype.visitEntity=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitEntityAggr=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitHierarchy=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitHierarchyLevel=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitHierarchyLevelAggr=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitMeasure=function(t){return e.toEntityItemExprPattern(t)},e.prototype.visitSelectRef=function(e){},e.prototype.visitPercentile=function(e){return i.visit(e.arg,this)},e.prototype.visitPercentOfGrandTotal=function(e){return i.visit(e.baseExpr,this)},e.toEntityItemExprPattern=function(e){var t={schema:e.schema,entity:e.entity};return e.entityVar&&(t.entityVar=e.entityVar),t},e.instance=new e,e}(),P=function(){function e(){}return e.prototype.visitColumn=function(e){return e.name},e.prototype.visitColumnAggr=function(e){return e.name},e.prototype.visitColumnHierarchyLevelVariation=function(e){},e.prototype.visitEntity=function(e){},e.prototype.visitEntityAggr=function(e){},e.prototype.visitHierarchy=function(e){},e.prototype.visitHierarchyLevel=function(e){},e.prototype.visitHierarchyLevelAggr=function(e){},e.prototype.visitMeasure=function(e){return e.name},e.prototype.visitSelectRef=function(e){},e.prototype.visitPercentile=function(e){return i.visit(e.arg,this)},e.prototype.visitPercentOfGrandTotal=function(e){return i.visit(e.baseExpr,this)},e.instance=new e,e}()}(n=e.FieldExprPattern||(e.FieldExprPattern={}))}(t=e.data||(e.data={}))}(r||(r={}))},421:function(e,t){var r,i=window.jsCommon,r=window.powerbi;window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){function r(e,t){if(!t||0===t.length)return{dataView:e,isValid:!0};if(e)for(var r=0,i=t;r<i.length;r++){var s=i[r];if(l(e,s))return{dataView:e,isValid:!0};if(s.categorical&&e.categorical)return n(e,s);if(s.tree&&e.tree)return a(e,s.tree);if(s.single&&e.single)return o(e,s.single);if(s.table&&e.table)return u(e,s.table)}return{isValid:!1}}function n(t,r){var i=r.categorical,n=t.categorical;if(!n)return{isValid:!1};var o;if(i.rowCount&&(o=i.rowCount.supported,o&&o.max)){var a=void 0,u=n.categories,s=o.max,c=void 0;if(u)for(var l=0,f=u.length;f>l;l++){var d=u[l];if(c=d.values.length,void 0!==s&&c>s){var v=T.range(d.values,0,s-1);a=a||{categories:[]},a.categories.push({source:d.source,values:v})}}if(n.values&&n.values.length>0&&s&&(c||(c=n.values[0].values.length),void 0!==s&&c>s)){a=a||{},a.values=e.data.DataViewTransform.createValueColumns();for(var l=0,f=n.values.length;f>l;l++){var h=n.values[l],m={source:h.source,values:T.range(h.values,0,s-1)};void 0!==h.min&&(m.min=h.min),void 0!==h.max&&(m.max=h.max),void 0!==h.subtotal&&(m.subtotal=h.subtotal),a.values.push(m)}}a&&(t={metadata:t.metadata,categorical:a})}return p(t,r)?{dataView:t,isValid:!0}:null}function o(e,t){return e.single?{dataView:e,isValid:!0}:{isValid:!1}}function a(e,t){var r=e.metadata;return null==m(s(r.columns),t.depth)?{dataView:e,isValid:!0}:{isValid:!1}}function u(e,t){return e.table?{dataView:e,isValid:!0}:{isValid:!1}}function s(e){for(var t=0,r=0,i=e.length;i>r;r++)e[r].isMeasure||++t;return t}function c(e){for(var t=0,r=0,i=e.length;i>r;r++)e[r].isMeasure&&++t;return t}function l(e,t,r){return t&&e?t.scriptResult&&!h(e.scriptResult,t.scriptResult)?!1:t.categorical&&!p(e,t.categorical,r)?!1:t.tree&&!d(e,t.tree)?!1:t.single&&!f(e.single,t.single)?!1:!t.table||v(e.table,t.table,r):!1}function p(e,t,r){var i=e.categorical;if(!i)return!1;if(t.rowCount){var n=t.rowCount.supported;if(r&&t.rowCount.preferred&&(n=t.rowCount.preferred),n){var o=0;if(i.values&&i.values.length?o=i.values[0].values.length:i.categories&&i.categories.length&&(o=i.categories[0].values.length),null!=m(o,n))return!1}}return!0}function f(e,t){return!!e}function d(e,t){var r=e.metadata;return null==m(s(r.columns),t.depth)}function v(e,t,r){if(!e)return!1;if(t.rowCount){var i=t.rowCount.supported;if(r&&t.rowCount.preferred&&(i=t.rowCount.preferred),i){var n=0;if(e.rows&&e.rows.length&&(n=e.rows.length),null!=m(n,i))return!1}}return!0}function h(e,t){return e?!!e.imageBase64:!1}function m(e,t,r){return t?!r&&void 0!==t.min&&t.min>e?M.conditionRangeTooSmall:void 0!==t.max&&t.max<e?M.conditionRangeTooLarge:void 0:void 0}function g(t,r,i,n){if(t&&void 0!==t.kind){var o=t.kind,a=i[r];if(a)for(var u=a.all(),s=0,c=u;s<c.length;s++){var l=c[s];if(n[l.queryRef]!==o)switch(o){case e.VisualDataRoleKind.Measure:return M.conditionKindExpectedMeasure;case e.VisualDataRoleKind.Grouping:return M.conditionKindExpectedGrouping;case e.VisualDataRoleKind.GroupingOrMeasure:return M.conditionKindExpectedGroupingOrMeasure}}}}function y(e,t,r,i,n){var o=[],a=[];if(!_.isEmpty(t))for(var u=0,s=t.length;s>u;u++){var c=t[u],l=c.conditions,p=c.requiredProperties,f=x(p,i,n),d=[];if(_.isEmpty(l))d.push({});else for(var v=0,h=l.length;h>v;v++){var m=l[v],g=w(e,m,r);if(_.isEmpty(g))d.push(m);else for(var y=0,b=g;y<b.length;y++){var S=b[y];S.mappingIndex=u,S.conditionIndex=v,a.push(S)}}if(!_.isEmpty(d)&&f){var E=_.cloneDeep(c),D=_.filter(d,function(e){return Object.keys(e).length>0});_.isEmpty(D)||(E.conditions=D),o.push(E)}}return{supportedMappings:T.emptyToNull(o),mappingErrors:T.emptyToNull(a)}}function w(e,t,r){for(var i=Object.keys(t),n=[],o=0,a=i.length;a>o;o++){var u=i[o],s=e[u]&&!_.isEmpty(e[u].activeProjectionRefs),c=t[u],l=b(u,e,s),p=m(l,c);null!=p&&n.push({code:p,roleName:u});var f=g(c,u,e,r);null!=f&&n.push({code:f,roleName:u})}return n}function x(t,r,i){if(_.isEmpty(t))return!0;if(!r||!i)return!1;var n=e.data.createStaticEvalContext();return _.every(t,function(t){var o=null,a=r[t.objectName];a&&(o=a.properties[t.propertyName]);var u=V.getValue(i,t,null);return o&&u?e.data.DataViewObjectEvaluator.evaluateProperty(n,o,u):!1})}function b(e,t,r){var i=t[e];return i?r?1:i.all().length:0}function S(t,r){if(t&&r&&t.categorical&&r.categorical){var i=t.categorical.categories,n=r.categorical.categories;if(i&&n&&i.length===n.length){for(var o=0,a=i.length;a>o;o++){var u=i[o].identity,s=n[o].identity,c=E(u);if(c!==E(s))return!1;for(var l=0;c>l;l++)if(!e.DataViewScopeIdentity.equals(u[l],s[l]))return!1}return!0}}return!1}function E(e){return e?e.length:0}function D(e,t){return e||t?e&&t?e.displayName!==t.displayName?!1:e.queryName!==t.queryName?!1:e.isMeasure!==t.isMeasure?!1:e.type!==t.type?!1:e.sort===t.sort:!1:!0}function C(e,r){if(!e&&!r)return!0;if(!e||!r)return!1;var i=e.columns.length,n=r.columns.length;if(i!==n)return!1;for(var o=0;n>o;o++)if(!t.areMetadataColumnsEquivalent(e.columns[o],r.columns[o]))return!1;return!0}var T=i.ArrayExtensions,V=e.data.DataViewObjectDefinitions;!function(e){e[e.conditionRangeTooLarge=0]="conditionRangeTooLarge",e[e.conditionRangeTooSmall=1]="conditionRangeTooSmall",e[e.conditionKindExpectedMeasure=2]="conditionKindExpectedMeasure",e[e.conditionKindExpectedGrouping=3]="conditionKindExpectedGrouping",e[e.conditionKindExpectedGroupingOrMeasure=4]="conditionKindExpectedGroupingOrMeasure"}(t.DataViewMappingMatchErrorCode||(t.DataViewMappingMatchErrorCode={}));var M=t.DataViewMappingMatchErrorCode;t.validateAndReshape=r,t.countGroups=s,t.countMeasures=c,t.supports=l,t.validateRange=m,t.chooseDataViewMappings=y,t.getPropertyCount=b,t.hasSameCategoryIdentity=S,t.areMetadataColumnsEquivalent=D,t.isMetadataEquivalent=C}(t=e.DataViewAnalysis||(e.DataViewAnalysis={}))}(r||(r={}))},422:function(e,t){var r,i=window.jsCommon,r=window.powerbi;window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){var t,r=i.ArrayExtensions,n=i.Lazy;!function(e){function t(e){return new o(e)}function i(e,t){return e.key&&t.key&&e.key===t.key&&r.sequenceEqual(e.roles,t.roles,function(e,t){return e===t})}e.fromRoles=t,e.equals=i;var o=function(){function e(e){var t=this;this._roles=e,this._key=new n(function(){return JSON.stringify(t.roles)})}return Object.defineProperty(e.prototype,"roles",{get:function(){return this._roles},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this._key.getValue()},enumerable:!0,configurable:!0}),e}()}(t=e.DataViewRoleWildcard||(e.DataViewRoleWildcard={}))}(t=e.data||(e.data={}))}(r||(r={}))},423:function(e,t){var r,i=window.jsCommon,r=window.powerbi;window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){var t,r=i.Lazy;!function(t){function i(t,r){var i=e.ScopeIdentityExtractor.getKeys(r.expr);return i?e.SQExprUtils.sequenceEqual(t.exprs,i):!1}function n(t,r){return t.key===r.key&&e.SQExprUtils.sequenceEqual(t.exprs,r.exprs)}function o(e){return new a(e)}t.matches=i,t.equals=n,t.fromExprs=o;var a=function(){function t(t){this._exprs=t,this._key=new r(function(){return e.SQExprShortSerializer.serializeArray(t)})}return Object.defineProperty(t.prototype,"exprs",{get:function(){return this._exprs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this._key.getValue()},enumerable:!0,configurable:!0}),t}()}(t=e.DataViewScopeWildcard||(e.DataViewScopeWildcard={}))}(t=e.data||(e.data={}))}(r||(r={}))},424:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){function t(){return new r}e.createColorAllocatorCache=t;var r=function(){function e(){this.cache=[]}return e.prototype.get=function(e){for(var t=0,r=this.cache;t<r.length;t++){var i=r[t];if(i.key===e)return i.allocator}},e.prototype.register=function(e,t){return this.cache.push({key:e,allocator:t}),this},e}()}(t=e.data||(e.data={}))}(r||(r={}))},425:function(e,t){window.jsCommon,window.powerbi,window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft},426:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){var r,i=e.DataViewMapping;!function(r){function n(e){var t=e.visualDataViews,r=e.dataRoles,n=e.objectDescriptors,o=e.objectDefinitions,a=e.colorAllocatorFactory,u=e.transformSelects,s=e.applicableDataViewMappings,c=e.roleKindByQueryRef,l=e.queryProjectionsByRole;if(!_.isEmpty(t)&&u){if(!c||!l||_.isEmpty(s)||!n||!o)return t;var p=_.find(s,function(e){return!!i.getRegressionUsage(e)});if(p){for(var f=[],d=0,v=t;d<v.length;d++){var h=v[d],m=this.linearRegressionTransform(h,r,p,n,o,a);m&&f.push(m)}_.isEmpty(f)||t.push.apply(t,f)}}return t}function o(t,r,n,o,s,c){if(t.categorical){var l=u(0,t.categorical,r),p=u(1,t.categorical,r);if(!_.isEmpty(l)&&!_.isEmpty(p)){var d=l[0].source,g=p[0].source,y=!0,w=i.getRegressionUsage(n);if(w&&t.metadata.objects){var x=w.combineSeries;x&&(y=e.DataViewObjects.getValue(t.metadata.objects,x,!0))}var b=v(l,p,y,!1),S=a(b);if(S){var E,D=S.xMin,C=S.xMax,T=m(p)||m(l);if(T){var V=v(l,p,y,!0);E=a(V),E?(D=_.min([D,E.xMin]),C=_.max([C,E.xMax])):T=!1}for(var M=[],R=0,F=S.lineDefs;R<F.length;R++){var P=F[R];M.push(f(P,+D,+C))}var I;if(T){I=[];for(var A=0,j=E.lineDefs;A<j.length;A++){var P=j[A];I.push(f(P,+D,+C))}}var N;if(y)N=["combinedRegressionSeries"];else if(t.categorical.values.source){var O=t.categorical.values.grouped();N=_.map(O,function(e){return e.name})}else N=_.map(p,function(e){return e.source.queryName});var Q=h(d,g,N,[D,C],M,I,t,n,o,s,c);return Q}}}}function a(e){for(var t,r,i=[],n=0,o=e;n<o.length;n++){var a=o[n],u=a.xValues,s=a.yValues;if(_.isEmpty(u)||_.isEmpty(s))return;var f=c(u);if(!f)return;var d=c(s);if(!d)return;var v=l(u,s),h=v.xValues[0],m=v.xValues[v.xValues.length-1],g=p(v.xValues,v.yValues);t=_.min([t,h]),r=_.max([r,m]),i.push(g)}return{lineDefs:i,xMin:t,xMax:r}}function u(e,t,r){var i=s(e,t.values,r);if(!_.isEmpty(i))return i;var n=t.categories;if(!_.isEmpty(n)){var o=n[0];return i=s(e,[o],r),_.isEmpty(i)?void 0:i}}function s(e,t,r){return _.isEmpty(t)?void 0:_.filter(t,function(t){var i=function(i){if(!t.source.roles[i])return"continue";var n=_.find(r,function(e){return e.name===i});return n&&n.cartesianKind===e?{value:!0}:void 0};for(var n in t.source.roles){var o=i(n);if("object"==typeof o)return o.value}return!1})}function c(e){var t=_.find(e,function(e){return null!=e});if(null!=t){var r=typeof t;if(!_.some(e,function(e){return null!=e&&typeof e!==r}))return r}}function l(e,t){var r=_.zip(e,t),i=_.chain(r).filter(function(e){return null!=e[0]&&null!=e[1]}).sortBy(function(e){return e[0]}).unzip().value(),n=i[0],o=i[1];return{xValues:n,yValues:o}}function p(e,t){var r=_.sum(e)/e.length,i=_.sum(t)/t.length,n=_.chain(e).map(function(e){return Math.pow(e-r,2)}).sum(),o=_.chain(e).map(function(e,n){return(e-r)*(t[n]-i)}).sum(),a=o/n,u=i-r*a;return{slope:a,intercept:u}}function f(e,t,r){return[t*e.slope+e.intercept,r*e.slope+e.intercept]}function d(e,t){if(t){var r=e;if(r.highlights)return r.highlights}return e.values}function v(e,t,r,i){for(var n=[],o=_.map(e,function(e){return d(e,i)}),a=_.map(t,function(e){return d(e,i)}),u=e.length>1,s=0;s<a.length;s++){var c=u?o[s]:o[0],l=a[s];r&&n.length>0?(n[0].xValues=n[0].xValues.concat(c),n[0].yValues=n[0].yValues.concat(l)):n.push({xValues:c,yValues:l})}return n}function h(e,i,n,o,a,u,s,c,l,p,f){var d,v,h=c.categorical.categories["for"]["in"],m=c.categorical.values.group;if(m&&!_.isEmpty(m.select)&&(d=m.select[0]["for"]?m.select[0]["for"]["in"]:m.select[0].bind.to,v=m.by),d&&v){var w=(T={},T[h]=!0,T),x=(V={},V[d]=!0,V),b=(M={},M[v]=!0,M),S=[];for(var E in a){var D={values:a[E]};u&&(D.highlights=u[E]),S.push([D])}var C=t.createCategoricalDataViewBuilder().withCategory({source:{displayName:e.displayName,queryName:g,type:e.type,isMeasure:!1,roles:w},values:o,identityFrom:{fields:[t.SQExprBuilder.columnRef(t.SQExprBuilder.entity("s","RegressionEntity"),"RegressionCategories")]}}).withGroupedValues({groupColumn:{source:{displayName:i.displayName+"Regression",queryName:y,type:i.type,isMeasure:i.isMeasure,roles:b},values:n,identityFrom:{fields:[t.SQExprBuilder.columnRef(t.SQExprBuilder.entity("s","RegressionEntity"),"RegressionSeries")]}},valueColumns:[{source:{displayName:i.displayName,queryName:r.regressionYQueryName,type:i.type,isMeasure:i.isMeasure,roles:x}}],data:S}).build();return t.DataViewTransform.transformObjects(C,1,l,p,[],f),C;var T,V,M}}function m(e){return _.any(e,function(e){var t=e;return null!=t.highlights})}var g="RegressionX",y="RegressionSeries";r.regressionYQueryName="RegressionY",r.run=n,r.linearRegressionTransform=o}(r=t.DataViewRegression||(t.DataViewRegression={}))}(t=e.data||(e.data={}))}(r||(r={}))},427:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){var r;!function(r){function i(e,r){if(_.isEmpty(e))return{};for(var i={},n=0,o=e;n<o.length;n++){var a=o[n];if(a){var u=a.roles;if(u)for(var s in u)if(u[s]){var c=i[s];c||(c=i[s]=new t.QueryProjectionCollection([])),c.all().push({queryRef:a.queryName}),r&&r[s]&&(c.activeProjectionRefs=_.map(r[s],function(e){return e.queryRef}))}}}return i}function n(t,r){for(var i={},n=0,o=r.columns;n<o.length;n++){var a=o[n];if(!(!a.index&&0!==a.index||a.index<0||a.index>=t.length)){var u=t[a.index];if(u){var s=u.queryName;s&&void 0===i[s]&&(i[s]=a.isMeasure?e.VisualDataRoleKind.Measure:e.VisualDataRoleKind.Grouping)}}}return i}r.projectionsFromSelects=i,r.createRoleKindFromMetadata=n}(r=t.DataViewSelectTransform||(t.DataViewSelectTransform={}))}(t=e.data||(e.data={}))}(r||(r={}))},428:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){function t(e,t,r){return new o(e,t,r)}function r(e,t){return i(e.values,t)||i(e.categories,t)}function i(e,t){if(e)for(var r=0,i=e;r<i.length;r++){var n=i[r],o=n.source.roles;if(o&&o[t])return n}}function n(e,t){if(e)for(var r=0,i=e;r<i.length;r++){var n=i[r];if(!n.identity&&n.source.index===t)return n}}e.createCategoricalEvalContext=t;var o=function(){function t(e,t,r){this.colorAllocatorProvider=e,this.dataView=t,this.selectTransforms=r,this.columnsByRole={}}return t.prototype.getColorAllocator=function(e){return this.colorAllocatorProvider.get(e)},t.prototype.getExprValue=function(t){var r=this.index;if(_.isNumber(r)){var i=this.selectTransforms;if(i){var o=e.findSelectIndex(t,i);if(-1!==o){var a=this.dataView,u=n(a.values,o);if(u)return u.values[r]}}}},t.prototype.getRoleValue=function(e){var t=this.columnsByRole,i=t[e];if(i||(i=t[e]=r(this.dataView,e)),i){var n=this.index;return null!=n?i.values[this.index]:void 0}},t.prototype.setCurrentRowIndex=function(e){this.index=e},t}()}(t=e.data||(e.data={}))}(r||(r={}))},429:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){function t(e,t,i){return new r(e,t,i)}e.createTableEvalContext=t;var r=function(){function t(e,t,r){this.colorAllocatorProvider=e,this.dataView=t,this.selectTransforms=r}return t.prototype.getColorAllocator=function(e){return this.colorAllocatorProvider.get(e)},t.prototype.getExprValue=function(t){var r=this.rowIdx;if(null!=r)return e.getExprValueFromTable(t,this.selectTransforms,this.dataView,r)},t.prototype.getRoleValue=function(e){},t.prototype.setCurrentRowIndex=function(e){this.rowIdx=e},t}()}(t=e.data||(e.data={}))}(r||(r={}))},430:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.evaluate=function(e){},e}();e.RuleEvaluation=t}(t=e.data||(e.data={}))}(r||(r={}))},431:function(e,t){var r,r=(window.jsCommon,window.powerbi),i=(window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft,this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});!function(e){var t;!function(e){var t=function(e){function t(t,r){e.call(this),this.inputRole=t,this.allocator=r}return i(t,e),t.prototype.evaluate=function(e){var t=e.getRoleValue(this.inputRole);return void 0!==t?this.allocator.color(t):void 0},t}(e.RuleEvaluation);e.ColorRuleEvaluation=t}(t=e.data||(e.data={}))}(r||(r={}))},432:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.findProperty=function(e,t){var r=this.entities.withName(e);if(r&&!_.isEmpty(r.properties))return r.properties.withName(t)},e.prototype.findHierarchy=function(e,t){var r=this.entities.withName(e);if(r&&!_.isEmpty(r.hierarchies))return r.hierarchies.withName(t)},e.prototype.findHierarchyByVariation=function(e,t,r,i){var n=this.findTargetEntityOfVariation(e,t,r);if(n&&!_.isEmpty(n.hierarchies))return n.hierarchies.withName(i)},e.prototype.findTargetEntityOfVariation=function(e,t,r){var i=this.entities.withName(e);if(i&&!_.isEmpty(i.properties)){var n=i.properties.withName(t);if(n){var o=n.column;if(o&&!_.isEmpty(o.variations)){var a=o.variations.withName(r);return a?a.navigationProperty?a.navigationProperty.targetEntity:i:void 0}}}},e.prototype.findPropertyWithKpi=function(e,t){var r=this.entities.withName(e);if(r&&!_.isEmpty(r.properties))for(var i=0,n=r.properties;i<n.length;i++){var o=n[i];if(o&&o.measure&&o.measure.kpi&&(o.measure.kpi.status===t||o.measure.kpi.goal===t))return o}},e}();e.ConceptualSchema=t,function(e){e[e.None=0]="None",e[e.Address=1]="Address",e[e.City=2]="City",e[e.Company=3]="Company",e[e.Continent=4]="Continent",e[e.Country=5]="Country",e[e.County=6]="County",e[e.Date=7]="Date",e[e.Image=8]="Image",e[e.ImageUrl=9]="ImageUrl",e[e.Latitude=10]="Latitude",e[e.Longitude=11]="Longitude",e[e.Organization=12]="Organization",e[e.Place=13]="Place",e[e.PostalCode=14]="PostalCode",e[e.Product=15]="Product",e[e.StateOrProvince=16]="StateOrProvince",e[e.WebUrl=17]="WebUrl"}(e.ConceptualDataCategory||(e.ConceptualDataCategory={}));e.ConceptualDataCategory}(t=e.data||(e.data={}))}(r||(r={}))},433:function(e,t){var r,i=window.jsCommon,r=window.powerbi;window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t,r=i.StringExtensions,n=e.data.FieldExprPattern;!function(t){function i(e){return e&&1===e.length?e[0].scriptResult:void 0}function o(t){var r=i(t);if(r){var n=t[0].metadata.objects,o=e.DataViewObjects.getValue(n,r.script.source),a=e.DataViewObjects.getValue(n,r.script.provider);return{source:o,provider:a}}}function a(t,r){var n=i(t);if(n&&r){var o=e.data.DataViewObjectDefinitions.getValue(r,n.script.source,null),a=e.data.DataViewObjectDefinitions.getValue(r,n.script.provider,null);return{source:o?o.value:null,provider:a?a.value:null}}}function u(e,t,i){var o={VariableName:"dataset",Columns:[]};if(e&&t&&!_.isEmpty(t)){var a=[],u=[];for(var c in e)for(var l=0,p=e[c].all();l<p.length;l++){var f=p[l],d=t.withName(f.queryRef);if(d){var v={QueryName:d.name,Name:n.visit(d.expr,new s(i))};u.push(v),a.push(v.Name)}}a=r.ensureUniqueNames(a);for(var h=0;h<a.length;h++){var v=u[h];v.Name=a[h]}o.Columns=u}return o}t.findScriptResult=i,t.extractScriptResult=o,t.extractScriptResultFromVisualConfig=a,t.getScriptInput=u;var s=function(){function e(e){this.federatedSchema=e}return e.prototype.visitColumn=function(t){return e.getNameForProperty(t,this.federatedSchema)},e.prototype.visitColumnAggr=function(t){return e.getNameForProperty(t,this.federatedSchema)},e.prototype.visitColumnHierarchyLevelVariation=function(t){return e.getVariationLevelName(t,this.federatedSchema)},e.prototype.visitEntity=function(e){return e.entity},e.prototype.visitEntityAggr=function(e){return e.entity},e.prototype.visitHierarchy=function(t){return e.getNameForHierarchy(t,this.federatedSchema)},e.prototype.visitHierarchyLevel=function(e){},e.prototype.visitHierarchyLevelAggr=function(t){return e.getNameForProperty(t,this.federatedSchema)},e.prototype.visitMeasure=function(t){return e.getNameForProperty(t,this.federatedSchema)},e.prototype.visitSelectRef=function(e){return n.visit(e,this)},e.prototype.visitPercentile=function(e){return n.visit(e.arg,this)},e.prototype.visitPercentOfGrandTotal=function(e){return n.visit(e.baseExpr,this)},e.getNameForHierarchy=function(e,t){var r=t.schema(e.schema),i=r.findHierarchy(e.entity,e.name);return i?i.name:void 0},e.getNameForProperty=function(e,t){var r=t.schema(e.schema),i=r.findProperty(e.entity,e.name);return i?i.name:void 0},e.getVariationLevelName=function(e,t){var r=e.source,i=t.schema(r.schema).findProperty(r.entity,r.name);if(i)for(var n=i.column.variations,o=0,a=n;o<a.length;o++){var u=a[o];if(u.name===e.variationName)for(var s=0,c=u.defaultHierarchy.levels;s<c.length;s++){var l=c[s];if(l.name===e.level.level)return l.column.name}}},e}()}(t=e.ScriptResultUtil||(e.ScriptResultUtil={}))}(r||(r={}))},434:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){var r;!function(t){var r;!function(t){function r(t,r){!e.DataViewAnalysis.isMetadataEquivalent(t.metadata,r.metadata),r.metadata.segment||delete t.metadata.segment,t.table&&r.table&&i(t.table,r.table),t.categorical&&r.categorical&&n(t.categorical,r.categorical),t.tree&&r.tree&&a(t.tree.root,r.tree.root,!0),t.matrix&&r.matrix&&a(t.matrix.rows.root,r.matrix.rows.root,!1)}function i(e,t){if(!_.isEmpty(t.rows)){var r=t.lastMergeIndex+1;o(e.rows,t.rows,r),t.identity&&o(e.identity,t.identity,r)}}function n(e,t){if(e.categories&&t.categories)for(var r=t.categories.length,i=0;r>i;i++){var n=t.categories[i],a=e.categories[i],u=t.lastMergeIndex+1;n.values&&o(a.values,n.values,u),n.identity&&o(a.identity,n.identity,u)}if(e.values&&t.values)for(var s=t.values.length,c=0;s>c;c++){var l=t.values[c],p=e.values[c];!p.values&&l.values&&(p.values=[]);var u=t.lastMergeIndex+1;l.values&&o(p.values,l.values,u),l.highlights&&o(p.highlights,l.highlights,u)}}function o(e,t,r){if(r>=t.length)return t;var i=[];return void 0!==r&&(i=t.splice(0,r)),Array.prototype.push.apply(e,t),i}function a(e,t,r){if(t.children&&0!==t.children.length){if(r&&(!e.children||0===e.children.length))return void(e.children=t.children);var i=u(t.children),n=e.children[e.children.length-1],s=o(e.children,t.children,i);s.length>0&&a(n,s[s.length-1],r)}}function u(e){if(0===e.length)return 0;for(var t=0;t<e.length;t++){var r=e[t];if(!r.isMerge)break}return t}t.mergeDataViews=r,t.mergeTables=i,t.mergeCategorical=n,t.mergeTreeNodes=a}(r=t.DataViewMerger||(t.DataViewMerger={}))}(r=t.segmentation||(t.segmentation={}));
}(t=e.data||(e.data={}))}(r||(r={}))},435:function(e,t){var r,r=(window.jsCommon,window.powerbi),i=(window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft,this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});!function(e){var t;!function(e){var t;!function(t){function r(e){return e.accept(new n)}t.run=r;var n=function(t){function r(){t.call(this)}return i(r,t),r.prototype.visitCompare=function(t){if(t.comparison!==e.QueryComparisonKind.Equal)return this.visitUnsupported(t);if(!this.isSupported(t.left)||!this.isSupported(t.right))return this.visitUnsupported(t);var r=this.isComparand(t.left),i=this.isComparand(t.right);if(r===i)return this.visitUnsupported(t);var n=r?t.left:t.right,o=r?t.right:t.left,a=this.current;return a?(a.add(n,o),t):e.SQExprBuilder.inExpr([n],[[o]])},r.prototype.visitOr=function(e){if(!this.isSupported(e.left)||!this.isSupported(e.right))return this.visitUnsupported(e);var t;return this.current||(t=this.current=new o),e.left.accept(this),e.right.accept(this),t?(this.current=null,t.complete()||e):e},r.prototype.visitAnd=function(e){if(!this.isSupported(e.left)||!this.isSupported(e.right))return this.visitUnsupported(e);var r=this.current;return r?(r.cancel(),e):t.prototype.visitAnd.call(this,e)},r.prototype.visitUnsupported=function(e){var t=this.current;return t&&t.cancel(),e},r.prototype.isSupported=function(t){return t instanceof e.SQCompareExpr||t instanceof e.SQColumnRefExpr||t instanceof e.SQConstantExpr||t instanceof e.SQHierarchyLevelExpr||t instanceof e.SQOrExpr||t instanceof e.SQAndExpr},r.prototype.isComparand=function(t){return t instanceof e.SQColumnRefExpr||t instanceof e.SQHierarchyLevelExpr},r}(e.SQExprRewriter),o=function(){function t(){}return t.prototype.add=function(t,r){if(!this.cancelled){if(this.operand&&!e.SQExpr.equals(t,this.operand))return void this.cancel();this.operand=t;var i=this.values;i||(i=this.values=[]),i.push(r)}},t.prototype.cancel=function(){this.cancelled=!0},t.prototype.complete=function(){return!this.cancelled&&this.operand?e.SQExprBuilder.inExpr([this.operand],_.map(this.values,function(e){return[e]})):void 0},t}()}(t=e.EqualsToInRewriter||(e.EqualsToInRewriter={}))}(t=e.data||(e.data={}))}(r||(r={}))},436:function(e,t){var r,i=window.jsCommon,r=window.powerbi,n=(window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft,this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});!function(e){var t;!function(t){var r;!function(e){function t(e,t){var r=e.conditions(),i=r[0];if(i){var n=new o(t);if(i.accept(n))return n.getResult()}}function r(e){var t=e.expr.accept(new a);return t?t.value:void 0}e.asScopeIdsContainer=t,e.getFirstComparandValue=r}(r=t.SQExprConverter||(t.SQExprConverter={}));var o=function(r){function o(e){r.call(this),this.isRoot=!0,this.isNot=!1,this.keyExprsCount=null,this.valueExprs=[],this.fieldExprs=[];for(var i=0,n=e;i<n.length;i++){var o=n[i];this.fieldExprs.push(t.SQExprBuilder.removeEntityVariables(o))}}return n(o,r),o.prototype.getResult=function(){for(var t=this.valueExprs,r=[],n=this.keyExprsCount||1,a=0,u=n,s=t.length;s>a&&s>=u;){var c=t.slice(a,u),l=o.getScopeIdentity(this.fieldExprs,c);i.ArrayExtensions.isInArray(r,l,e.DataViewScopeIdentity.equals)||r.push(l),a+=n,u+=n}return{isNot:this.isNot,scopeIds:r}},o.getScopeIdentity=function(e,r){for(var i,n=0,o=e.length;o>n;n++){var a=t.SQExprBuilder.equal(e[n],r[n]);i=i?t.SQExprBuilder.and(i,a):a}return t.createDataViewScopeIdentity(i)},o.prototype.visitOr=function(e){return null!==this.keyExprsCount?this.unsupportedSQExpr():(this.isRoot=!1,e.left.accept(this)&&e.right.accept(this))},o.prototype.visitNot=function(e){return this.isRoot?(this.isNot=!0,e.arg.accept(this)):this.unsupportedSQExpr()},o.prototype.visitConstant=function(t){return this.isRoot&&t.type.primitiveType===e.PrimitiveType.Null?this.unsupportedSQExpr():(this.valueExprs.push(t),!0)},o.prototype.visitCompare=function(e){return null!==this.keyExprsCount?this.unsupportedSQExpr():(this.isRoot=!1,e.comparison!==t.QueryComparisonKind.Equal?this.unsupportedSQExpr():e.left.accept(this)&&e.right.accept(this))},o.prototype.visitIn=function(e){this.keyExprsCount=0;var t;this.isRoot=!1;for(var r=0,i=e.args;r<i.length;r++){var n=i[r];if(t=n.accept(this),!t)return this.unsupportedSQExpr();this.keyExprsCount++}if(this.keyExprsCount!==this.fieldExprs.length)return this.unsupportedSQExpr();for(var o=e.values,a=0,u=o;a<u.length;a++)for(var s=u[a],c=(s.length,0),l=s;c<l.length;c++){var p=l[c];if(t=p.accept(this),!t)return this.unsupportedSQExpr()}return t},o.prototype.visitColumnRef=function(e){if(this.isRoot)return this.unsupportedSQExpr();var r=t.SQExprBuilder.removeEntityVariables(e);return null!==this.keyExprsCount?t.SQExpr.equals(this.fieldExprs[this.keyExprsCount],r):t.SQExpr.equals(this.fieldExprs[0],r)},o.prototype.visitDefaultValue=function(e){return this.isRoot||null!==this.keyExprsCount?this.unsupportedSQExpr():(this.valueExprs.push(e),!0)},o.prototype.visitAnyValue=function(e){return this.isRoot||null!==this.keyExprsCount?this.unsupportedSQExpr():(this.valueExprs.push(e),!0)},o.prototype.visitDefault=function(e){return this.unsupportedSQExpr()},o.prototype.unsupportedSQExpr=function(){return!1},o}(t.DefaultSQExprVisitor),a=function(e){function r(){e.apply(this,arguments)}return n(r,e),r.prototype.visitAnd=function(e){return e.left.accept(this)||e.right.accept(this)},r.prototype.visitCompare=function(e){if(e.comparison===t.QueryComparisonKind.Equal){if(e.right instanceof t.SQConstantExpr)return e.right;if(e.left instanceof t.SQConstantExpr)return e.left}},r}(t.DefaultSQExprVisitor)}(t=e.data||(e.data={}))}(r||(r={}))},437:function(e,t){var r,i=window.jsCommon,r=window.powerbi,n=(window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft,this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});!function(e){var t;!function(e){var t,r=i.ArrayExtensions;!function(t){function i(e){var t=new u;return e.accept(t),t.malformed?null:r.emptyToNull(t.keys)}function o(e){var t=new u;return e.accept(t),t.malformed?null:r.emptyToNull(t.values)}function a(t){var i=new u;if(t.accept(i),!i.malformed){var n=r.emptyToNull(i.keys),o=r.emptyToNull(i.values);return n&&o?e.SQExprBuilder.inExpr(n,[o]):void 0}}t.getKeys=i,t.getValues=o,t.getInExpr=a;var u=function(t){function r(){t.apply(this,arguments),this.keys=[],this.values=[]}return n(r,t),r.prototype.visitAnd=function(e){e.left.accept(this),e.right.accept(this)},r.prototype.visitCompare=function(t){return t.comparison!==e.QueryComparisonKind.Equal?void this.visitDefault(t):(t.left.accept(this),void t.right.accept(this))},r.prototype.visitColumnRef=function(e){this.keys.push(e)},r.prototype.visitHierarchyLevel=function(e){this.keys.push(e)},r.prototype.visitConstant=function(e){this.values.push(e)},r.prototype.visitArithmetic=function(e){this.keys.push(e)},r.prototype.visitDefault=function(e){this.malformed=!0},r}(e.DefaultSQExprVisitor)}(t=e.ScopeIdentityExtractor||(e.ScopeIdentityExtractor={}))}(t=e.data||(e.data={}))}(r||(r={}))},438:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){function r(e){return new o(e)}function i(e,r){var i=t.SQExprBuilder.removeAggregate(e).getMetadata(r);return i||(i=e.getMetadata(r)),i}var n=e.data.QueryAggregateFunction;t.createSQAggregationOperations=r;var o=function(){function r(e){this.datetimeMinMaxSupported=e}return r.prototype.getSupportedAggregates=function(r,o,a,u){var s=i(r,o);if(!s)return[];var c=s.type,l=s.kind,p=s.idOnEntityKey;if(!c)return[];if(1===l)return[];if(c.numeric||c.integer){var f=[n.Sum,n.Avg,n.Min,n.Max,n.Count,n.CountNonNull,n.StandardDeviation,n.Variance],d=t.SQExprConverter.asFieldPattern(r),v=t.FieldExprPattern.toFieldExprEntityItemPattern(d),h=o.schema(v.schema);return h.capabilities.supportsMedian&&f.push(n.Median),f}var m=[];(this.datetimeMinMaxSupported||u)&&c.dateTime&&(_.isEmpty(a)||e.ValueType.isCompatibleTo(c,a))&&(m.push(n.Min),m.push(n.Max));var g=t.SQExprInfo.getAggregate(r)===n.Count;return p&&!g||m.push(n.Count),m.push(n.CountNonNull),m},r.prototype.isSupportedAggregate=function(e,t,r,i,n){var o=this.getSupportedAggregates(e,t,i,n);return _.contains(o,r)},r.prototype.createExprWithAggregate=function(e,r,i,n,o){var a;return a=null!=o&&this.isSupportedAggregate(e,r,o,n)?o:e.getDefaultAggregate(r,i),void 0!==a&&(e=t.SQExprBuilder.aggregate(e,a)),e},r}()}(t=e.data||(e.data={}))}(r||(r={}))},439:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){var t;!function(t){function o(e,r){var i=h(r);return i?t.getConceptualHierarchyLevel(e,i.schema,i.entity,i.name,i.level):void 0}function a(e,t,r,i,n){var o=e.schema(t),a=o.findHierarchy(r,i);return a?a.levels.withName(n):void 0}function u(t,r){if(t instanceof e.SQHierarchyExpr){var i=t;if(t.arg instanceof e.SQEntityExpr){var n=t.arg;return r.schema(n.schema).findHierarchy(n.entity,i.hierarchy)}if(t.arg instanceof e.SQPropertyVariationSourceExpr){var o=t.arg,a=o.arg;return r.schema(a.schema).findHierarchyByVariation(a.entity,o.property,o.name,i.hierarchy)}}}function s(e,t,o){return r.convert(t,e)||n.expand(t,e)||!o&&i.expand(t,e)||t}function c(t,r){if(r instanceof e.SQHierarchyExpr||r instanceof e.SQHierarchyLevelExpr)return!0;var i=r.getConceptualProperty(t);if(i){var n=i.column;if(n&&n.variations&&n.variations.length>0)return!0}return!1}function l(t){var r=e.SQExprConverter.asFieldPattern(t);if(r.columnHierarchyLevelVariation){var i=e.SQExprBuilder.entity(r.columnHierarchyLevelVariation.source.schema,r.columnHierarchyLevelVariation.source.entity);return e.SQExprBuilder.columnRef(i,r.columnHierarchyLevelVariation.source.name)}}function p(t){var r=e.SQExprConverter.asFieldPattern(t),i=r.hierarchyLevel;if(i){var n=e.SQExprBuilder.entity(i.schema,i.entity,i.entityVar);return e.SQExprBuilder.hierarchy(n,i.name)}}function f(t){if(t.arg instanceof e.SQHierarchyExpr){var r=t.arg;return r.arg instanceof e.SQPropertyVariationSourceExpr?r.arg:void 0}}function d(t,r,i){if(!(r instanceof e.SQHierarchyLevelExpr&&i instanceof e.SQHierarchyLevelExpr))return!1;var n=r,o=i;if(!e.SQExpr.equals(n.arg,o.arg))return!1;var a=e.SQExprUtils.indexOfExpr(t,n),u=e.SQExprUtils.indexOfExpr(t,o);return-1!==a&&-1!==u&&u>a}function v(e,t,r){for(var i=0;i<t.length&&d(e,t[i],r);)i++;return i}function h(e){return e.hierarchyLevel||e.hierarchyLevelAggr||e.columnHierarchyLevelVariation&&e.columnHierarchyLevelVariation.level}t.getConceptualHierarchyLevelFromExpr=o,t.getConceptualHierarchyLevel=a,t.getConceptualHierarchy=u,t.expandExpr=s,t.isHierarchyOrVariation=c,t.getSourceVariationExpr=l,t.getSourceHierarchy=p,t.getHierarchySourceAsVariationSource=f,t.areHierarchyLevelsOrdered=d,t.getInsertionIndex=v}(t=e.SQHierarchyExprUtils||(e.SQHierarchyExprUtils={}));var r;!function(r){function i(r,i){if(r instanceof e.SQHierarchyExpr){var n=r,o=t.getConceptualHierarchy(n,i);if(o)return _.map(o.levels,function(t){return e.SQExprBuilder.hierarchyLevel(r,t.name)})}}r.convert=i}(r=e.SQExprHierarchyToHierarchyLevelConverter||(e.SQExprHierarchyToHierarchyLevelConverter={}));var i;!function(t){function r(t,r){var i=[];if(t instanceof e.SQHierarchyLevelExpr){var n=e.SQExprConverter.asFieldPattern(t);if(n.hierarchyLevel){var o=e.FieldExprPattern.toFieldExprEntityItemPattern(n),a=r.schema(o.schema).findHierarchy(o.entity,n.hierarchyLevel.name);if(a)for(var u=a.levels,s=0,c=u;s<c.length;s++){var l=c[s];if(l.name===n.hierarchyLevel.level){i.push(t);break}i.push(e.SQExprBuilder.hierarchyLevel(e.SQExprBuilder.hierarchy(e.SQExprBuilder.entity(o.schema,o.entity,o.entityVar),a.name),l.name))}}}return _.isEmpty(i)?void 0:i}t.expand=r}(i||(i={}));var n;!function(t){function r(t,r){var i,n=t.getConceptualProperty(r);if(n){var o=n.column;if(o&&o.variations&&o.variations.length>0){var a=o.variations,u=a[0],s=e.SQExprConverter.asFieldPattern(t),c=e.FieldExprPattern.toFieldExprEntityItemPattern(s);if(i=[],u.defaultHierarchy)for(var l=e.SQExprBuilder.hierarchy(e.SQExprBuilder.propertyVariationSource(e.SQExprBuilder.entity(c.schema,c.entity,c.entityVar),u.name,n.name),u.defaultHierarchy.name),p=0,f=u.defaultHierarchy.levels;p<f.length;p++){var d=f[p];i.push(e.SQExprBuilder.hierarchyLevel(l,d.name))}}}return i}t.expand=r}(n||(n={}))}(t=e.data||(e.data={}))}(r||(r={}))},440:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){var t;!function(t){function r(t,r){for(var n=[],o=0,a=r.length;a>o;o++){var u=r[o];u instanceof e.SQHierarchyLevelExpr?i(t,n,u,o):n.push({expr:u,children:null,selectQueryIndex:o})}return n}function i(t,r,i,n){var o=!0,a=e.SQHierarchyExprUtils.getSourceVariationExpr(i)||e.SQHierarchyExprUtils.getSourceHierarchy(i),u=_.last(r);if(u&&u.children&&e.SQExpr.equals(u.expr,a)){var s=e.SQHierarchyExprUtils.expandExpr(t,i.arg);if(s instanceof Array){var c=s;o=!e.SQHierarchyExprUtils.areHierarchyLevelsOrdered(c,_.last(u.children),i)}}o?r.push({expr:a,children:[i],selectQueryIndex:n}):u.children.push(i)}t.groupExprs=r}(t=e.SQExprGroupUtils||(e.SQExprGroupUtils={}))}(t=e.data||(e.data={}))}(r||(r={}))},441:function(e,t){var r,i=window.jsCommon,r=window.powerbi,n=(window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft,this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});!function(e){var t;!function(t){var r,o=i.ArrayExtensions,a=i.StringExtensions;!function(r){function i(e,t){var r=e.getMetadata(t),i=r&&r.type;return r&&i?i.numeric||i.dateTime||i.duration:!1}function u(e,r){for(var i=0,n=e.length;n>i;i++)if(t.SQExpr.equals(e[i],r))return i;return-1}function s(e,r){for(var i=0,n=e.length;n>i;i++){var o=e[i];if(o&&t.SQExpr.equals(o.expr,r))return i}return-1}function c(e,r){var i=e.length;if(i!==r.length)return!1;for(var n=0;i>n;n++)if(!t.SQExpr.equals(e[n],r[n]))return!1;return!0}function l(e,t,r){for(var i={},n=0,o=e.length;o>n;n++)i[e[n].name]=!0;return a.findUniqueName(i,r||p(t))}function p(e,t){return void 0===t&&(t="select"),e?e.accept(A.instance,t):t}function f(e){return e.accept(j.instance)}function d(e){return e.accept(O.instance)}function v(e){return e.accept(N.instance)}function h(e,t){var r=g(e,t);return r&&r.discourageQueryAggregateUsage}function m(e,t){var r=E(e,t);return r?r.aggregateBehavior:void 0}function g(e,r){var i=t.SQExprConverter.asFieldPattern(e);if(i){var n=t.FieldExprPattern.toFieldExprEntityItemPattern(i),o=r.schema(n.schema);return o?o.capabilities:void 0}}function y(e,t){var r=x(e,t);if(r)return r.kpiValue.measure.kpi.statusMetadata;var i=b(e,t);return i?i.kpiValue.measure.kpi.trendMetadata:void 0}function w(e,t){var r=t.schema(e.schema).entities.withName(e.entity);return r}function x(e,t){var r=e.getConceptualProperty(t);if(r){var i=r.kpiValue;return i&&i.measure.kpi.status===r?r:void 0}}function b(e,t){var r=e.getConceptualProperty(t);if(r){var i=r.kpiValue;return i&&i.measure.kpi.trend===r?r:void 0}}function S(e,t){var r=E(e,t);return r?r.defaultValue:void 0}function E(e,r){if(e&&r){var i=t.SQExprConverter.asFieldPattern(e);if(i){var n=i.column;if(n){if(r.schema(n.schema)&&i.column.name){var o=r.schema(n.schema).findProperty(n.entity,i.column.name);if(o)return o.column}}else{var a=i.hierarchyLevel;if(a){var u=t.FieldExprPattern.toFieldExprEntityItemPattern(i),s=u.schema;if(r.schema(s)){var c=r.schema(s).findHierarchy(u.entity,a.name);if(c){var l=c.levels.withName(a.level);if(l&&l.column)return l.column.column}}}}}}}function D(e,t){if(!_.isEmpty(e)&&t){for(var r=[],i=0,n=e;i<n.length;i++){var o=n[i],a=S(o,t);a&&r.push(a)}return r}}function C(e,r){for(var i=[],n=0;n<e.length;n++)i.push(t.SQExprBuilder.compare(t.QueryComparisonKind.Equal,e[n],r[n]));if(!_.isEmpty(i)){for(var o,a=0,u=i;a<u.length;a++){var s=u[a];o=t.SQExprBuilder.and(o,s)}return o}}function T(e){var r=[],i=new t.SQFromEntitiesVisitor;if(e){var n=e.from();if(void 0!==n)for(var o=0,a=n.keys();o<a.length;o++){var u=a[o];n.source(u).accept(i,null)}}return r=_.map(i.entities,function(e){return e.entity})}function V(e,t,r){return R(e,t,r,0,2)||R(e,r,t,2,0)}function M(e,t,r){return R(e,t,r,2,0)||R(e,r,t,0,2)}function R(e,t,i,n,o){var a=r.getConceptualEntity(t,e);if(_.isEmpty(a.navigationProperties))return!1;var u=r.getConceptualEntity(i,e),s=[];for(s.push(a);!_.isEmpty(s);){var c=s.shift(),l=c.navigationProperties;if(!_.isEmpty(l))for(var p=0,f=l;p<f.length;p++){var d=f[p];if(d.isActive&&d.targetMultiplicity===o&&d.sourceMultiplicity===n){if(d.targetEntity===u)return!0;s.push(d.targetEntity)}}}return!1}function F(e,t,i){var n=r.getConceptualEntity(t,e),o=r.getConceptualEntity(i,e),a=n.navigationProperties,u=o.navigationProperties;return _.isEmpty(a)&&_.isEmpty(u)?!1:P(a,o)||P(u,n)}function P(e,t){if(_.isEmpty(e))return!1;for(var r=0,i=e;r<i.length;r++){var n=i[r];if(n.isActive&&n.targetEntity===t&&0===n.sourceMultiplicity&&0===n.targetMultiplicity)return!0}return!1}function I(e,t){for(var r=o.copy(e),i=0,n=t;i<n.length;i++){var a=n[i];-1===u(r,a)&&r.push(a)}return r}r.supportsArithmetic=i,r.indexOfExpr=u,r.indexOfNamedExpr=s,r.sequenceEqual=c,r.uniqueName=l,r.defaultName=p,r.isMeasure=f,r.isAnyValue=d,r.isDefaultValue=v,r.discourageAggregation=h,r.getAggregateBehavior=m,r.getSchemaCapabilities=g,r.getKpiMetadata=y,r.getConceptualEntity=w,r.getDefaultValue=S,r.getDefaultValues=D,r.getDataViewScopeIdentityComparisonExpr=C,r.getActiveTablesNames=T,r.isRelatedToMany=V,r.isRelatedToOne=M,r.isRelatedOneToOne=F,r.concatUnique=I;var A=function(r){function i(){r.apply(this,arguments)}return n(i,r),i.prototype.visitEntity=function(e){return e.entity},i.prototype.visitColumnRef=function(e){return e.source.accept(this)+"."+e.ref},i.prototype.visitMeasureRef=function(e,t){return e.source.accept(this)+"."+e.ref},i.prototype.visitAggr=function(e,r){return t.QueryAggregateFunction[e.func]+"("+e.arg.accept(this)+")"},i.prototype.visitPercentile=function(e,t){var r=e.exclusive?"Percentile.Exc(":"Percentile.Inc(";return r+e.arg.accept(this)+", "+e.k+")"},i.prototype.visitArithmetic=function(t,r){return e.data.getArithmeticOperatorName(t.operator)+"("+t.left.accept(this)+", "+t.right.accept(this)+")"},i.prototype.visitConstant=function(e){return"const"},i.prototype.visitTransformOutputRoleRef=function(e,t){var r=e.role;return e.transform&&(r+="."+e.transform),r},i.prototype.visitDefault=function(e,t){return t||"expr"},i.instance=new i,i}(t.DefaultSQExprVisitorWithArg),j=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype.visitMeasureRef=function(e){return!0},t.prototype.visitAggr=function(e){return!0},t.prototype.visitArithmetic=function(e){return!0},t.prototype.visitDefault=function(e){return!1},t.instance=new t,t}(t.DefaultSQExprVisitor),N=function(e){function r(){e.apply(this,arguments)}return n(r,e),r.prototype.visitCompare=function(e){return e.comparison!==t.QueryComparisonKind.Equal?!1:e.right.accept(this)},r.prototype.visitAnd=function(e){return e.left.accept(this)&&e.right.accept(this)},r.prototype.visitDefaultValue=function(e){return!0},r.prototype.visitDefault=function(e){return!1},r.instance=new r,r}(t.DefaultSQExprVisitor),O=function(e){function r(){e.apply(this,arguments)}return n(r,e),r.prototype.visitCompare=function(e){return e.comparison!==t.QueryComparisonKind.Equal?!1:e.right.accept(this)},r.prototype.visitAnd=function(e){return e.left.accept(this)&&e.right.accept(this)},r.prototype.visitAnyValue=function(e){return!0},r.prototype.visitDefault=function(e){return!1},r.instance=new r,r}(t.DefaultSQExprVisitor)}(r=t.SQExprUtils||(t.SQExprUtils={}))}(t=e.data||(e.data={}))}(r||(r={}))},442:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){var t=function(){function t(e){this.exprRewriter=e}return t.prototype.rewriteFrom=function(t){for(var r={},i=t,n=i.keys(),o=0,a=n.length;a>o;o++){var u=n[o],s=i.source(u);if(e.isSQFromEntitySource(s)){var c=e.SQExprBuilder.entity(s.schema,s.entity,u),l=c.accept(this.exprRewriter);r[u]=new e.SQFromEntitySource(l.schema,l.entity)}else e.isSQFromSubquerySource(s)}return new e.SQFrom(r)},t.prototype.rewriteSelect=function(e,t){return this.rewriteNamedSQExpressions(e,t)},t.prototype.rewriteGroupBy=function(e,t){return _.isEmpty(e)?void 0:this.rewriteNamedSQExpressions(e,t)},t.prototype.rewriteNamedSQExpressions=function(t,r){var i=this;return _.map(t,function(t){return{name:t.name,expr:e.SQExprRewriterWithSourceRenames.rewrite(t.expr.accept(i.exprRewriter),r)}})},t.prototype.rewriteOrderBy=function(t,r){if(!_.isEmpty(t)){for(var i=[],n=0,o=t.length;o>n;n++){var a=t[n],u=e.SQExprRewriterWithSourceRenames.rewrite(a.expr.accept(this.exprRewriter),r);i.push({direction:a.direction,expr:u})}return i}},t.prototype.rewriteWhere=function(t,r){var i=this;if(!_.isEmpty(t)){for(var n=[],o=0,a=t.length;a>o;o++){var u=t[o],s={condition:e.SQExprRewriterWithSourceRenames.rewrite(u.condition.accept(this.exprRewriter),r)};u.target&&(s.target=_.map(u.target,function(t){return e.SQExprRewriterWithSourceRenames.rewrite(t.accept(i.exprRewriter),r)})),n.push(s)}return n}},t.prototype.rewriteTransform=function(t,r){var i=this;if(!_.isEmpty(t)){for(var n=[],o=0,a=t;o<a.length;o++){var u=a[o],s=void 0;u.input.table&&!_.isEmpty(u.input.table.columns)&&(s=_.map(u.input.table.columns,function(t){return{role:t.role,expression:{name:t.expression.name,expr:e.SQExprRewriterWithSourceRenames.rewrite(t.expression.expr.accept(i.exprRewriter),r)}}}));var c={name:u.name,algorithm:u.algorithm,input:{parameters:u.input.parameters},output:u.output};u.input.table&&(c.input.table={name:u.input.table.name,columns:s}),n.push(c)}return n}},t}();e.SemanticQueryRewriter=t}(t=e.data||(e.data={}))}(r||(r={}))},443:function(e,t){var r,i=window.jsCommon,r=window.powerbi;window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){function t(e,t){if(e&&t){if(r(e)&&r(t))return e.equals(t);if(n(e)&&n(t))return e.equals(t)}return e===t}function r(e){return null!=e.entity}function n(e){return null!=e.subquery}var o=i.ArrayExtensions,a=function(){function e(e,t){this.schema=e,this.entity=t}return e.prototype.accept=function(e,t){return e.visitEntity(this,t)},e.prototype.equals=function(e){return e&&this.entity===e.entity&&this.schema===e.schema},e}();e.SQFromEntitySource=a;var u=function(){function t(e){this.subquery=e}return t.prototype.accept=function(e,t){return e.visitSubquery(this,t)},t.prototype.equals=function(t){return t&&e.SemanticQuery.equals(this.subquery,t.subquery)},t}();e.SQFromSubquerySource=u;var s=function(){function e(e){this.items=e||{}}return e.prototype.keys=function(){return Object.keys(this.items)},e.prototype.source=function(e){return this.items[e]},e.prototype.sources=function(){return this.items},e.prototype.ensureSource=function(e,t){var r=this.getSourceKeyFromItems(e);if(r)return{name:r};var i=this.addSource(e,t);return{name:i,"new":!0}},e.prototype.remove=function(e){delete this.items[e]},e.prototype.getSourceKeyFromItems=function(e){var t=this.keys();for(var i in t){var o=t[i],a=this.items[o];if(r(a)&&r(e)&&a.equals(e))return o;if(n(a)&&n(e)&&a.equals(e))return o}},e.prototype.addSource=function(e,t){for(var r=t||e.accept(new c,null),n=r,o={},a=0,u=this.keys();a<u.length;a++){var s=u[a];o[s]=!0}return n=i.StringExtensions.findUniqueName(o,n),this.items[n]=e,n},e.prototype.clone=function(){var t=new e;return $.extend(t.items,this.items),t},e.prototype.equals=function(e){var r=this;if(!e)return!1;var i=this.keys(),n=e.keys();return i.length!==n.length?!1:o.sequenceEqual(i,n,function(i,n){return t(r.source(i),e.source(n))})},e}();e.SQFrom=s,e.equals=t,e.isSQFromEntitySource=r,e.isSQFromSubquerySource=n;var c=function(){function e(){}return e.prototype.visitEntity=function(e){var t=e.entity,r=t.lastIndexOf(".");return r>=0&&r!==t.length-1&&(t=t.substr(r+1)),t.substring(0,1).toLowerCase()},e.prototype.visitSubquery=function(e){return"q"},e}();e.SQFromSourceCandidateNameVisitor=c;var l=function(){function t(){this.entities=[]}return t.prototype.visitEntity=function(t,r){this.entities.push(new e.SQEntityExpr(t.schema,t.entity,r))},t.prototype.visitSubquery=function(e,t){},t}();e.SQFromEntitiesVisitor=l}(t=e.data||(e.data={}))}(r||(r={}))},444:function(e,t){var r,i=window.jsCommon,r=window.powerbi,n=(window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft,this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});!function(e){var t;!function(e){var t=i.ArrayExtensions,r=function(){function r(e,t,r,i,n,o){this.fromValue=e,this.whereItems=t,this.orderByItems=r,this.selectItems=i,this.groupByItems=n,this.transformItems=o}return r.create=function(){return r.empty||(r.empty=new r(new e.SQFrom,null,null,[],null,null)),r.empty},r.createWithTrimmedFrom=function(e,t,i,n,o,a){var u=new s(e.keys());if(t)for(var c=0,l=t.length;l>c;c++){var p=t[c];p.condition.accept(u);var f=p.target;if(f)for(var d=0,v=f.length;v>d;d++)f[d]&&f[d].accept(u)}if(i)for(var c=0,l=i.length;l>c;c++){var h=i[c].input.table;if(h&&!_.isEmpty(h.columns))for(var m=0,g=h.columns;m<g.length;m++){var y=g[m];y.expression.expr.accept(u)}}if(n)for(var c=0,l=n.length;l>c;c++)n[c].expr.accept(u);for(var c=0,l=o.length;l>c;c++)o[c].expr.accept(u);if(a)for(var c=0,l=a.length;l>c;c++)a[c].expr.accept(u);for(var w=u.result(),c=0,l=w.length;l>c;c++)e.remove(w[c]);return new r(e,t,n,o,a,i)},r.prototype.from=function(){return this.fromValue.clone()},r.prototype.select=function(e){return _.isEmpty(arguments)?this.getSelect():this.setSelect(e)},r.prototype.getSelect=function(){return r.createNamedExpressionArray(this.selectItems)},r.createNamedExpressionArray=function(e){return t.extendWithName(_.map(e,function(e){return{name:e.name,expr:e.expr}}))},r.prototype.setSelect=function(e){var t=this.fromValue.clone(),i=r.rewriteExpressionsWithSourceRenames(e,t);return r.createWithTrimmedFrom(t,this.whereItems,this.transformItems,this.orderByItems,i,this.groupByItems)},r.rewriteExpressionsWithSourceRenames=function(e,t){for(var r=[],i=0,n=e.length;n>i;i++){var o=e[i];r.push({name:o.name,expr:a.rewrite(o.expr,t)})}return r},r.prototype.removeSelect=function(t){for(var i=this.selectItems,n=[],o=0,a=i.length;a>o;o++){var u=i[o];e.SQExpr.equals(u.expr,t)||n.push(u)}return r.createWithTrimmedFrom(this.fromValue.clone(),this.whereItems,this.transformItems,this.orderByItems,n,this.groupByItems)},r.prototype.removeOrderBy=function(t){for(var i=this.orderBy(),n=i.length-1;n>=0;n--)e.SQExpr.equals(i[n].expr,t)&&i.splice(n,1);return r.createWithTrimmedFrom(this.fromValue.clone(),this.whereItems,this.transformItems,i,this.selectItems,this.groupByItems)},r.prototype.removeTransform=function(e){for(var t=this.transforms(),i=0,n=t.length;n>i;i++)if(t[i].name===e.name){t.splice(i,1);break}return r.createWithTrimmedFrom(this.fromValue.clone(),this.whereItems,t,this.orderByItems,this.selectItems,this.groupByItems)},r.prototype.selectNameOf=function(t){var r=e.SQExprUtils.indexOfNamedExpr(this.selectItems,t);return r>=0?this.selectItems[r].name:void 0},r.prototype.setSelectAt=function(e,t){if(!(e>=this.selectItems.length)){var i=this.select(),n=this.fromValue.clone(),o=i[e].name;return i[e]={name:o,expr:a.rewrite(t,n)},r.createWithTrimmedFrom(n,this.whereItems,this.transformItems,this.orderByItems,i,this.groupByItems)}},r.prototype.addSelect=function(e,t){var i=this.select(),n=this.fromValue.clone();return i.push(this.createNamedExpr(i,n,e,t)),r.createWithTrimmedFrom(n,this.whereItems,this.transformItems,this.orderByItems,i,this.groupByItems)},r.prototype.createNamedExpr=function(t,r,i,n){return{name:e.SQExprUtils.uniqueName(t,i,n),expr:a.rewrite(i,r)}},r.prototype.groupBy=function(e){return _.isEmpty(arguments)?this.getGroupBy():this.setGroupBy(e)},r.prototype.getGroupBy=function(){return r.createNamedExpressionArray(this.groupByItems)},r.prototype.setGroupBy=function(e){var t=this.fromValue.clone(),i=r.rewriteExpressionsWithSourceRenames(e,t);return r.createWithTrimmedFrom(t,this.whereItems,this.transformItems,this.orderByItems,this.selectItems,i)},r.prototype.addGroupBy=function(e){var t=this.groupBy(),i=this.fromValue.clone();return t.push(this.createNamedExpr(t,i,e)),r.createWithTrimmedFrom(i,this.whereItems,this.transformItems,this.orderByItems,this.selectItems,t)},r.prototype.orderBy=function(e){return _.isEmpty(arguments)?this.getOrderBy():this.setOrderBy(e)},r.prototype.getOrderBy=function(){var e=[],t=this.orderByItems;if(t)for(var r=0,i=t.length;i>r;r++){var n=t[r];e.push({expr:n.expr,direction:n.direction})}return e},r.prototype.setOrderBy=function(e){for(var t=[],i=this.fromValue.clone(),n=0,o=e.length;o>n;n++){var u=e[n];t.push({expr:a.rewrite(u.expr,i),direction:u.direction})}return r.createWithTrimmedFrom(i,this.whereItems,this.transformItems,t,this.selectItems,this.groupByItems)},r.prototype.where=function(e){return _.isEmpty(arguments)?this.getWhere():this.setWhere(e)},r.prototype.getWhere=function(){var e=[],t=this.whereItems;if(t)for(var r=0,i=t.length;i>r;r++)e.push(t[r]);return e},r.prototype.setWhere=function(e){for(var t=[],i=this.fromValue.clone(),n=0,o=e.length;o>n;n++){var u=e[n],s={condition:a.rewrite(u.condition,i)},c=u.target;if(c){s.target=[];for(var l=0,p=c.length;p>l;l++)if(c[l]){var f=a.rewrite(c[l],i);s.target.push(f)}}t.push(s)}return r.createWithTrimmedFrom(i,t,this.transformItems,this.orderByItems,this.selectItems,this.groupByItems)},r.prototype.addWhere=function(e){for(var t=this.where(),i=e.where(),n=this.fromValue.clone(),o=0,u=i.length;u>o;o++){var s=i[o],c={condition:a.rewrite(s.condition,n)};s.target&&(c.target=_.map(s.target,function(e){return a.rewrite(e,n)})),t.push(c)}return r.createWithTrimmedFrom(n,t,this.transformItems,this.orderByItems,this.selectItems,this.groupByItems)},r.prototype.transforms=function(e){return _.isEmpty(arguments)?this.getTransforms():this.setTransforms(e)},r.prototype.getTransforms=function(){var e=[];if(!_.isEmpty(this.transformItems))for(var t=0,r=this.transformItems;t<r.length;t++){var i=r[t];e.push(i)}return e},r.prototype.setTransforms=function(e){for(var i=this,n=this.fromValue.clone(),o=[],a=0,u=e;a<u.length;a++){var s=u[a],c=void 0;s.input.table&&!_.isEmpty(s.input.table.columns)&&(c=_.map(s.input.table.columns,function(e){return{role:e.role,expression:i.createNamedExpr(t.extendWithName([]),n,e.expression.expr,e.expression.name)}}));var l={name:s.name,algorithm:s.algorithm,input:{parameters:s.input.parameters},output:s.output};s.input.table&&(l.input.table={name:s.input.table.name,columns:c}),o.push(l)}return r.createWithTrimmedFrom(n,this.whereItems,e,this.orderByItems,this.selectItems,this.groupByItems)},r.prototype.rewrite=function(t){var i=new e.SemanticQueryRewriter(t),n=i.rewriteFrom(this.fromValue),o=i.rewriteWhere(this.whereItems,n),a=i.rewriteOrderBy(this.orderByItems,n),u=i.rewriteSelect(this.selectItems,n),s=i.rewriteGroupBy(this.groupByItems,n),c=i.rewriteTransform(this.transformItems,n);return r.createWithTrimmedFrom(n,o,c,a,u,s)},r.equals=function(r,i){return r.from().equals(i.from())&&t.sequenceEqual(r.where(),i.where(),e.SQFilter.equals)&&t.sequenceEqual(r.orderBy(),i.orderBy(),e.SQUtils.sqSortDefinitionEquals)&&t.sequenceEqual(r.select(),i.select(),e.SQUtils.namedSQExprEquals)&&t.sequenceEqual(r.groupBy(),i.groupBy(),e.SQUtils.namedSQExprEquals)&&t.sequenceEqual(r.transforms(),i.transforms(),e.SQUtils.sqTransformEquals);
},r}();e.SemanticQuery=r;var o=function(){function r(e,t){this.fromValue=e,this.whereItems=t}return r.fromSQExpr=function(t){var i=new e.SQFrom,n=a.rewrite(t,i),o=[{condition:n}];return new r(i,o)},r.getDefaultValueFilter=function(t){return r.getDataViewScopeIdentityComparisonFilters(t,e.SQExprBuilder.defaultValue())},r.getAnyValueFilter=function(t){return r.getDataViewScopeIdentityComparisonFilters(t,e.SQExprBuilder.anyValue())},r.getDataViewScopeIdentityComparisonFilters=function(t,i){if(t instanceof Array){var n=Array.apply(null,Array(t.length)).map(function(){return i});return r.fromSQExpr(e.SQExprUtils.getDataViewScopeIdentityComparisonExpr(t,n))}return r.fromSQExpr(e.SQExprBuilder.equal(t,i))},r.prototype.from=function(){return this.fromValue.clone()},r.prototype.conditions=function(){for(var e=[],t=this.whereItems,r=0,i=t.length;i>r;r++){var n=t[r];e.push(n.condition)}return e},r.prototype.where=function(){for(var e=[],t=this.whereItems,r=0,i=t.length;i>r;r++)e.push(t[r]);return e},r.prototype.rewrite=function(t){var i=new e.SemanticQueryRewriter(t),n=i.rewriteFrom(this.fromValue),o=i.rewriteWhere(this.whereItems,n);return new r(n,o)},r.prototype.validate=function(t,r,i){var n=new e.SQExprValidationVisitor(t,r,i);return this.rewrite(n),n.errors},r.merge=function(e){if(_.isEmpty(e))return null;if(1===e.length)return e[0];for(var i=e[0],n=i.from(),o=t.take(i.whereItems,i.whereItems.length),a=1,u=e.length;u>a;a++)r.applyFilter(e[a],n,o);return new r(n,o)},r.isDefaultFilter=function(t){return t&&1===t.where().length?e.SQExprUtils.isDefaultValue(t.where()[0].condition):!1},r.isAnyFilter=function(t){return t&&1===t.where().length?e.SQExprUtils.isAnyValue(t.where()[0].condition):!1},r.isSameFilter=function(e,t){return i.JsonComparer.equals(e,t)?!(r.isDefaultFilter(e)&&r.isAnyFilter(t)||r.isAnyFilter(e)&&r.isDefaultFilter(t)):!1},r.applyFilter=function(e,t,r){for(var i=e.whereItems,n=0;n<i.length;n++){var o=i[n],u={condition:a.rewrite(o.condition,t)};o.target&&(u.target=_.map(o.target,function(e){return a.rewrite(e,t)})),r.push(u)}},r}();e.SemanticFilter=o;var a=function(r){function i(e){r.call(this),this.renames=e}return n(i,r),i.prototype.visitEntity=function(t){var i=this.renames[t.entity];return i?new e.SQEntityExpr(t.schema,t.entity,i):r.prototype.visitEntity.call(this,t)},i.prototype.rewriteFilter=function(e){var t=void 0;e.target&&(t=this.rewriteArray(e.target));var r=e.condition.accept(this);if(e.condition===r&&e.target===t)return e;var i={condition:r};return t&&(i.target=t),i},i.prototype.rewriteArray=function(e){for(var r,i=0,n=e.length;n>i;i++){var o=e[i],a=o.accept(this);o===a||r||(r=t.take(e,i)),r&&r.push(a)}return r||e},i.rewrite=function(e,t){var r=u.run(e,t),n=new i(r);return e.accept(n)},i}(e.SQExprRewriter);e.SQExprRewriterWithSourceRenames=a;var u=function(t){function r(e){t.call(this),this.from=e,this.renames={}}return n(r,t),r.run=function(e,t){var i=new r(t);return e.accept(i),i.renames},r.prototype.visitEntity=function(t){var r=this.from.source(t.variable);if(!r||!e.isSQFromEntitySource(r)||r.schema!==t.schema||r.entity!==t.entity){var i=this.from.ensureSource(new e.SQFromEntitySource(t.schema,t.entity),t.variable);this.renames[t.entity]=i.name}},r}(e.DefaultSQExprVisitorWithTraversal),s=function(e){function t(t){e.call(this),this.keys=t}return n(t,e),t.prototype.visitEntity=function(e){var t=this.keys.indexOf(e.variable);t>=0&&this.keys.splice(t,1)},t.prototype.result=function(){return this.keys},t}(e.DefaultSQExprVisitorWithTraversal)}(t=e.data||(e.data={}))}(r||(r={}))},445:function(e,t){var r,i=window.jsCommon,r=window.powerbi;window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){var t,r=i.ArrayExtensions;!function(t){function i(t,r){return t||(t=null),r||(r=null),t===r?!0:!!t!=!!r?!1:n(t,r)?e.SQExpr.equals(t.condition,r.condition):!1}function n(t,i){return r.sequenceEqual(t.target,i.target,e.SQExpr.equals)}function o(e,t){return!_.isEmpty(e)&&_.any(e,function(e){return i(e,t)})}t.equals=i,t.targetsEqual=n,t.contains=o}(t=e.SQFilter||(e.SQFilter={}))}(t=e.data||(e.data={}))}(r||(r={}))},446:function(e,t){var r,i=window.jsCommon,r=window.powerbi;window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){var t,r=i.ArrayExtensions;!function(t){function i(t,r){return t||r?t&&r?t.direction===r.direction&&e.SQExpr.equals(t.expr,r.expr):!1:!0}function n(t,r){return t||r?t&&r?e.SQExpr.equals(t.expr,r.expr):!1:!0}function o(e,t){return e||t?e&&t?e.role===t.role&&n(e.expression,t.expression):!1:!0}function a(e,t){return e||t?e&&t?r.sequenceEqual(e.columns,t.columns,function(e,t){return o(e,t)}):!1:!0}function u(e,t){return e||t?e&&t?r.sequenceEqual(e.parameters,t.parameters,function(e,t){return n(e,t)})&&a(e.table,t.table):!1:!0}function s(e,t){return e||t?e&&t?a(e.table,t.table):!1:!0}function c(e,t){return e||t?e&&t?e.algorithm===t.algorithm&&u(e.input,t.input)&&s(e.output,t.output):!1:!0}t.sqSortDefinitionEquals=i,t.namedSQExprEquals=n,t.sqTransformTableColumnsEquals=o,t.sqTransformTableEquals=a,t.sqTransformInputEquals=u,t.sqTransformOutputEquals=s,t.sqTransformEquals=c}(t=e.SQUtils||(e.SQUtils={}))}(t=e.data||(e.data={}))}(r||(r={}))},447:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){function r(e,r,i){return new c(e||t.createColorAllocatorCache(),r||{metadata:{columns:[]}},i)}function i(e,t,r,i){var n=r.rows;if(!(_.isEmpty(n)||n.length<=i)){var a=r.columns,u=o(e,t);if(!(0>u))for(var s=0,c=a.length;c>s;s++)if(u===a[s].index)return n[i][s]}}function n(e,t,r){var i=o(e.arg,t);if(!(0>i))for(var n=0,u=r.length;u>n;n++){var s=r[n],c=s.aggregates;if(i===s.index&&c){var l=a(c,e);if(void 0!==l)return l}}}function o(e,t){var r;s.isSelectRef(e)&&(r=e.expressionName);for(var i=0,n=t.length;n>i;i++){var o=t[i];if(o&&(!r||o.queryName))if(r){if(o.queryName===r)return i}else if(s.equals(o.expr,e))return i}return-1}function a(e,r){if(s.isPercentile(r)){var i=_.find(e.percentiles,function(e){if(e.k===r.k){var t=!!e.exclusive;return r.exclusive===t}});if(i)return i.value}else if(s.isAggregation(r))switch(r.func){case t.QueryAggregateFunction.Min:return u(e.min,e.minLocal);case t.QueryAggregateFunction.Max:return u(e.max,e.maxLocal);case t.QueryAggregateFunction.Median:return e.median;case t.QueryAggregateFunction.Avg:return e.average}}function u(e,t){return void 0!==e?e:t}var s=e.data.SQExpr;t.createStaticEvalContext=r;var c=function(){function e(e,t,r){this.colorAllocatorCache=e,this.dataView=t,this.selectTransforms=r}return e.prototype.getColorAllocator=function(e){return this.colorAllocatorCache.get(e)},e.prototype.getExprValue=function(e){var t=this.dataView,r=this.selectTransforms;if(t&&r){if(s.isAggregation(e)||s.isPercentile(e)){var o=n(e,r,t.metadata.columns);if(void 0!==o)return o}return t.table?i(e,r,t.table,0):void 0}},e.prototype.getRoleValue=function(e){},e}();t.getExprValueFromTable=i,t.findSelectIndex=o}(t=e.data||(e.data={}))}(r||(r={}))},448:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(e){function t(t,r){return e.createStaticEvalContext(t)}e.createMatrixEvalContext=t}(t=e.data||(e.data={}))}(r||(r={}))},449:function(e,t){var r,i=window.jsCommon,r=window.powerbi;window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t,n=i.StringExtensions,o=i.Formatting,a=i.RegExpExtensions;!function(e){function t(e){return o.lastIndex=0,e.replace(o,"")}function r(e,t){for(o.lastIndex=0;;){var r=o.exec(e);if(!r)break;var i=r[0],n=o.lastIndex-i.length,a=String.fromCharCode(57600+t.length);t.push(i),e=e.substr(0,n)+a+e.substr(o.lastIndex),o.lastIndex=n+1}return e}function i(e,t,r){void 0===r&&(r=!0);for(var i=t.length,n=0;i>n;n++){var o=String.fromCharCode(57600+n),a=t[n];if(!r){var u=a[0];a="\\"===u||1===a.length||a[a.length-1]!==u?a.substring(1):a.substring(1,a.length-1)}e=e.replace(o,a)}return e}var n=["'[^']*'",'"[^"]*"',"\\\\.","'[^']*$",'"[^"]*$',"\\\\$"],o=new RegExp(n.join("|"),"g");e.removeLiterals=t,e.preserveLiterals=r,e.restoreLiterals=i}(t||(t={}));var u,s=/({{)|(}})|{(\d+[^}]*)}/g,c="0",l="#",p="E",f=[c,l],d=new RegExp(f.join("|"),"g"),v=function(){function e(){}return e.prototype.formatValue=function(e,t,r){if(void 0===e||null===e)return"";var i=this.getCulture(r);return u.canFormat(e)?u.format(e,t,i):h.canFormat(e)?h.format(e,t,i):e.toString()},e.prototype.format=function(e,t,r){var i=this;if(!e)return"";var n=e.replace(s,function(e,n,o,a){if(n)return"{";if(o)return"}";var u=a.split(":"),s=parseInt(u[0],10),c=u[1];return i.formatValue(t[s],c,r)});return n},e.prototype.isStandardNumberFormat=function(e){return h.isStandardFormat(e)},e.prototype.formatNumberWithCustomOverride=function(e,t,r,i){var n=this.getCulture(i);return h.formatWithCustomOverride(e,t,r,n)},e.prototype.dateFormatString=function(e){return this._dateTimeScaleFormatInfo||this.initialize(),this._dateTimeScaleFormatInfo.getFormatString(e)},e.prototype.setCurrentCulture=function(e){this._currentCultureSelector!==e&&(this._currentCulture=this.getCulture(e),this._currentCultureSelector=e,this._dateTimeScaleFormatInfo=new m(this._currentCulture))},e.prototype.getCulture=function(e){if(null==e)return null==this._currentCulture&&this.initialize(),this._currentCulture;var t=Globalize.findClosestCulture(e);return t||(t=Globalize.culture("en-US")),t},e.prototype.initialize=function(){var e=this.getCurrentCulture();this.setCurrentCulture(e);var t=this.getUrlParam("calendar");if(t){var r=this._currentCulture,i=r.calendars[t];i&&(r.calendar=i)}},e.prototype.getCurrentCulture=function(){var e=this.getUrlParam("language");return e?e:r&&r.common&&r.common.cultureInfo?r.common.cultureInfo:window.navigator.userLanguage||window.navigator.language||Globalize.culture().name},e.prototype.getUrlParam=function(e){var t=window.location.search.match(RegExp("[?&]"+e+"=([^&]*)"));return t?t[1]:void 0},e}();!function(e){function r(e){var t=e instanceof Date;return t}function i(e,t,r){t=t||"G";var i=1===t.length;try{return i?a(e,t,r):u(e,t,r)}catch(n){return a(e,"G",r)}}function a(e,t,r){var i=r.calendar.patterns;l(r.calendar);var n=o.findDateFormat(e,t,r.name);return t=1===n.format.length?i[n.format]:n.format,r=Globalize.culture("en-US"),Globalize.format(n.value,t,r)}function u(e,r,i){var o,a=[];if(r=t.preserveLiterals(r,a),r.indexOf("F")>-1){r=n.replaceAll(r,"FFFF","FFF");var u=e.getMilliseconds();if(u%10>=1&&(r=n.replaceAll(r,"FFF","fff")),r=n.replaceAll(r,"FFF","FF"),u%100/10>=1&&(r=n.replaceAll(r,"FF","ff")),r=n.replaceAll(r,"FF","F"),u%1e3/100>=1&&(r=n.replaceAll(r,"F","f")),r=n.replaceAll(r,"F",""),""===r||"%"===r)return""}return r=s(r),o=Globalize.format(e,r,i),o=c(o,i.calendar),o=t.restoreLiterals(o,a,!1)}function s(e){return e===p?f:(p=e,e=o.fixDateTimeFormat(e),f=e,e)}function c(e,t){var r=t[":"];if(":"===r)return e;for(var i="",n=e.length,o=0;n>o;o++){var a=e.charAt(o);switch(a){case":":i+=r;break;default:i+=a}}return i}function l(e){var t=e.patterns;void 0===t.g&&(t.g=t.f.replace(t.D,t.d),t.G=t.F.replace(t.D,t.d))}var p,f;e.canFormat=r,e.format=i}(u||(u={}));var h;!function(r){function i(e,t){if(!t||void 0===e)return e;var r="{0:"+t+"}";return e.replace("{0}",r)}function o(e,t){if(null==t)return t;if(v(t)){var i=r.getComponents(t),n=i.positive,o=i.negative,a=i.zero;return e>0?u(e,n):0===e?u(e,a):u(e,o)}return u(e,t)}function u(e,t){var r=a.run(N,t);return r?r[0]:t}function s(e,t,i){if(null==t)return e;if(null==e&&(e=c),v(e)){for(var n=r.getComponents(e),o=n.positive,a=n.negative,u=n.zero,s=[o,a,u],l=0;l<s.length;l++)s[l]=f(s[l],t,i);return s.join(r.NumberFormatComponentsDelimeter)}return f(e,t,i)}function f(e,r,i){if(r=Math.abs(r),r>=0){var o=[];e=t.preserveLiterals(e,o);var u=i?c:l,s=n.repeat(u,Math.abs(r)),p=a.run(j,e);if(p){var f=e.substr(0,p.index),d=e.substr(p.index+1,p[1].length),v=e.substr(p.index+p[0].length);if(i)d=s;else{var h=s.length-d.length;h>0?d+=s.slice(-h):0>h&&(d=d.slice(0,h))}d.length>0&&(d=Q+d),e=f+d+v}else s.length>0&&(e=e.replace(O,"$1"+Q+s));0!==o.length&&(e=t.restoreLiterals(e,o))}return e}function v(e){return-1!==t.removeLiterals(e).indexOf(r.NumberFormatComponentsDelimeter)}function h(e){var i={hasNegative:!1,positive:e,negative:e,zero:e},n=[];e=t.preserveLiterals(e,n);var o=e.split(r.NumberFormatComponentsDelimeter),a=o.length;return a>1&&(0!==n.length&&(o=_.map(o,function(e){return t.restoreLiterals(e,n)})),i.hasNegative=!0,i.positive=i.zero=o[0],i.negative=o[1],a>2&&(i.zero=o[2])),i}function m(e){var t="number"==typeof e;return t}function g(e){return I.test(e)}function y(e,t,r){t=t||"G";try{return g(t)?x(e,t,r):b(e,t,r)}catch(i){return Globalize.format(e,void 0,r)}}function w(e,t,r,i){return b(e,t,i,r)}function x(e,t,r){var i,o=t.length>1?parseInt(t.substr(1,t.length-1),10):void 0,a=r.numberFormat,u=t.charAt(0);switch(u){case"e":case"E":void 0===o&&(o=6);var s=n.repeat("0",o);t="0."+s+u+"+000",i=b(e,t,r);break;case"f":case"F":i=void 0!==o?e.toFixed(o):e.toFixed(a.decimals),i=R(i,a);break;case"g":case"G":var c=Math.abs(e);if(0===c||c>=1e-4&&1e15>c)i=void 0!==o?e.toPrecision(o):e.toString();else{if("number"!=typeof e)return String(e);i=void 0!==o?e.toExponential(o):e.toExponential(),i=i.replace("e","E")}i=R(i,a);break;case"r":case"R":i=e.toString(),i=R(i,a);break;case"x":case"X":if(i=e.toString(16),"X"===u&&(i=i.toUpperCase()),void 0!==o){var l=i.length,p=0>e;p&&l--;var f=o-l,d=void 0;f>0&&(d=n.repeat("0",f)),i=p?"-"+d+i.substr(1):d+i}i=R(i,a);break;default:i=Globalize.format(e,t,r)}return i}function b(n,o,u,s){var c,l=u.numberFormat;if(!isFinite(n))return Globalize.format(n,void 0);var p=h(o);o=n>0?p.positive:0===n?p.zero:p.negative,p.hasNegative&&(n=Math.abs(n));var f=E(o,!0),d=[];if(f.hasLiterals&&(o=t.preserveLiterals(o,d)),f.hasE&&!s){var v=a.run(P,o);if(v){var m=o.substr(0,v.index),g=o.substr(v.index+2),y=D(m,f),w=C(m,f);if(1!==w&&(n*=w),"number"!=typeof n)return String(n);var x=n.toExponential(y),b=x.indexOf("e"),V=x.substr(0,b),M=x.substr(b+1),R=T(V,m,l),F=T(M,g,l);"+"===F.charAt(0)&&"+"!==v[0].charAt(1)&&(F=F.substr(1));var I=v[0].charAt(0);c=R+I+F}}if(void 0===c){var _=void 0,A=!1,y=D(o,f),w=C(o,f);if(1!==w&&(n*=w),n=parseFloat(S(n,y)),s){var j=r.getNumericFormat(n,o);s=i(s,j),_=e.formattingService.format(s,[n],u.name),A=!0}else _=S(n,y);c=T(_,o,l,s,A)}return f.hasLiterals&&(c=t.restoreLiterals(c,d,!1)),U=f,c}function S(t,r){var i="",o=0;r>16&&(o=r-16,r=16);var a=e.Double.log10(Math.abs(t));if(16>a){if(a>0){var u=16-a;r>u&&(o+=r-u,r=u)}i=t.toFixed(r)}else if(16===a)i=t.toFixed(0),o+=r,o>0&&(i+=".");else{if("number"!=typeof t)return String(t);i=t.toExponential(15);var s=i.indexOf("e");if(s>0){var c=i.indexOf("."),l=i.substr(0,s),p=i.substr(s+1),f=parseInt(p,10)-(l.length-c-1);i=l.replace(".","")+n.repeat("0",f),r>0&&(i=i+"."+n.repeat("0",r))}}return o>0&&(i+=n.repeat("0",o)),i}function E(e,r,i){if(void 0!==U&&e===U.format)return U;for(var n=[],o=t.preserveLiterals(e,n),a={format:e,hasLiterals:0!==n.length,hasE:!1,hasCommas:!1,hasDots:!1,hasPercent:!1,hasPermile:!1,precision:void 0,scale:void 0},u=0,s=o.length;s>u;u++){var c=o.charAt(u);switch(c){case"e":case"E":a.hasE=!0;break;case",":a.hasCommas=!0;break;case".":a.hasDots=!0;break;case"%":a.hasPercent=!0;break;case"‰":a.hasPermile=!0}}var l=h(e);return r&&(a.precision=D(l.positive,a)),i&&(a.scale=C(l.positive,a)),a}function D(e,r){if(r.precision>-1)return r.precision;var i=0;if(r.hasDots){r.hasLiterals&&(e=t.removeLiterals(e));var n=e.indexOf(".");if(n>-1){for(var o=e.length,a=n;o>a;a++){var u=e.charAt(a);if(u.match(d)&&i++,u===p)break}i=Math.min(19,i)}}return r.precision=i,i}function C(e,t){if(t.scale>-1)return t.scale;var r=1;if(t.hasPercent&&e.indexOf("%")>-1&&(r=100*r),t.hasPermile&&e.indexOf("‰")>-1&&(r=1e3*r),t.hasCommas){var i=e.indexOf(".");-1===i&&(i=e.length);for(var n=i-1;n>-1;n--){var o=e.charAt(n);if(","!==o)break;r/=1e3}}return t.scale=r,r}function T(e,t,r,i,n){var o=!!i,a=t.split(".",2);if(2===a.length){var u=a[0],s=a[1],c="";i&&(c=i.replace(F,""),e=e.replace(c,""));var l=r["."],p=n?l:".",f=e.split(p,2),d=1===f.length?f[0]+c:f[0],v=2===f.length?f[1]+c:"";v=v.replace(A,"");var h=V(d,u,r,o),m=M(v,s,o);return m.fmtOnly||""===m.value?h+m.value:h+l+m.value}return V(e,t,r,o)}function V(e,t,r,i){var n=t.indexOf(","),o=n>-1&&n<Math.max(t.lastIndexOf("0"),t.lastIndexOf("#"))&&r[","],a=0,u=0,s=r.groupSizes||[3],p=s[0],f=r[","],d="",v=e.charAt(0);"+"!==v&&"-"!==v||(d=r[v],e=e.substr(1));for(var h="0"===e,m="",g="",y=e.length-1,w=!0,x=t.length-1;x>-1;x--){var b=t.charAt(x);switch(b){case c:case l:w=!1,""!==g&&(m=g+m,g=""),i||((y>-1||b===c)&&o&&(a===p?(m=f+m,u++,u<s.length&&(p=s[u]),a=1):a++),y>-1?(h&&b===l||(m=e.charAt(y)+m),y--):b!==l&&(m=b+m));break;case",":break;default:g=b+g}}if(!i){if(y>-1&&""!==m)if(o)for(;y>-1;)a===p?(m=f+m,u++,u<s.length&&(p=s[u]),a=1):a++,m=e.charAt(y)+m,y--;else m=e.substr(0,y+1)+m;return d+g+m}return w?d+g+m:d+g+e+m}function M(e,t,r){var i=0,n=t.length,o=e.length;if(r){var a=t.charAt(n-1);return a.match(d)?{value:e,fmtOnly:""===e}:{value:e+a,fmtOnly:""===e}}for(var u="",s=!0,p=0;n>p;p++){var f=t.charAt(p);if(o>i)switch(f){case c:case l:u+=e[i++],s=!1;break;default:u+=f}else f!==l&&(u+=f,s=s&&f!==c)}return{value:u,fmtOnly:s}}function R(e,t){var r=t["+"],i=t["-"],n=t["."],o=t[","];if("+"===r&&"-"===i&&"."===n&&","===o)return e;for(var a=e.length,u="",s=0;a>s;s++){var c=e.charAt(s);switch(c){case"+":u+=r;break;case"-":u+=i;break;case".":u+=n;break;case",":u+=o;break;default:u+=c}}return u}var F=/\{.+\}/,P=/e[+-]*[0#]+/i,I=/^[a-z]\d{0,2}$/i,A=/0+$/,j=/\.([0#]*)/g,N=/[0#,\.]+[0,#]*/g,O=/([0#])(?=[^0#]*$)/,Q=".";r.NumberFormatComponentsDelimeter=";",r.getNumericFormat=o,r.addDecimalsToFormat=s,r.hasFormatComponents=v,r.getComponents=h;var U;r.canFormat=m,r.isStandardFormat=g,r.format=y,r.formatWithCustomOverride=w,r.getCustomFormatMetadata=E}(h=e.NumberFormat||(e.NumberFormat={}));var m=function(){function t(e){var t=e.calendar,r=t.patterns,i=t.months.namesAbbr,n=i&&i[0],o=r.Y,a=r.M,u=r.f,s=r.T,c=r.t,l=u.indexOf(",")>-1?", ":" ",p=0===o.indexOf("yyyy'")&&o.length>6&&"'"===o[6];this.YearPattern=p?o.substr(0,7):"yyyy";var f=u.indexOf("yy"),d=u.indexOf("MMMM");this.MonthPattern=n&&d>-1?f>d?"MMM yyyy":"yyyy MMM":o,this.DayPattern=n?a.replace("MMMM","MMM"):a;var v=u.indexOf("mm"),h=u.indexOf("tt"),m=h>-1?c.replace(":mm ",""):c;switch(this.HourPattern=v>f?this.DayPattern+l+m:m+l+this.DayPattern,this.MinutePattern=c,this.SecondPattern=s,this.MillisecondPattern=s.replace("ss","ss.fff"),e.name){case"fi-FI":this.DayPattern=this.DayPattern.replace("'ta'",""),this.HourPattern=this.HourPattern.replace("'ta'","")}}return t.prototype.getFormatString=function(t){switch(t){case e.DateTimeUnit.Year:return this.YearPattern;case e.DateTimeUnit.Month:return this.MonthPattern;case e.DateTimeUnit.Week:case e.DateTimeUnit.Day:return this.DayPattern;case e.DateTimeUnit.Hour:return this.HourPattern;case e.DateTimeUnit.Minute:return this.MinutePattern;case e.DateTimeUnit.Second:return this.SecondPattern;case e.DateTimeUnit.Millisecond:return this.MillisecondPattern}},t}();e.formattingService=new v}(r||(r={}))},450:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){var r=e.data.Selector,i=function(){function t(e,t){this.selector=e,this.highlight=t,this.key=JSON.stringify({selector:e?r.getKey(e):null,highlight:t}),this.keyWithoutHighlight=JSON.stringify({selector:e?r.getKey(e):null})}return t.prototype.equals=function(e){return this.selector&&e.selector?this.highlight===e.highlight&&r.equals(this.selector,e.selector):!this.selector==!e.selector&&this.highlight===e.highlight},t.prototype.includes=function(t,r){void 0===r&&(r=!1);var i=this.selector,n=t.selector;if(!i||!n)return!1;var o=i.data,a=n.data;if(!o&&i.metadata&&i.metadata!==n.metadata)return!1;if(!r&&this.highlight!==t.highlight)return!1;if(o){if(!a)return!1;if(o.length>0)for(var u=0,s=o.length;s>u;u++){var c=o[u];if(!a.some(function(t){return e.DataViewScopeIdentity.equals(c,t)}))return!1}}return!0},t.prototype.getKey=function(){return this.key},t.prototype.getKeyWithoutHighlight=function(){return this.keyWithoutHighlight},t.prototype.hasIdentity=function(){return this.selector&&!!this.selector.data},t.prototype.getSelector=function(){return this.selector},t.prototype.getSelectorsByColumn=function(){return this.selectorsByColumn},t.createNull=function(e){return void 0===e&&(e=!1),new t(null,e)},t.createWithId=function(e,r){void 0===r&&(r=!1);var i=null;return e&&(i={data:[e]}),new t(i,r)},t.createWithMeasure=function(e,r){void 0===r&&(r=!1);var i={metadata:e},n=new t(i,r);return n.selectorsByColumn={metadata:e},n},t.createWithIdAndMeasure=function(e,r,i){void 0===i&&(i=!1);var n={};e&&(n.data=[e]),r&&(n.metadata=r),e||r||(n=null);var o=new t(n,i);return o},t.createWithIdAndMeasureAndCategory=function(e,t,r,i){void 0===i&&(i=!1);var n=this.createWithIdAndMeasure(e,t,i);return n.selector&&(n.selectorsByColumn={},e&&r&&(n.selectorsByColumn.dataMap={},n.selectorsByColumn.dataMap[r]=e),t&&(n.selectorsByColumn.metadata=t)),n},t.createWithIds=function(e,r,i){void 0===i&&(i=!1);var n=null,o=t.idArray(e,r);return o&&(n={data:o}),new t(n,i)},t.createWithIdsAndMeasure=function(e,r,i,n){void 0===n&&(n=!1);var o={},a=t.idArray(e,r);return a&&(o.data=a),i&&(o.metadata=i),e||r||i||(o=null),new t(o,n)},t.createWithSelectorForColumnAndMeasure=function(e,t,r){void 0===r&&(r=!1);var i,n=Object.keys(e);i=2===n.length?this.createWithIdsAndMeasure(e[n[0]],e[n[1]],t,r):1===n.length?this.createWithIdsAndMeasure(e[n[0]],null,t,r):this.createWithIdsAndMeasure(null,null,t,r);var o={};return _.isEmpty(e)||(o.dataMap=e),t&&(o.metadata=t),e||t||(o=null),i.selectorsByColumn=o,i},t.createWithHighlight=function(e){var r=new t(e.getSelector(),!0);return r.selectorsByColumn=e.selectorsByColumn,r},t.idArray=function(e,t){if(e||t){var r=[];return e&&r.push(e),t&&t!==e&&r.push(t),r}},t}();t.SelectionId=i;var n=function(){function e(){}return e.builder=function(){return new e},e.prototype.withCategoryIdentity=function(e,t){return e&&e.source&&e.source.queryName&&(this.ensureDataMap()[e.source.queryName]=t),this},e.prototype.withCategory=function(e,t){return e&&e.source&&e.source.queryName&&e.identity&&(this.ensureDataMap()[e.source.queryName]=e.identity[t]),this},e.prototype.withSeries=function(e,t){return e&&e.source&&e.source.queryName&&t&&(this.ensureDataMap()[e.source.queryName]=t.identity),this},e.prototype.withMeasure=function(e){return this.measure=e,this},e.prototype.createSelectionId=function(){return i.createWithSelectorForColumnAndMeasure(this.ensureDataMap(),this.measure)},e.prototype.ensureDataMap=function(){return this.dataMap||(this.dataMap={}),this.dataMap},e}();t.SelectionIdBuilder=n}(t=e.visuals||(e.visuals={}))}(r||(r={}))},451:function(e,t){var r,r=(window.jsCommon,window.powerbi);window.powerbitests,window.InJs,window.debug,window.jasmine,window.Microsoft;!function(e){var t;!function(t){function r(e,t){if(e){_.isEmpty(t)&&(t=e.defaultPresetName);var r=e.presets[t];return r||(r=e.presets[e.defaultPresetName]),r}}function i(t){var r=[];if(t){var i=t.presets;if(i)for(var n in i){var o=i[n];r.push({value:o.name,displayName:o.displayName})}}return e.createEnumType(r)}t.getStylePreset=r,t.getStylePresetsEnum=i}(t=e.VisualStylePresetHelpers||(e.VisualStylePresetHelpers={}))}(r||(r={}))}});